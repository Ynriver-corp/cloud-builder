"use strict";(self.webpackChunkcloud_builder=self.webpackChunkcloud_builder||[]).push([[590],{42292:function(e,t,i){i.d(t,{Fw:function(){return w},Jy:function(){return C},rc:function(){return N},vk:function(){return I},KY:function(){return R},IH:function(){return P},R7:function(){return E},SC:function(){return L},M8:function(){return T},xk:function(){return D},a7:function(){return M},Zj:function(){return A},IY:function(){return O},RX:function(){return F},sH:function(){return V},F8:function(){return W},WL:function(){return B},xH:function(){return H}});var s=i(65321),n=i(90317),o=i(74741),r=i(41264),a=i(4669),l=i(36248),h=i(11640),c=i(84527),d=i(46736),u=i(63580),p=i(38819),g=i(72065),_=i(65026),m=i(16830),f=i(73910),v=i(73046),S=i(27628),b=function(e,t,i,s){var n,o=arguments.length,r=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(o<3?n(r):o>3?n(t,i,r):n(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r},y=function(e,t){return function(i,s){t(i,s,e)}};const w=(0,g.yh)("IPeekViewService");var C;(0,_.z)(w,class{constructor(){this._widgets=new Map}addExclusiveWidget(e,t){const i=this._widgets.get(e);i&&(i.listener.dispose(),i.widget.dispose());this._widgets.set(e,{widget:t,listener:t.onDidClose((()=>{const i=this._widgets.get(e);i&&i.widget===t&&(i.listener.dispose(),this._widgets.delete(e))}))})}}),function(e){e.inPeekEditor=new p.uy("inReferenceSearchEditor",!0,u.N("inReferenceSearchEditor","Whether the current code editor is embedded inside peek")),e.notInPeekEditor=e.inPeekEditor.toNegated()}(C||(C={}));let x=class{constructor(e,t){e instanceof c.H&&C.inPeekEditor.bindTo(t)}dispose(){}};function N(e){let t=e.get(h.$).getFocusedCodeEditor();return t instanceof c.H?t.getParentEditor():t}x.ID="editor.contrib.referenceController",x=b([y(1,p.i6)],x),(0,m._K)(x.ID,x);const k={headerBackgroundColor:r.Il.white,primaryHeadingColor:r.Il.fromHex("#333333"),secondaryHeadingColor:r.Il.fromHex("#6c6c6cb3")};let I=class extends d.IJ{constructor(e,t,i){super(e,t),this.instantiationService=i,this._onDidClose=new a.Q5,this.onDidClose=this._onDidClose.event,l.jB(this.options,k,!1)}dispose(){this.disposed||(this.disposed=!0,super.dispose(),this._onDidClose.fire(this))}style(e){let t=this.options;e.headerBackgroundColor&&(t.headerBackgroundColor=e.headerBackgroundColor),e.primaryHeadingColor&&(t.primaryHeadingColor=e.primaryHeadingColor),e.secondaryHeadingColor&&(t.secondaryHeadingColor=e.secondaryHeadingColor),super.style(e)}_applyStyles(){super._applyStyles();let e=this.options;this._headElement&&e.headerBackgroundColor&&(this._headElement.style.backgroundColor=e.headerBackgroundColor.toString()),this._primaryHeading&&e.primaryHeadingColor&&(this._primaryHeading.style.color=e.primaryHeadingColor.toString()),this._secondaryHeading&&e.secondaryHeadingColor&&(this._secondaryHeading.style.color=e.secondaryHeadingColor.toString()),this._bodyElement&&e.frameColor&&(this._bodyElement.style.borderColor=e.frameColor.toString())}_fillContainer(e){this.setCssClass("peekview-widget"),this._headElement=s.$(".head"),this._bodyElement=s.$(".body"),this._fillHead(this._headElement),this._fillBody(this._bodyElement),e.appendChild(this._headElement),e.appendChild(this._bodyElement)}_fillHead(e,t){const i=s.$(".peekview-title");s.R3(this._headElement,i),s.mu(i,"click",(e=>this._onTitleClick(e))),this._fillTitleIcon(i),this._primaryHeading=s.$("span.filename"),this._secondaryHeading=s.$("span.dirname"),this._metaHeading=s.$("span.meta"),s.R3(i,this._primaryHeading,this._secondaryHeading,this._metaHeading);const r=s.$(".peekview-actions");s.R3(this._headElement,r);const a=this._getActionBarOptions();this._actionbarWidget=new n.o(r,a),this._disposables.add(this._actionbarWidget),t||this._actionbarWidget.push(new o.aU("peekview.close",u.N("label.close","Close"),v.lA.close.classNames,!0,(()=>(this.dispose(),Promise.resolve()))),{label:!1,icon:!0})}_fillTitleIcon(e){}_getActionBarOptions(){return{actionViewItemProvider:S.Id.bind(void 0,this.instantiationService),orientation:0}}_onTitleClick(e){}setTitle(e,t){this._primaryHeading&&this._secondaryHeading&&(this._primaryHeading.innerText=e,this._primaryHeading.setAttribute("title",e),t?this._secondaryHeading.innerText=t:s.PO(this._secondaryHeading))}setMetaTitle(e){this._metaHeading&&(e?(this._metaHeading.innerText=e,s.$Z(this._metaHeading)):s.Cp(this._metaHeading))}_doLayout(e,t){if(!this._isShowing&&e<0)return void this.dispose();const i=Math.ceil(1.2*this.editor.getOption(57)),s=Math.round(e-(i+2));this._doLayoutHead(i,t),this._doLayoutBody(s,t)}_doLayoutHead(e,t){this._headElement&&(this._headElement.style.height=`${e}px`,this._headElement.style.lineHeight=this._headElement.style.height)}_doLayoutBody(e,t){this._bodyElement&&(this._bodyElement.style.height=`${e}px`)}};I=b([y(2,g.TG)],I);const R=(0,f.P6)("peekViewTitle.background",{dark:"#1E1E1E",light:"#FFFFFF",hc:"#0C141F"},u.N("peekViewTitleBackground","Background color of the peek view title area.")),P=(0,f.P6)("peekViewTitleLabel.foreground",{dark:"#FFFFFF",light:"#333333",hc:"#FFFFFF"},u.N("peekViewTitleForeground","Color of the peek view title.")),E=(0,f.P6)("peekViewTitleDescription.foreground",{dark:"#ccccccb3",light:"#616161e6",hc:"#FFFFFF99"},u.N("peekViewTitleInfoForeground","Color of the peek view title info.")),L=(0,f.P6)("peekView.border",{dark:"#007acc",light:"#007acc",hc:f.lR},u.N("peekViewBorder","Color of the peek view borders and arrow.")),T=(0,f.P6)("peekViewResult.background",{dark:"#252526",light:"#F3F3F3",hc:r.Il.black},u.N("peekViewResultsBackground","Background color of the peek view result list.")),D=(0,f.P6)("peekViewResult.lineForeground",{dark:"#bbbbbb",light:"#646465",hc:r.Il.white},u.N("peekViewResultsMatchForeground","Foreground color for line nodes in the peek view result list.")),M=(0,f.P6)("peekViewResult.fileForeground",{dark:r.Il.white,light:"#1E1E1E",hc:r.Il.white},u.N("peekViewResultsFileForeground","Foreground color for file nodes in the peek view result list.")),A=(0,f.P6)("peekViewResult.selectionBackground",{dark:"#3399ff33",light:"#3399ff33",hc:null},u.N("peekViewResultsSelectionBackground","Background color of the selected entry in the peek view result list.")),O=(0,f.P6)("peekViewResult.selectionForeground",{dark:r.Il.white,light:"#6C6C6C",hc:r.Il.white},u.N("peekViewResultsSelectionForeground","Foreground color of the selected entry in the peek view result list.")),F=(0,f.P6)("peekViewEditor.background",{dark:"#001F33",light:"#F2F8FC",hc:r.Il.black},u.N("peekViewEditorBackground","Background color of the peek view editor.")),V=(0,f.P6)("peekViewEditorGutter.background",{dark:F,light:F,hc:F},u.N("peekViewEditorGutterBackground","Background color of the gutter in the peek view editor.")),W=(0,f.P6)("peekViewResult.matchHighlightBackground",{dark:"#ea5c004d",light:"#ea5c004d",hc:null},u.N("peekViewResultsMatchHighlight","Match highlight color in the peek view result list.")),B=(0,f.P6)("peekViewEditor.matchHighlightBackground",{dark:"#ff8f0099",light:"#f5d802de",hc:null},u.N("peekViewEditorMatchHighlight","Match highlight color in the peek view editor.")),H=(0,f.P6)("peekViewEditor.matchHighlightBorder",{dark:null,light:null,hc:f.xL},u.N("peekViewEditorMatchHighlightBorder","Match highlight border in the peek view editor."))},71081:function(e,t,i){i.d(t,{T:function(){return o}});var s=i(43779),n=i(21212);class o extends s.Z{constructor(e,t,i,s,n,o){super(e,t,i,s,n,o)}getCodeEditorCommandPicks(){const e=this.activeTextEditorControl;if(!e)return[];const t=[];for(const i of e.getSupportedActions())t.push({commandId:i.id,commandAlias:i.alias,label:(0,n.x$)(i.label)||i.id});return t}}},98275:function(e,t,i){i.d(t,{X:function(){return c}});var s=i(84973),n=i(97781),o=i(27869),r=i(5976),a=i(65520),l=i(98401),h=i(88289);class c{constructor(e){this.options=e,this.rangeHighlightDecorationId=void 0}provide(e,t){var i;const s=new r.SL;e.canAcceptInBackground=!!(null===(i=this.options)||void 0===i?void 0:i.canAcceptInBackground),e.matchOnLabel=e.matchOnDescription=e.matchOnDetail=e.sortByLabel=!1;const n=s.add(new r.XK);return n.value=this.doProvide(e,t),s.add(this.onDidActiveTextEditorControlChange((()=>{n.value=void 0,n.value=this.doProvide(e,t)}))),s}doProvide(e,t){const i=new r.SL,s=this.activeTextEditorControl;if(s&&this.canProvideWithTextEditor(s)){const n={editor:s},o=(0,a.Pi)(s);if(o){let e=(0,l.f6)(s.saveViewState());i.add(o.onDidChangeCursorPosition((()=>{e=(0,l.f6)(s.saveViewState())}))),n.restoreViewState=()=>{e&&s===this.activeTextEditorControl&&s.restoreViewState(e)},i.add((0,h.I)(t.onCancellationRequested)((()=>{var e;return null===(e=n.restoreViewState)||void 0===e?void 0:e.call(n)})))}i.add((0,r.OF)((()=>this.clearDecorations(s)))),i.add(this.provideWithTextEditor(n,e,t))}else i.add(this.provideWithoutTextEditor(e,t));return i}canProvideWithTextEditor(e){return!0}gotoLocation({editor:e},t){e.setSelection(t.range),e.revealRangeInCenter(t.range,0),t.preserveFocus||e.focus()}getModel(e){var t;return(0,a.QI)(e)?null===(t=e.getModel())||void 0===t?void 0:t.modified:e.getModel()}addDecorations(e,t){e.changeDecorations((e=>{const i=[];this.rangeHighlightDecorationId&&(i.push(this.rangeHighlightDecorationId.overviewRulerDecorationId),i.push(this.rangeHighlightDecorationId.rangeHighlightId),this.rangeHighlightDecorationId=void 0);const r=[{range:t,options:{description:"quick-access-range-highlight",className:"rangeHighlight",isWholeLine:!0}},{range:t,options:{description:"quick-access-range-highlight-overview",overviewRuler:{color:(0,n.EN)(o.m9),position:s.sh.Full}}}],[a,l]=e.deltaDecorations(i,r);this.rangeHighlightDecorationId={rangeHighlightId:a,overviewRulerDecorationId:l}}))}clearDecorations(e){const t=this.rangeHighlightDecorationId;t&&(e.changeDecorations((e=>{e.deltaDecorations([t.overviewRulerDecorationId,t.rangeHighlightId],[])})),this.rangeHighlightDecorationId=void 0)}}},4859:function(e,t,i){i.d(t,{q:function(){return a}});var s=i(63580),n=i(5976),o=i(98275),r=i(65520);class a extends o.X{constructor(){super({canAcceptInBackground:!0})}provideWithoutTextEditor(e){const t=(0,s.N)("cannotRunGotoLine","Open a text editor first to go to a line.");return e.items=[{label:t}],e.ariaLabel=t,n.JT.None}provideWithTextEditor(e,t,i){const s=e.editor,o=new n.SL;o.add(t.onDidAccept((i=>{const[n]=t.selectedItems;if(n){if(!this.isValidLineNumber(s,n.lineNumber))return;this.gotoLocation(e,{range:this.toRange(n.lineNumber,n.column),keyMods:t.keyMods,preserveFocus:i.inBackground}),i.inBackground||t.hide()}})));const l=()=>{const e=this.parsePosition(s,t.value.trim().substr(a.PREFIX.length)),i=this.getPickLabel(s,e.lineNumber,e.column);if(t.items=[{lineNumber:e.lineNumber,column:e.column,label:i}],t.ariaLabel=i,!this.isValidLineNumber(s,e.lineNumber))return void this.clearDecorations(s);const n=this.toRange(e.lineNumber,e.column);s.revealRangeInCenter(n,0),this.addDecorations(s,n)};l(),o.add(t.onDidChangeValue((()=>l())));const h=(0,r.Pi)(s);if(h){2===h.getOptions().get(58).renderType&&(h.updateOptions({lineNumbers:"on"}),o.add((0,n.OF)((()=>h.updateOptions({lineNumbers:"relative"})))))}return o}toRange(e=1,t=1){return{startLineNumber:e,startColumn:t,endLineNumber:e,endColumn:t}}parsePosition(e,t){const i=t.split(/,|:|#/).map((e=>parseInt(e,10))).filter((e=>!isNaN(e))),s=this.lineCount(e)+1;return{lineNumber:i[0]>0?i[0]:s+i[0],column:i[1]}}getPickLabel(e,t,i){if(this.isValidLineNumber(e,t))return this.isValidColumn(e,t,i)?(0,s.N)("gotoLineColumnLabel","Go to line {0} and character {1}.",t,i):(0,s.N)("gotoLineLabel","Go to line {0}.",t);const n=e.getPosition()||{lineNumber:1,column:1},o=this.lineCount(e);return o>1?(0,s.N)("gotoLineLabelEmptyWithLimit","Current Line: {0}, Character: {1}. Type a line number between 1 and {2} to navigate to.",n.lineNumber,n.column,o):(0,s.N)("gotoLineLabelEmpty","Current Line: {0}, Character: {1}. Type a line number to navigate to.",n.lineNumber,n.column)}isValidLineNumber(e,t){return!(!t||"number"!=typeof t)&&(t>0&&t<=this.lineCount(e))}isValidColumn(e,t,i){if(!i||"number"!=typeof i)return!1;const s=this.getModel(e);if(!s)return!1;const n={lineNumber:t,column:i};return s.validatePosition(n).equals(n)}lineCount(e){var t,i;return null!==(i=null===(t=this.getModel(e))||void 0===t?void 0:t.getLineCount())&&void 0!==i?i:0}}a.PREFIX=":"},67350:function(e,t,i){i.d(t,{S:function(){return g}});var s=i(63580),n=i(71050),o=i(5976),r=i(24314),a=i(98275),l=i(44101),h=i(86895),c=i(97295),d=i(53192),u=i(73046),p=function(e,t,i,s){return new(i||(i=Promise))((function(n,o){function r(e){try{l(s.next(e))}catch(e){o(e)}}function a(e){try{l(s.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}l((s=s.apply(e,t||[])).next())}))};class g extends a.X{constructor(e=Object.create(null)){super(e),this.options=e,this.options.canAcceptInBackground=!0}provideWithoutTextEditor(e){return this.provideLabelPick(e,(0,s.N)("cannotRunGotoSymbolWithoutEditor","To go to a symbol, first open a text editor with symbol information.")),o.JT.None}provideWithTextEditor(e,t,i){const s=e.editor,n=this.getModel(s);return n?l.vJ.has(n)?this.doProvideWithEditorSymbols(e,n,t,i):this.doProvideWithoutEditorSymbols(e,n,t,i):o.JT.None}doProvideWithoutEditorSymbols(e,t,i,n){const r=new o.SL;return this.provideLabelPick(i,(0,s.N)("cannotRunGotoSymbolWithoutSymbolProvider","The active text editor does not provide symbol information.")),(()=>{p(this,void 0,void 0,(function*(){(yield this.waitForLanguageSymbolRegistry(t,r))&&!n.isCancellationRequested&&r.add(this.doProvideWithEditorSymbols(e,t,i,n))}))})(),r}provideLabelPick(e,t){e.items=[{label:t,index:0,kind:14}],e.ariaLabel=t}waitForLanguageSymbolRegistry(e,t){return p(this,void 0,void 0,(function*(){if(l.vJ.has(e))return!0;let i;const s=new Promise((e=>i=e)),n=t.add(l.vJ.onDidChange((()=>{l.vJ.has(e)&&(n.dispose(),i(!0))})));return t.add((0,o.OF)((()=>i(!1)))),s}))}doProvideWithEditorSymbols(e,t,i,r){const a=e.editor,l=new o.SL;l.add(i.onDidAccept((t=>{const[s]=i.selectedItems;s&&s.range&&(this.gotoLocation(e,{range:s.range.selection,keyMods:i.keyMods,preserveFocus:t.inBackground}),t.inBackground||i.hide())}))),l.add(i.onDidTriggerItemButton((({item:t})=>{t&&t.range&&(this.gotoLocation(e,{range:t.range.selection,keyMods:i.keyMods,forceSideBySide:!0}),i.hide())})));const h=this.getDocumentSymbols(t,r);let c;const u=()=>p(this,void 0,void 0,(function*(){null==c||c.dispose(!0),i.busy=!1,c=new n.A(r),i.busy=!0;try{const e=(0,d.AO)(i.value.substr(g.PREFIX.length).trim()),t=yield this.doGetSymbolPicks(h,e,void 0,c.token);if(r.isCancellationRequested)return;t.length>0?i.items=t:e.original.length>0?this.provideLabelPick(i,(0,s.N)("noMatchingSymbolResults","No matching editor symbols")):this.provideLabelPick(i,(0,s.N)("noSymbolResults","No editor symbols"))}finally{r.isCancellationRequested||(i.busy=!1)}}));l.add(i.onDidChangeValue((()=>u()))),u();let _=!0;return l.add(i.onDidChangeActive((()=>{const[e]=i.activeItems;if(e&&e.range){if(_)return void(_=!1);a.revealRangeInCenter(e.range.selection,0),this.addDecorations(a,e.range.decoration)}}))),l}doGetSymbolPicks(e,t,i,n){return p(this,void 0,void 0,(function*(){const o=yield e;if(n.isCancellationRequested)return[];const a=0===t.original.indexOf(g.SCOPE_PREFIX),h=a?1:0;let p,f;t.values&&t.values.length>1?(p=(0,d.Ic)(t.values[0]),f=(0,d.Ic)(t.values.slice(1))):p=t;const v=[];for(let e=0;e<o.length;e++){const n=o[e],a=(0,c.fy)(n.name),g=`$(symbol-${l.uZ.toString(n.kind)||"property"}) ${a}`,_=g.length-a.length;let m,S,b,y,w=n.containerName;if((null==i?void 0:i.extraContainerLabel)&&(w=w?`${i.extraContainerLabel} • ${w}`:i.extraContainerLabel),t.original.length>h){let e=!1;if(p!==t&&([m,S]=(0,d.mt)(g,Object.assign(Object.assign({},t),{values:void 0}),h,_),"number"==typeof m&&(e=!0)),"number"!=typeof m&&([m,S]=(0,d.mt)(g,p,h,_),"number"!=typeof m))continue;if(!e&&f){if(w&&f.original.length>0&&([b,y]=(0,d.mt)(w,f)),"number"!=typeof b)continue;"number"==typeof m&&(m+=b)}}const C=n.tags&&n.tags.indexOf(1)>=0;v.push({index:e,kind:n.kind,score:m,label:g,ariaLabel:a,description:w,highlights:C?void 0:{label:S,description:y},range:{selection:r.e.collapseToStart(n.selectionRange),decoration:n.range},strikethrough:C,buttons:(()=>{var e,t;const i=(null===(e=this.options)||void 0===e?void 0:e.openSideBySideDirection)?null===(t=this.options)||void 0===t?void 0:t.openSideBySideDirection():void 0;if(i)return[{iconClass:"right"===i?u.lA.splitHorizontal.classNames:u.lA.splitVertical.classNames,tooltip:"right"===i?(0,s.N)("openToSide","Open to the Side"):(0,s.N)("openToBottom","Open to the Bottom")}]})()})}const S=v.sort(((e,t)=>a?this.compareByKindAndScore(e,t):this.compareByScore(e,t)));let b=[];if(a){let e,t,i=0;function s(){t&&"number"==typeof e&&i>0&&(t.label=(0,c.WU)(m[e]||_,i))}for(const n of S)e!==n.kind?(s(),e=n.kind,i=1,t={type:"separator"},b.push(t)):i++,b.push(n);s()}else S.length>0&&(b=[{label:(0,s.N)("symbols","symbols ({0})",v.length),type:"separator"},...S]);return b}))}compareByScore(e,t){if("number"!=typeof e.score&&"number"==typeof t.score)return 1;if("number"==typeof e.score&&"number"!=typeof t.score)return-1;if("number"==typeof e.score&&"number"==typeof t.score){if(e.score>t.score)return-1;if(e.score<t.score)return 1}return e.index<t.index?-1:e.index>t.index?1:0}compareByKindAndScore(e,t){const i=m[e.kind]||_,s=m[t.kind]||_,n=i.localeCompare(s);return 0===n?this.compareByScore(e,t):n}getDocumentSymbols(e,t){return p(this,void 0,void 0,(function*(){const i=yield h.C3.create(e,t);return t.isCancellationRequested?[]:i.asListOfDocumentSymbols()}))}}g.PREFIX="@",g.SCOPE_PREFIX=":",g.PREFIX_BY_CATEGORY=`${g.PREFIX}${g.SCOPE_PREFIX}`;const _=(0,s.N)("property","properties ({0})"),m={5:(0,s.N)("method","methods ({0})"),11:(0,s.N)("function","functions ({0})"),8:(0,s.N)("_constructor","constructors ({0})"),12:(0,s.N)("variable","variables ({0})"),4:(0,s.N)("class","classes ({0})"),22:(0,s.N)("struct","structs ({0})"),23:(0,s.N)("event","events ({0})"),24:(0,s.N)("operator","operators ({0})"),10:(0,s.N)("interface","interfaces ({0})"),2:(0,s.N)("namespace","namespaces ({0})"),3:(0,s.N)("package","packages ({0})"),25:(0,s.N)("typeParameter","type parameters ({0})"),1:(0,s.N)("modules","modules ({0})"),6:(0,s.N)("property","properties ({0})"),9:(0,s.N)("enum","enumerations ({0})"),21:(0,s.N)("enumMember","enumeration members ({0})"),14:(0,s.N)("string","strings ({0})"),0:(0,s.N)("file","files ({0})"),17:(0,s.N)("array","arrays ({0})"),15:(0,s.N)("number","numbers ({0})"),16:(0,s.N)("boolean","booleans ({0})"),18:(0,s.N)("object","objects ({0})"),19:(0,s.N)("key","keys ({0})"),7:(0,s.N)("field","fields ({0})"),13:(0,s.N)("constant","constants ({0})")}},4454:function(e,t,i){i.r(t),i.d(t,{RenameAction:function(){return H},rename:function(){return W}});var s=i(63580),n=i(17301),o=i(38819),r=i(90535),a=i(16830),l=i(29102),h=i(5976),c=i(50187),d=i(73910),u=i(97781),p=i(91847),g=function(e,t,i,s){var n,o=arguments.length,r=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(o<3?n(r):o>3?n(t,i,r):n(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r},_=function(e,t){return function(i,s){t(i,s,e)}};const m=new o.uy("renameInputVisible",!1,(0,s.N)("renameInputVisible","Whether the rename input widget is visible"));let f=class{constructor(e,t,i,s,n){this._editor=e,this._acceptKeybindings=t,this._themeService=i,this._keybindingService=s,this._disposables=new h.SL,this.allowEditorOverflow=!0,this._visibleContextKey=m.bindTo(n),this._editor.addContentWidget(this),this._disposables.add(this._editor.onDidChangeConfiguration((e=>{e.hasChanged(41)&&this._updateFont()}))),this._disposables.add(i.onDidColorThemeChange(this._updateStyles,this))}dispose(){this._disposables.dispose(),this._editor.removeContentWidget(this)}getId(){return"__renameInputWidget"}getDomNode(){if(!this._domNode){this._domNode=document.createElement("div"),this._domNode.className="monaco-editor rename-box",this._input=document.createElement("input"),this._input.className="rename-input",this._input.type="text",this._input.setAttribute("aria-label",(0,s.N)("renameAriaLabel","Rename input. Type new name and press Enter to commit.")),this._domNode.appendChild(this._input),this._label=document.createElement("div"),this._label.className="rename-label",this._domNode.appendChild(this._label);const e=()=>{var e,t;const[i,n]=this._acceptKeybindings;this._keybindingService.lookupKeybinding(i),this._label.innerText=(0,s.N)({key:"label",comment:['placeholders are keybindings, e.g "F2 to Rename, Shift+F2 to Preview"']},"{0} to Rename, {1} to Preview",null===(e=this._keybindingService.lookupKeybinding(i))||void 0===e?void 0:e.getLabel(),null===(t=this._keybindingService.lookupKeybinding(n))||void 0===t?void 0:t.getLabel())};e(),this._disposables.add(this._keybindingService.onDidUpdateKeybindings(e)),this._updateFont(),this._updateStyles(this._themeService.getColorTheme())}return this._domNode}_updateStyles(e){var t,i,s,n;if(!this._input||!this._domNode)return;const o=e.getColor(d.rh);this._domNode.style.backgroundColor=String(null!==(t=e.getColor(d.D0))&&void 0!==t?t:""),this._domNode.style.boxShadow=o?` 0 0 8px 2px ${o}`:"",this._domNode.style.color=String(null!==(i=e.getColor(d.zJ))&&void 0!==i?i:""),this._input.style.backgroundColor=String(null!==(s=e.getColor(d.sE))&&void 0!==s?s:"");const r=e.getColor(d.dt);this._input.style.borderWidth=r?"1px":"0px",this._input.style.borderStyle=r?"solid":"none",this._input.style.borderColor=null!==(n=null==r?void 0:r.toString())&&void 0!==n?n:"none"}_updateFont(){if(!this._input||!this._label)return;const e=this._editor.getOption(41);this._input.style.fontFamily=e.fontFamily,this._input.style.fontWeight=e.fontWeight,this._input.style.fontSize=`${e.fontSize}px`,this._label.style.fontSize=.8*e.fontSize+"px"}getPosition(){return this._visible?{position:this._position,preference:[2,1]}:null}afterRender(e){e||this.cancelInput(!0)}acceptInput(e){this._currentAcceptInput&&this._currentAcceptInput(e)}cancelInput(e){this._currentCancelInput&&this._currentCancelInput(e)}getInput(e,t,i,s,n,o){this._domNode.classList.toggle("preview",n),this._position=new c.L(e.startLineNumber,e.startColumn),this._input.value=t,this._input.setAttribute("selectionStart",i.toString()),this._input.setAttribute("selectionEnd",s.toString()),this._input.size=Math.max(1.1*(e.endColumn-e.startColumn),20);const r=new h.SL;return new Promise((e=>{this._currentCancelInput=t=>(this._currentAcceptInput=void 0,this._currentCancelInput=void 0,e(t),!0),this._currentAcceptInput=i=>{0!==this._input.value.trim().length&&this._input.value!==t?(this._currentAcceptInput=void 0,this._currentCancelInput=void 0,e({newName:this._input.value,wantsPreview:n&&i})):this.cancelInput(!0)},o.onCancellationRequested((()=>this.cancelInput(!0))),r.add(this._editor.onDidBlurEditorWidget((()=>this.cancelInput(!1)))),this._show()})).finally((()=>{r.dispose(),this._hide()}))}_show(){this._editor.revealLineInCenterIfOutsideViewport(this._position.lineNumber,0),this._visible=!0,this._visibleContextKey.set(!0),this._editor.layoutContentWidget(this),setTimeout((()=>{this._input.focus(),this._input.setSelectionRange(parseInt(this._input.getAttribute("selectionStart")),parseInt(this._input.getAttribute("selectionEnd")))}),100)}_hide(){this._visible=!1,this._visibleContextKey.reset(),this._editor.layoutContentWidget(this)}};f=g([_(2,u.XE),_(3,p.d),_(4,o.i6)],f);var v=i(44101),S=i(85152),b=i(24314),y=i(82276),w=i(39925),C=i(59422),x=i(66007),N=i(70666),k=i(11640),I=i(71050),R=i(15393),P=i(43557),E=i(72065),L=i(89872),T=i(23193),D=i(33187),M=i(98401),A=function(e,t,i,s){var n,o=arguments.length,r=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(o<3?n(r):o>3?n(t,i,r):n(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r},O=function(e,t){return function(i,s){t(i,s,e)}},F=function(e,t,i,s){return new(i||(i=Promise))((function(n,o){function r(e){try{l(s.next(e))}catch(e){o(e)}}function a(e){try{l(s.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}l((s=s.apply(e,t||[])).next())}))};class V{constructor(e,t){this.model=e,this.position=t,this._providerRenameIdx=0,this._providers=v.G0.ordered(e)}hasProvider(){return this._providers.length>0}resolveRenameLocation(e){return F(this,void 0,void 0,(function*(){const t=[];for(this._providerRenameIdx=0;this._providerRenameIdx<this._providers.length;this._providerRenameIdx++){const i=this._providers[this._providerRenameIdx];if(!i.resolveRenameLocation)break;let s=yield i.resolveRenameLocation(this.model,this.position,e);if(s){if(!s.rejectReason)return s;t.push(s.rejectReason)}}const i=this.model.getWordAtPosition(this.position);return i?{range:new b.e(this.position.lineNumber,i.startColumn,this.position.lineNumber,i.endColumn),text:i.word,rejectReason:t.length>0?t.join("\n"):void 0}:{range:b.e.fromPositions(this.position),text:"",rejectReason:t.length>0?t.join("\n"):void 0}}))}provideRenameEdits(e,t){return F(this,void 0,void 0,(function*(){return this._provideRenameEdits(e,this._providerRenameIdx,[],t)}))}_provideRenameEdits(e,t,i,n){return F(this,void 0,void 0,(function*(){const o=this._providers[t];if(!o)return{edits:[],rejectReason:i.join("\n")};const r=yield o.provideRenameEdits(this.model,this.position,e,n);return r?r.rejectReason?this._provideRenameEdits(e,t+1,i.concat(r.rejectReason),n):r:this._provideRenameEdits(e,t+1,i.concat(s.N("no result","No result.")),n)}))}}function W(e,t,i){return F(this,void 0,void 0,(function*(){const s=new V(e,t),n=yield s.resolveRenameLocation(I.T.None);return(null==n?void 0:n.rejectReason)?{edits:[],rejectReason:n.rejectReason}:s.provideRenameEdits(i,I.T.None)}))}let B=class e{constructor(e,t,i,s,n,o,r){this.editor=e,this._instaService=t,this._notificationService=i,this._bulkEditService=s,this._progressService=n,this._logService=o,this._configService=r,this._dispoableStore=new h.SL,this._cts=new I.A,this._renameInputField=this._dispoableStore.add(new R.Ue((()=>this._dispoableStore.add(this._instaService.createInstance(f,this.editor,["acceptRenameInput","acceptRenameInputWithPreview"])))))}static get(t){return t.getContribution(e.ID)}dispose(){this._dispoableStore.dispose(),this._cts.dispose(!0)}run(){return F(this,void 0,void 0,(function*(){if(this._cts.dispose(!0),!this.editor.hasModel())return;const e=this.editor.getPosition(),t=new V(this.editor.getModel(),e);if(!t.hasProvider())return;let i;this._cts=new w.Dl(this.editor,5);try{const e=t.resolveRenameLocation(this._cts.token);this._progressService.showWhile(e,250),i=yield e}catch(t){return void y.O.get(this.editor).showMessage(t||s.N("resolveRenameLocationFailed","An unknown error occurred while resolving rename location"),e)}if(!i)return;if(i.rejectReason)return void y.O.get(this.editor).showMessage(i.rejectReason,e);if(this._cts.token.isCancellationRequested)return;this._cts.dispose(),this._cts=new w.Dl(this.editor,5,i.range);let n=this.editor.getSelection(),o=0,r=i.text.length;b.e.isEmpty(n)||b.e.spansMultipleLines(n)||!b.e.containsRange(i.range,n)||(o=Math.max(0,n.startColumn-i.range.startColumn),r=Math.min(i.range.endColumn,n.endColumn)-i.range.startColumn);const a=this._bulkEditService.hasPreviewHandler()&&this._configService.getValue(this.editor.getModel().uri,"editor.rename.enablePreview"),l=yield this._renameInputField.value.getInput(i.range,i.text,o,r,a,this._cts.token);if("boolean"==typeof l)return void(l&&this.editor.focus());this.editor.focus();const h=(0,R.eP)(t.provideRenameEdits(l.newName,this._cts.token),this._cts.token).then((e=>F(this,void 0,void 0,(function*(){e&&this.editor.hasModel()&&(e.rejectReason?this._notificationService.info(e.rejectReason):this._bulkEditService.apply(x.fo.convert(e),{editor:this.editor,showPreview:l.wantsPreview,label:s.N("label","Renaming '{0}'",null==i?void 0:i.text),quotableLabel:s.N("quotableLabel","Renaming {0}",null==i?void 0:i.text)}).then((e=>{e.ariaSummary&&(0,S.Z9)(s.N("aria","Successfully renamed '{0}' to '{1}'. Summary: {2}",i.text,l.newName,e.ariaSummary))})).catch((e=>{this._notificationService.error(s.N("rename.failedApply","Rename failed to apply edits")),this._logService.error(e)})))}))),(e=>{this._notificationService.error(s.N("rename.failed","Rename failed to compute edits")),this._logService.error(e)}));return this._progressService.showWhile(h,250),h}))}acceptRenameInput(e){this._renameInputField.value.acceptInput(e)}cancelRenameInput(){this._renameInputField.value.cancelInput(!0)}};B.ID="editor.contrib.renameController",B=A([O(1,E.TG),O(2,C.lT),O(3,x.vu),O(4,r.e),O(5,P.VZ),O(6,D.V)],B);class H extends a.R6{constructor(){super({id:"editor.action.rename",label:s.N("rename.label","Rename Symbol"),alias:"Rename Symbol",precondition:o.Ao.and(l.u.writable,l.u.hasRenameProvider),kbOpts:{kbExpr:l.u.editorTextFocus,primary:60,weight:100},contextMenuOpts:{group:"1_modification",order:1.1}})}runCommand(e,t){const i=e.get(k.$),[s,o]=Array.isArray(t)&&t||[void 0,void 0];return N.o.isUri(s)&&c.L.isIPosition(o)?i.openCodeEditor({resource:s},i.getActiveCodeEditor()).then((e=>{e&&(e.setPosition(o),e.invokeWithinContext((t=>(this.reportTelemetry(t,e),this.run(t,e)))))}),n.dL):super.runCommand(e,t)}run(e,t){const i=B.get(t);return i?i.run():Promise.resolve()}}(0,a._K)(B.ID,B),(0,a.Qr)(H);const z=a._l.bindToContribution(B.get);(0,a.fK)(new z({id:"acceptRenameInput",precondition:m,handler:e=>e.acceptRenameInput(!1),kbOpts:{weight:199,kbExpr:l.u.focus,primary:3}})),(0,a.fK)(new z({id:"acceptRenameInputWithPreview",precondition:o.Ao.and(m,o.Ao.has("config.editor.rename.enablePreview")),handler:e=>e.acceptRenameInput(!0),kbOpts:{weight:199,kbExpr:l.u.focus,primary:1027}})),(0,a.fK)(new z({id:"cancelRenameInput",precondition:m,handler:e=>e.cancelRenameInput(),kbOpts:{weight:199,kbExpr:l.u.focus,primary:9,secondary:[1033]}})),(0,a.sb)("_executeDocumentRenameProvider",(function(e,t,...i){const[s]=i;return(0,M.p_)("string"==typeof s),W(e,t,s)})),L.B.as(T.IP.Configuration).registerConfiguration({id:"editor",properties:{"editor.rename.enablePreview":{scope:5,description:s.N("enablePreview","Enable/disable the ability to preview changes before renaming"),default:!0,type:"boolean"}}})},80689:function(e,t,i){i.d(t,{x:function(){return a}});var s=i(50187),n=i(24314),o=i(91741),r=function(e,t,i,s){return new(i||(i=Promise))((function(n,o){function r(e){try{l(s.next(e))}catch(e){o(e)}}function a(e){try{l(s.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}l((s=s.apply(e,t||[])).next())}))};class a{provideSelectionRanges(e,t){return r(this,void 0,void 0,(function*(){const i=[];for(const s of t){const t=[];i.push(t);const n=new Map;yield new Promise((t=>a._bracketsRightYield(t,0,e,s,n))),yield new Promise((i=>a._bracketsLeftYield(i,0,e,s,n,t)))}return i}))}static _bracketsRightYield(e,t,i,s,n){const r=new Map,l=Date.now();for(;;){if(t>=a._maxRounds){e();break}if(!s){e();break}let h=i.findNextBracket(s);if(!h){e();break}if(Date.now()-l>a._maxDuration){setTimeout((()=>a._bracketsRightYield(e,t+1,i,s,n)));break}const c=h.close[0];if(h.isOpen){let e=r.has(c)?r.get(c):0;r.set(c,e+1)}else{let e=r.has(c)?r.get(c):0;if(e-=1,r.set(c,Math.max(0,e)),e<0){let e=n.get(c);e||(e=new o.S,n.set(c,e)),e.push(h.range)}}s=h.range.getEndPosition()}}static _bracketsLeftYield(e,t,i,s,o,r){const l=new Map,h=Date.now();for(;;){if(t>=a._maxRounds&&0===o.size){e();break}if(!s){e();break}let c=i.findPrevBracket(s);if(!c){e();break}if(Date.now()-h>a._maxDuration){setTimeout((()=>a._bracketsLeftYield(e,t+1,i,s,o,r)));break}const d=c.close[0];if(c.isOpen){let e=l.has(d)?l.get(d):0;if(e-=1,l.set(d,Math.max(0,e)),e<0){let e=o.get(d);if(e){let t=e.shift();0===e.size&&o.delete(d);const s=n.e.fromPositions(c.range.getEndPosition(),t.getStartPosition()),l=n.e.fromPositions(c.range.getStartPosition(),t.getEndPosition());r.push({range:s}),r.push({range:l}),a._addBracketLeading(i,l,r)}}}else{let e=l.has(d)?l.get(d):0;l.set(d,e+1)}s=c.range.getStartPosition()}}static _addBracketLeading(e,t,i){if(t.startLineNumber===t.endLineNumber)return;const o=t.startLineNumber,r=e.getLineFirstNonWhitespaceColumn(o);0!==r&&r!==t.startColumn&&(i.push({range:n.e.fromPositions(new s.L(o,r),t.getEndPosition())}),i.push({range:n.e.fromPositions(new s.L(o,1),t.getEndPosition())}));const a=o-1;if(a>0){const o=e.getLineFirstNonWhitespaceColumn(a);o===t.startColumn&&o!==e.getLineLastNonWhitespaceColumn(a)&&(i.push({range:n.e.fromPositions(new s.L(a,o),t.getEndPosition())}),i.push({range:n.e.fromPositions(new s.L(a,1),t.getEndPosition())}))}}}a._maxDuration=30,a._maxRounds=2},81955:function(e,t,i){i.r(t),i.d(t,{provideSelectionRanges:function(){return y}});var s=i(9488),n=i(71050),o=i(16830),r=i(50187),a=i(24314),l=i(3860),h=i(29102),c=i(44101),d=i(63580),u=i(84144),p=i(97295);var g=i(80689),_=i(94565),m=i(17301),f=function(e,t,i,s){return new(i||(i=Promise))((function(n,o){function r(e){try{l(s.next(e))}catch(e){o(e)}}function a(e){try{l(s.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}l((s=s.apply(e,t||[])).next())}))};class v{constructor(e,t){this.index=e,this.ranges=t}mov(e){let t=this.index+(e?1:-1);if(t<0||t>=this.ranges.length)return this;const i=new v(t,this.ranges);return i.ranges[t].equalsRange(this.ranges[this.index])?i.mov(e):i}}class S{constructor(e){this._editor=e,this._ignoreSelection=!1}static get(e){return e.getContribution(S.ID)}dispose(){var e;null===(e=this._selectionListener)||void 0===e||e.dispose()}run(e){return f(this,void 0,void 0,(function*(){if(!this._editor.hasModel())return;const t=this._editor.getSelections(),i=this._editor.getModel();if(!c.AC.has(i))return;if(this._state||(yield y(i,t.map((e=>e.getPosition())),this._editor.getOption(101),n.T.None).then((e=>{var i;if(s.Of(e)&&e.length===t.length&&this._editor.hasModel()&&s.fS(this._editor.getSelections(),t,((e,t)=>e.equalsSelection(t)))){for(let i=0;i<e.length;i++)e[i]=e[i].filter((e=>e.containsPosition(t[i].getStartPosition())&&e.containsPosition(t[i].getEndPosition()))),e[i].unshift(t[i]);this._state=e.map((e=>new v(0,e))),null===(i=this._selectionListener)||void 0===i||i.dispose(),this._selectionListener=this._editor.onDidChangeCursorPosition((()=>{var e;this._ignoreSelection||(null===(e=this._selectionListener)||void 0===e||e.dispose(),this._state=void 0)}))}}))),!this._state)return;this._state=this._state.map((t=>t.mov(e)));const o=this._state.map((e=>l.Y.fromPositions(e.ranges[e.index].getStartPosition(),e.ranges[e.index].getEndPosition())));this._ignoreSelection=!0;try{this._editor.setSelections(o)}finally{this._ignoreSelection=!1}}))}}S.ID="editor.contrib.smartSelectController";class b extends o.R6{constructor(e,t){super(t),this._forward=e}run(e,t){return f(this,void 0,void 0,(function*(){let e=S.get(t);e&&(yield e.run(this._forward))}))}}_.P.registerCommandAlias("editor.action.smartSelect.grow","editor.action.smartSelect.expand");function y(e,t,i,n){return f(this,void 0,void 0,(function*(){const o=c.AC.all(e);1===o.length&&o.unshift(new g.x);let l=[],h=[];for(const i of o)l.push(Promise.resolve(i.provideSelectionRanges(e,t,n)).then((e=>{if(s.Of(e)&&e.length===t.length)for(let i=0;i<t.length;i++){h[i]||(h[i]=[]);for(const s of e[i])a.e.isIRange(s.range)&&a.e.containsPosition(s.range,t[i])&&h[i].push(a.e.lift(s.range))}}),m.Cp));return yield Promise.all(l),h.map((t=>{if(0===t.length)return[];t.sort(((e,t)=>r.L.isBefore(e.getStartPosition(),t.getStartPosition())?1:r.L.isBefore(t.getStartPosition(),e.getStartPosition())||r.L.isBefore(e.getEndPosition(),t.getEndPosition())?-1:r.L.isBefore(t.getEndPosition(),e.getEndPosition())?1:0));let s,n=[];for(const e of t)(!s||a.e.containsRange(e,s)&&!a.e.equalsRange(e,s))&&(n.push(e),s=e);if(!i.selectLeadingAndTrailingWhitespace)return n;let o=[n[0]];for(let t=1;t<n.length;t++){const i=n[t-1],s=n[t];if(s.startLineNumber!==i.startLineNumber||s.endLineNumber!==i.endLineNumber){const t=new a.e(i.startLineNumber,e.getLineFirstNonWhitespaceColumn(i.startLineNumber),i.endLineNumber,e.getLineLastNonWhitespaceColumn(i.endLineNumber));t.containsRange(i)&&!t.equalsRange(i)&&s.containsRange(t)&&!s.equalsRange(t)&&o.push(t);const n=new a.e(i.startLineNumber,1,i.endLineNumber,e.getLineMaxColumn(i.endLineNumber));n.containsRange(i)&&!n.equalsRange(t)&&s.containsRange(n)&&!s.equalsRange(n)&&o.push(n)}o.push(s)}return o}))}))}(0,o._K)(S.ID,S),(0,o.Qr)(class extends b{constructor(){super(!0,{id:"editor.action.smartSelect.expand",label:d.N("smartSelect.expand","Expand Selection"),alias:"Expand Selection",precondition:void 0,kbOpts:{kbExpr:h.u.editorTextFocus,primary:1553,mac:{primary:3345,secondary:[1297]},weight:100},menuOpts:{menuId:u.eH.MenubarSelectionMenu,group:"1_basic",title:d.N({key:"miSmartSelectGrow",comment:["&& denotes a mnemonic"]},"&&Expand Selection"),order:2}})}}),(0,o.Qr)(class extends b{constructor(){super(!1,{id:"editor.action.smartSelect.shrink",label:d.N("smartSelect.shrink","Shrink Selection"),alias:"Shrink Selection",precondition:void 0,kbOpts:{kbExpr:h.u.editorTextFocus,primary:1551,mac:{primary:3343,secondary:[1295]},weight:100},menuOpts:{menuId:u.eH.MenubarSelectionMenu,group:"1_basic",title:d.N({key:"miSmartSelectShrink",comment:["&& denotes a mnemonic"]},"&&Shrink Selection"),order:3}})}}),c.AC.register("*",new class{provideSelectionRanges(e,t){const i=[];for(const s of t){const t=[];i.push(t),this._addInWordRanges(t,e,s),this._addWordRanges(t,e,s),this._addWhitespaceLine(t,e,s),t.push({range:e.getFullModelRange()})}return i}_addInWordRanges(e,t,i){const s=t.getWordAtPosition(i);if(!s)return;let{word:n,startColumn:o}=s,r=i.column-o,l=r,h=r,c=0;for(;l>=0;l--){let e=n.charCodeAt(l);if(l!==r&&(95===e||45===e))break;if((0,p.mK)(e)&&(0,p.df)(c))break;c=e}for(l+=1;h<n.length;h++){let e=n.charCodeAt(h);if((0,p.df)(e)&&(0,p.mK)(c))break;if(95===e||45===e)break;c=e}l<h&&e.push({range:new a.e(i.lineNumber,o+l,i.lineNumber,o+h)})}_addWordRanges(e,t,i){const s=t.getWordAtPosition(i);s&&e.push({range:new a.e(i.lineNumber,s.startColumn,i.lineNumber,s.endColumn)})}_addWhitespaceLine(e,t,i){t.getLineLength(i.lineNumber)>0&&0===t.getLineFirstNonWhitespaceColumn(i.lineNumber)&&0===t.getLineLastNonWhitespaceColumn(i.lineNumber)&&e.push({range:new a.e(i.lineNumber,1,i.lineNumber,t.getLineMaxColumn(i.lineNumber))})}}),(0,o.f)("_executeSelectionRangeProvider",(function(e,...t){const[i]=t;return y(e,i,{selectLeadingAndTrailingWhitespace:!0},n.T.None)}))},93379:function(e,t,i){i.r(t),i.d(t,{SnippetController2:function(){return m}});var s=i(5976),n=i(16830),o=i(24314),r=i(3860),a=i(29102),l=i(79599),h=i(38819),c=i(43557),d=i(22470),u=i(63580),p=function(e,t,i,s){var n,o=arguments.length,r=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(o<3?n(r):o>3?n(t,i,r):n(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r},g=function(e,t){return function(i,s){t(i,s,e)}};const _={overwriteBefore:0,overwriteAfter:0,undoStopBefore:!0,undoStopAfter:!0,adjustWhitespace:!0,clipboardText:void 0,overtypingCapturer:void 0};let m=class e{constructor(t,i,n){this._editor=t,this._logService=i,this._snippetListener=new s.SL,this._modelVersionId=-1,this._inSnippet=e.InSnippetMode.bindTo(n),this._hasNextTabstop=e.HasNextTabstop.bindTo(n),this._hasPrevTabstop=e.HasPrevTabstop.bindTo(n)}static get(t){return t.getContribution(e.ID)}dispose(){var e;this._inSnippet.reset(),this._hasPrevTabstop.reset(),this._hasNextTabstop.reset(),null===(e=this._session)||void 0===e||e.dispose(),this._snippetListener.dispose()}insert(e,t){try{this._doInsert(e,void 0===t?_:Object.assign(Object.assign({},_),t))}catch(t){this.cancel(),this._logService.error(t),this._logService.error("snippet_error"),this._logService.error("insert_template=",e),this._logService.error("existing_template=",this._session?this._session._logInfo():"<no_session>")}}_doInsert(e,t){this._editor.hasModel()&&(this._snippetListener.clear(),t.undoStopBefore&&this._editor.getModel().pushStackElement(),this._session?this._session.merge(e,t):(this._modelVersionId=this._editor.getModel().getAlternativeVersionId(),this._session=new d.l(this._editor,e,t),this._session.insert()),t.undoStopAfter&&this._editor.getModel().pushStackElement(),this._updateState(),this._snippetListener.add(this._editor.onDidChangeModelContent((e=>e.isFlush&&this.cancel()))),this._snippetListener.add(this._editor.onDidChangeModel((()=>this.cancel()))),this._snippetListener.add(this._editor.onDidChangeCursorSelection((()=>this._updateState()))))}_updateState(){if(this._session&&this._editor.hasModel()){if(this._modelVersionId===this._editor.getModel().getAlternativeVersionId())return this.cancel();if(!this._session.hasPlaceholder)return this.cancel();if(this._session.isAtLastPlaceholder||!this._session.isSelectionWithinPlaceholders())return this.cancel();this._inSnippet.set(!0),this._hasPrevTabstop.set(!this._session.isAtFirstPlaceholder),this._hasNextTabstop.set(!this._session.isAtLastPlaceholder),this._handleChoice()}}_handleChoice(){if(!this._session||!this._editor.hasModel())return void(this._currentChoice=void 0);const{choice:e}=this._session;if(e){if(this._currentChoice!==e){this._currentChoice=e,this._editor.setSelections(this._editor.getSelections().map((e=>r.Y.fromPositions(e.getStartPosition()))));const[t]=e.options;(0,l.i5)(this._editor,e.options.map(((e,i)=>({kind:13,label:e.value,insertText:e.value,sortText:"a".repeat(i+1),range:o.e.fromPositions(this._editor.getPosition(),this._editor.getPosition().delta(0,t.value.length))}))))}}else this._currentChoice=void 0}finish(){for(;this._inSnippet.get();)this.next()}cancel(e=!1){var t;this._inSnippet.reset(),this._hasPrevTabstop.reset(),this._hasNextTabstop.reset(),this._snippetListener.clear(),null===(t=this._session)||void 0===t||t.dispose(),this._session=void 0,this._modelVersionId=-1,e&&this._editor.setSelections([this._editor.getSelection()])}prev(){this._session&&this._session.prev(),this._updateState()}next(){this._session&&this._session.next(),this._updateState()}isInSnippet(){return Boolean(this._inSnippet.get())}};m.ID="snippetController2",m.InSnippetMode=new h.uy("inSnippetMode",!1,(0,u.N)("inSnippetMode","Whether the editor in current in snippet mode")),m.HasNextTabstop=new h.uy("hasNextTabstop",!1,(0,u.N)("hasNextTabstop","Whether there is a next tab stop when in snippet mode")),m.HasPrevTabstop=new h.uy("hasPrevTabstop",!1,(0,u.N)("hasPrevTabstop","Whether there is a previous tab stop when in snippet mode")),m=p([g(1,c.VZ),g(2,h.i6)],m),(0,n._K)(m.ID,m);const f=n._l.bindToContribution(m.get);(0,n.fK)(new f({id:"jumpToNextSnippetPlaceholder",precondition:h.Ao.and(m.InSnippetMode,m.HasNextTabstop),handler:e=>e.next(),kbOpts:{weight:130,kbExpr:a.u.editorTextFocus,primary:2}})),(0,n.fK)(new f({id:"jumpToPrevSnippetPlaceholder",precondition:h.Ao.and(m.InSnippetMode,m.HasPrevTabstop),handler:e=>e.prev(),kbOpts:{weight:130,kbExpr:a.u.editorTextFocus,primary:1026}})),(0,n.fK)(new f({id:"leaveSnippet",precondition:m.InSnippetMode,handler:e=>e.cancel(!0),kbOpts:{weight:130,kbExpr:a.u.editorTextFocus,primary:9,secondary:[1033]}})),(0,n.fK)(new f({id:"acceptSnippet",precondition:m.InSnippetMode,handler:e=>e.finish()}))},63472:function(e,t,i){i.d(t,{xv:function(){return o},Vm:function(){return a},Lv:function(){return l},Yj:function(){return g}});class s{constructor(){this.value="",this.pos=0}static isDigitCharacter(e){return e>=48&&e<=57}static isVariableCharacter(e){return 95===e||e>=97&&e<=122||e>=65&&e<=90}text(e){this.value=e,this.pos=0}tokenText(e){return this.value.substr(e.pos,e.len)}next(){if(this.pos>=this.value.length)return{type:14,pos:this.pos,len:0};let e,t=this.pos,i=0,n=this.value.charCodeAt(t);if(e=s._table[n],"number"==typeof e)return this.pos+=1,{type:e,pos:t,len:1};if(s.isDigitCharacter(n)){e=8;do{i+=1,n=this.value.charCodeAt(t+i)}while(s.isDigitCharacter(n));return this.pos+=i,{type:e,pos:t,len:i}}if(s.isVariableCharacter(n)){e=9;do{n=this.value.charCodeAt(t+ ++i)}while(s.isVariableCharacter(n)||s.isDigitCharacter(n));return this.pos+=i,{type:e,pos:t,len:i}}e=10;do{i+=1,n=this.value.charCodeAt(t+i)}while(!isNaN(n)&&void 0===s._table[n]&&!s.isDigitCharacter(n)&&!s.isVariableCharacter(n));return this.pos+=i,{type:e,pos:t,len:i}}}s._table={36:0,58:1,44:2,123:3,125:4,92:5,47:6,124:7,43:11,45:12,63:13};class n{constructor(){this._children=[]}appendChild(e){return e instanceof o&&this._children[this._children.length-1]instanceof o?this._children[this._children.length-1].value+=e.value:(e.parent=this,this._children.push(e)),this}replace(e,t){const{parent:i}=e,s=i.children.indexOf(e),n=i.children.slice(0);n.splice(s,1,...t),i._children=n,function e(t,i){for(const s of t)s.parent=i,e(s.children,s)}(t,i)}get children(){return this._children}get snippet(){let e=this;for(;;){if(!e)return;if(e instanceof p)return e;e=e.parent}}toString(){return this.children.reduce(((e,t)=>e+t.toString()),"")}len(){return 0}}class o extends n{constructor(e){super(),this.value=e}toString(){return this.value}len(){return this.value.length}clone(){return new o(this.value)}}class r extends n{}class a extends r{constructor(e){super(),this.index=e}static compareByIndex(e,t){return e.index===t.index?0:e.isFinalTabstop?1:t.isFinalTabstop||e.index<t.index?-1:e.index>t.index?1:0}get isFinalTabstop(){return 0===this.index}get choice(){return 1===this._children.length&&this._children[0]instanceof l?this._children[0]:void 0}clone(){let e=new a(this.index);return this.transform&&(e.transform=this.transform.clone()),e._children=this.children.map((e=>e.clone())),e}}class l extends n{constructor(){super(...arguments),this.options=[]}appendChild(e){return e instanceof o&&(e.parent=this,this.options.push(e)),this}toString(){return this.options[0].value}len(){return this.options[0].len()}clone(){let e=new l;return this.options.forEach(e.appendChild,e),e}}class h extends n{constructor(){super(...arguments),this.regexp=new RegExp("")}resolve(e){const t=this;let i=!1,s=e.replace(this.regexp,(function(){return i=!0,t._replace(Array.prototype.slice.call(arguments,0,-2))}));return!i&&this._children.some((e=>e instanceof c&&Boolean(e.elseValue)))&&(s=this._replace([])),s}_replace(e){let t="";for(const i of this._children)if(i instanceof c){let s=e[i.index]||"";s=i.resolve(s),t+=s}else t+=i.toString();return t}toString(){return""}clone(){let e=new h;return e.regexp=new RegExp(this.regexp.source,(this.regexp.ignoreCase?"i":"")+(this.regexp.global?"g":"")),e._children=this.children.map((e=>e.clone())),e}}class c extends n{constructor(e,t,i,s){super(),this.index=e,this.shorthandName=t,this.ifValue=i,this.elseValue=s}resolve(e){return"upcase"===this.shorthandName?e?e.toLocaleUpperCase():"":"downcase"===this.shorthandName?e?e.toLocaleLowerCase():"":"capitalize"===this.shorthandName?e?e[0].toLocaleUpperCase()+e.substr(1):"":"pascalcase"===this.shorthandName?e?this._toPascalCase(e):"":"camelcase"===this.shorthandName?e?this._toCamelCase(e):"":Boolean(e)&&"string"==typeof this.ifValue?this.ifValue:Boolean(e)||"string"!=typeof this.elseValue?e||"":this.elseValue}_toPascalCase(e){const t=e.match(/[a-z0-9]+/gi);return t?t.map((e=>e.charAt(0).toUpperCase()+e.substr(1).toLowerCase())).join(""):e}_toCamelCase(e){const t=e.match(/[a-z0-9]+/gi);return t?t.map(((e,t)=>0===t?e.toLowerCase():e.charAt(0).toUpperCase()+e.substr(1).toLowerCase())).join(""):e}clone(){return new c(this.index,this.shorthandName,this.ifValue,this.elseValue)}}class d extends r{constructor(e){super(),this.name=e}resolve(e){let t=e.resolve(this);return this.transform&&(t=this.transform.resolve(t||"")),void 0!==t&&(this._children=[new o(t)],!0)}clone(){const e=new d(this.name);return this.transform&&(e.transform=this.transform.clone()),e._children=this.children.map((e=>e.clone())),e}}function u(e,t){const i=[...e];for(;i.length>0;){const e=i.shift();if(!t(e))break;i.unshift(...e.children)}}class p extends n{get placeholderInfo(){if(!this._placeholders){let e,t=[];this.walk((function(i){return i instanceof a&&(t.push(i),e=!e||e.index<i.index?i:e),!0})),this._placeholders={all:t,last:e}}return this._placeholders}get placeholders(){const{all:e}=this.placeholderInfo;return e}offset(e){let t=0,i=!1;return this.walk((s=>s===e?(i=!0,!1):(t+=s.len(),!0))),i?t:-1}fullLen(e){let t=0;return u([e],(e=>(t+=e.len(),!0))),t}enclosingPlaceholders(e){let t=[],{parent:i}=e;for(;i;)i instanceof a&&t.push(i),i=i.parent;return t}resolveVariables(e){return this.walk((t=>(t instanceof d&&t.resolve(e)&&(this._placeholders=void 0),!0))),this}appendChild(e){return this._placeholders=void 0,super.appendChild(e)}replace(e,t){return this._placeholders=void 0,super.replace(e,t)}clone(){let e=new p;return this._children=this.children.map((e=>e.clone())),e}walk(e){u(this.children,e)}}class g{constructor(){this._scanner=new s,this._token={type:14,pos:0,len:0}}static escape(e){return e.replace(/\$|}|\\/g,"\\$&")}static guessNeedsClipboard(e){return/\${?CLIPBOARD/.test(e)}parse(e,t,i){this._scanner.text(e),this._token=this._scanner.next();const s=new p;for(;this._parse(s););const n=new Map,o=[];let r=0;s.walk((e=>(e instanceof a&&(r+=1,e.isFinalTabstop?n.set(0,void 0):!n.has(e.index)&&e.children.length>0?n.set(e.index,e.children):o.push(e)),!0)));for(const e of o){const t=n.get(e.index);if(t){const i=new a(e.index);i.transform=e.transform;for(const e of t)i.appendChild(e.clone());s.replace(e,[i])}}return i||(i=r>0&&t),!n.has(0)&&i&&s.appendChild(new a(0)),s}_accept(e,t){if(void 0===e||this._token.type===e){let e=!t||this._scanner.tokenText(this._token);return this._token=this._scanner.next(),e}return!1}_backTo(e){return this._scanner.pos=e.pos+e.len,this._token=e,!1}_until(e){const t=this._token;for(;this._token.type!==e;){if(14===this._token.type)return!1;if(5===this._token.type){const e=this._scanner.next();if(0!==e.type&&4!==e.type&&5!==e.type)return!1}this._token=this._scanner.next()}const i=this._scanner.value.substring(t.pos,this._token.pos).replace(/\\(\$|}|\\)/g,"$1");return this._token=this._scanner.next(),i}_parse(e){return this._parseEscaped(e)||this._parseTabstopOrVariableName(e)||this._parseComplexPlaceholder(e)||this._parseComplexVariable(e)||this._parseAnything(e)}_parseEscaped(e){let t;return!!(t=this._accept(5,!0))&&(t=this._accept(0,!0)||this._accept(4,!0)||this._accept(5,!0)||t,e.appendChild(new o(t)),!0)}_parseTabstopOrVariableName(e){let t;const i=this._token;return this._accept(0)&&(t=this._accept(9,!0)||this._accept(8,!0))?(e.appendChild(/^\d+$/.test(t)?new a(Number(t)):new d(t)),!0):this._backTo(i)}_parseComplexPlaceholder(e){let t;const i=this._token;if(!(this._accept(0)&&this._accept(3)&&(t=this._accept(8,!0))))return this._backTo(i);const s=new a(Number(t));if(this._accept(1))for(;;){if(this._accept(4))return e.appendChild(s),!0;if(!this._parse(s))return e.appendChild(new o("${"+t+":")),s.children.forEach(e.appendChild,e),!0}else{if(!(s.index>0&&this._accept(7)))return this._accept(6)?this._parseTransform(s)?(e.appendChild(s),!0):(this._backTo(i),!1):this._accept(4)?(e.appendChild(s),!0):this._backTo(i);{const t=new l;for(;;){if(this._parseChoiceElement(t)){if(this._accept(2))continue;if(this._accept(7)&&(s.appendChild(t),this._accept(4)))return e.appendChild(s),!0}return this._backTo(i),!1}}}}_parseChoiceElement(e){const t=this._token,i=[];for(;2!==this._token.type&&7!==this._token.type;){let e;if(e=(e=this._accept(5,!0))?this._accept(2,!0)||this._accept(7,!0)||this._accept(5,!0)||e:this._accept(void 0,!0),!e)return this._backTo(t),!1;i.push(e)}return 0===i.length?(this._backTo(t),!1):(e.appendChild(new o(i.join(""))),!0)}_parseComplexVariable(e){let t;const i=this._token;if(!(this._accept(0)&&this._accept(3)&&(t=this._accept(9,!0))))return this._backTo(i);const s=new d(t);if(!this._accept(1))return this._accept(6)?this._parseTransform(s)?(e.appendChild(s),!0):(this._backTo(i),!1):this._accept(4)?(e.appendChild(s),!0):this._backTo(i);for(;;){if(this._accept(4))return e.appendChild(s),!0;if(!this._parse(s))return e.appendChild(new o("${"+t+":")),s.children.forEach(e.appendChild,e),!0}}_parseTransform(e){let t=new h,i="",s="";for(;!this._accept(6);){let e;if(e=this._accept(5,!0))e=this._accept(6,!0)||e,i+=e;else{if(14===this._token.type)return!1;i+=this._accept(void 0,!0)}}for(;!this._accept(6);){let e;if(e=this._accept(5,!0))e=this._accept(5,!0)||this._accept(6,!0)||e,t.appendChild(new o(e));else if(!this._parseFormatString(t)&&!this._parseAnything(t))return!1}for(;!this._accept(4);){if(14===this._token.type)return!1;s+=this._accept(void 0,!0)}try{t.regexp=new RegExp(i,s)}catch(e){return!1}return e.transform=t,!0}_parseFormatString(e){const t=this._token;if(!this._accept(0))return!1;let i=!1;this._accept(3)&&(i=!0);let s=this._accept(8,!0);if(!s)return this._backTo(t),!1;if(!i)return e.appendChild(new c(Number(s))),!0;if(this._accept(4))return e.appendChild(new c(Number(s))),!0;if(!this._accept(1))return this._backTo(t),!1;if(this._accept(6)){let i=this._accept(9,!0);return i&&this._accept(4)?(e.appendChild(new c(Number(s),i)),!0):(this._backTo(t),!1)}if(this._accept(11)){let t=this._until(4);if(t)return e.appendChild(new c(Number(s),void 0,t,void 0)),!0}else if(this._accept(12)){let t=this._until(4);if(t)return e.appendChild(new c(Number(s),void 0,void 0,t)),!0}else if(this._accept(13)){let t=this._until(1);if(t){let i=this._until(4);if(i)return e.appendChild(new c(Number(s),void 0,t,i)),!0}}else{let t=this._until(4);if(t)return e.appendChild(new c(Number(s),void 0,void 0,t)),!0}return this._backTo(t),!1}_parseAnything(e){return 14!==this._token.type&&(e.appendChild(new o(this._scanner.tokenText(this._token))),this._accept(void 0),!0)}}},22470:function(e,t,i){i.d(t,{l:function(){return D}});var s=i(9488),n=i(5976),o=i(97295),r=i(69386),a=i(24314),l=i(3860),h=i(83103),c=i(40382),d=i(72065),u=i(63472),p=i(63580),g=i(82663),_=i(95935),m=i(83831),f=i(68344),v=i(68843),S=i(98e3);class b{constructor(e){this._delegates=e}resolve(e){for(const t of this._delegates){let i=t.resolve(e);if(void 0!==i)return i}}}class y{constructor(e,t,i,s){this._model=e,this._selection=t,this._selectionIdx=i,this._overtypingCapturer=s}resolve(e){const{name:t}=e;if("SELECTION"===t||"TM_SELECTED_TEXT"===t){let t=this._model.getValueInRange(this._selection)||void 0,i=this._selection.startLineNumber!==this._selection.endLineNumber;if(!t&&this._overtypingCapturer){const e=this._overtypingCapturer.getLastOvertypedInfo(this._selectionIdx);e&&(t=e.value,i=e.multiline)}if(t&&i&&e.snippet){const i=this._model.getLineContent(this._selection.startLineNumber),s=(0,o.V8)(i,0,this._selection.startColumn-1);let n=s;e.snippet.walk((t=>t!==e&&(t instanceof u.xv&&(n=(0,o.V8)((0,o.uq)(t.value).pop())),!0)));const r=(0,o.Mh)(n,s);t=t.replace(/(\r\n|\r|\n)(.*)/g,((e,t,i)=>`${t}${n.substr(r)}${i}`))}return t}if("TM_CURRENT_LINE"===t)return this._model.getLineContent(this._selection.positionLineNumber);if("TM_CURRENT_WORD"===t){const e=this._model.getWordAtPosition({lineNumber:this._selection.positionLineNumber,column:this._selection.positionColumn});return e&&e.word||void 0}return"TM_LINE_INDEX"===t?String(this._selection.positionLineNumber-1):"TM_LINE_NUMBER"===t?String(this._selection.positionLineNumber):void 0}}class w{constructor(e,t){this._labelService=e,this._model=t}resolve(e){const{name:t}=e;if("TM_FILENAME"===t)return g.EZ(this._model.uri.fsPath);if("TM_FILENAME_BASE"===t){const e=g.EZ(this._model.uri.fsPath),t=e.lastIndexOf(".");return t<=0?e:e.slice(0,t)}return"TM_DIRECTORY"===t&&this._labelService?"."===g.XX(this._model.uri.fsPath)?"":this._labelService.getUriLabel((0,_.XX)(this._model.uri)):"TM_FILEPATH"===t&&this._labelService?this._labelService.getUriLabel(this._model.uri):"RELATIVE_FILEPATH"===t&&this._labelService?this._labelService.getUriLabel(this._model.uri,{relative:!0,noPrefix:!0}):void 0}}class C{constructor(e,t,i,s){this._readClipboardText=e,this._selectionIdx=t,this._selectionCount=i,this._spread=s}resolve(e){if("CLIPBOARD"!==e.name)return;const t=this._readClipboardText();if(t){if(this._spread){const e=t.split(/\r\n|\n|\r/).filter((e=>!(0,o.m5)(e)));if(e.length===this._selectionCount)return e[this._selectionIdx]}return t}}}class x{constructor(e,t){this._model=e,this._selection=t}resolve(e){const{name:t}=e,i=this._model.getLanguageIdAtPosition(this._selection.selectionStartLineNumber,this._selection.selectionStartColumn),s=m.zu.getComments(i);if(s)return"LINE_COMMENT"===t?s.lineCommentToken||void 0:"BLOCK_COMMENT_START"===t?s.blockCommentStartToken||void 0:"BLOCK_COMMENT_END"===t&&s.blockCommentEndToken||void 0}}class N{constructor(){this._date=new Date}resolve(e){const{name:t}=e;return"CURRENT_YEAR"===t?String(this._date.getFullYear()):"CURRENT_YEAR_SHORT"===t?String(this._date.getFullYear()).slice(-2):"CURRENT_MONTH"===t?String(this._date.getMonth().valueOf()+1).padStart(2,"0"):"CURRENT_DATE"===t?String(this._date.getDate().valueOf()).padStart(2,"0"):"CURRENT_HOUR"===t?String(this._date.getHours().valueOf()).padStart(2,"0"):"CURRENT_MINUTE"===t?String(this._date.getMinutes().valueOf()).padStart(2,"0"):"CURRENT_SECOND"===t?String(this._date.getSeconds().valueOf()).padStart(2,"0"):"CURRENT_DAY_NAME"===t?N.dayNames[this._date.getDay()]:"CURRENT_DAY_NAME_SHORT"===t?N.dayNamesShort[this._date.getDay()]:"CURRENT_MONTH_NAME"===t?N.monthNames[this._date.getMonth()]:"CURRENT_MONTH_NAME_SHORT"===t?N.monthNamesShort[this._date.getMonth()]:"CURRENT_SECONDS_UNIX"===t?String(Math.floor(this._date.getTime()/1e3)):void 0}}N.dayNames=[p.N("Sunday","Sunday"),p.N("Monday","Monday"),p.N("Tuesday","Tuesday"),p.N("Wednesday","Wednesday"),p.N("Thursday","Thursday"),p.N("Friday","Friday"),p.N("Saturday","Saturday")],N.dayNamesShort=[p.N("SundayShort","Sun"),p.N("MondayShort","Mon"),p.N("TuesdayShort","Tue"),p.N("WednesdayShort","Wed"),p.N("ThursdayShort","Thu"),p.N("FridayShort","Fri"),p.N("SaturdayShort","Sat")],N.monthNames=[p.N("January","January"),p.N("February","February"),p.N("March","March"),p.N("April","April"),p.N("May","May"),p.N("June","June"),p.N("July","July"),p.N("August","August"),p.N("September","September"),p.N("October","October"),p.N("November","November"),p.N("December","December")],N.monthNamesShort=[p.N("JanuaryShort","Jan"),p.N("FebruaryShort","Feb"),p.N("MarchShort","Mar"),p.N("AprilShort","Apr"),p.N("MayShort","May"),p.N("JuneShort","Jun"),p.N("JulyShort","Jul"),p.N("AugustShort","Aug"),p.N("SeptemberShort","Sep"),p.N("OctoberShort","Oct"),p.N("NovemberShort","Nov"),p.N("DecemberShort","Dec")];class k{constructor(e){this._workspaceService=e}resolve(e){if(!this._workspaceService)return;const t=(0,f.uT)(this._workspaceService.getWorkspace());return t?"WORKSPACE_NAME"===e.name?this._resolveWorkspaceName(t):"WORKSPACE_FOLDER"===e.name?this._resoveWorkspacePath(t):void 0:void 0}_resolveWorkspaceName(e){if((0,f.eb)(e))return g.EZ(e.uri.path);let t=g.EZ(e.configPath.path);return t.endsWith(f.A6)&&(t=t.substr(0,t.length-f.A6.length-1)),t}_resoveWorkspacePath(e){if((0,f.eb)(e))return(0,v.D)(e.uri.fsPath);let t=g.EZ(e.configPath.path),i=e.configPath.fsPath;return i.endsWith(t)&&(i=i.substr(0,i.length-t.length-1)),i?(0,v.D)(i):"/"}}class I{resolve(e){const{name:t}=e;return"RANDOM"===t?Math.random().toString().slice(-6):"RANDOM_HEX"===t?Math.random().toString(16).slice(-6):"UUID"===t?(0,S.R)():void 0}}var R=i(97781),P=i(73910),E=i(44349);(0,R.Ic)(((e,t)=>{function i(t){const i=e.getColor(t);return i?i.toString():"transparent"}t.addRule(`.monaco-editor .snippet-placeholder { background-color: ${i(P.u2)}; outline-color: ${i(P.Pk)}; }`),t.addRule(`.monaco-editor .finish-snippet-placeholder { background-color: ${i(P.I1)}; outline-color: ${i(P.U6)}; }`)}));class L{constructor(e,t,i,n){this._editor=e,this._snippet=t,this._offset=i,this._snippetLineLeadingWhitespace=n,this._nestingLevel=1,this._placeholderGroups=(0,s.vM)(t.placeholders,u.Vm.compareByIndex),this._placeholderGroupsIdx=-1}dispose(){this._placeholderDecorations&&this._editor.deltaDecorations([...this._placeholderDecorations.values()],[]),this._placeholderGroups.length=0}_initDecorations(){if(this._placeholderDecorations)return;this._placeholderDecorations=new Map;const e=this._editor.getModel();this._editor.changeDecorations((t=>{for(const i of this._snippet.placeholders){const s=this._snippet.offset(i),n=this._snippet.fullLen(i),o=a.e.fromPositions(e.getPositionAt(this._offset+s),e.getPositionAt(this._offset+s+n)),r=i.isFinalTabstop?L._decor.inactiveFinal:L._decor.inactive,l=t.addDecoration(o,r);this._placeholderDecorations.set(i,l)}}))}move(e){if(!this._editor.hasModel())return[];if(this._initDecorations(),this._placeholderGroupsIdx>=0){let e=[];for(const t of this._placeholderGroups[this._placeholderGroupsIdx])if(t.transform){const i=this._placeholderDecorations.get(t),s=this._editor.getModel().getDecorationRange(i),n=this._editor.getModel().getValueInRange(s),o=t.transform.resolve(n).split(/\r\n|\r|\n/);for(let e=1;e<o.length;e++)o[e]=this._editor.getModel().normalizeIndentation(this._snippetLineLeadingWhitespace+o[e]);e.push(r.h.replace(s,o.join(this._editor.getModel().getEOL())))}e.length>0&&this._editor.executeEdits("snippet.placeholderTransform",e)}let t=!1;!0===e&&this._placeholderGroupsIdx<this._placeholderGroups.length-1?(this._placeholderGroupsIdx+=1,t=!0):!1===e&&this._placeholderGroupsIdx>0&&(this._placeholderGroupsIdx-=1,t=!0);const i=this._editor.getModel().changeDecorations((e=>{const i=new Set,s=[];for(const n of this._placeholderGroups[this._placeholderGroupsIdx]){const o=this._placeholderDecorations.get(n),r=this._editor.getModel().getDecorationRange(o);s.push(new l.Y(r.startLineNumber,r.startColumn,r.endLineNumber,r.endColumn)),t=t&&this._hasPlaceholderBeenCollapsed(n),e.changeDecorationOptions(o,n.isFinalTabstop?L._decor.activeFinal:L._decor.active),i.add(n);for(const t of this._snippet.enclosingPlaceholders(n)){const s=this._placeholderDecorations.get(t);e.changeDecorationOptions(s,t.isFinalTabstop?L._decor.activeFinal:L._decor.active),i.add(t)}}for(const[t,s]of this._placeholderDecorations)i.has(t)||e.changeDecorationOptions(s,t.isFinalTabstop?L._decor.inactiveFinal:L._decor.inactive);return s}));return t?this.move(e):null!=i?i:[]}_hasPlaceholderBeenCollapsed(e){let t=e;for(;t;){if(t instanceof u.Vm){const e=this._placeholderDecorations.get(t);if(this._editor.getModel().getDecorationRange(e).isEmpty()&&t.toString().length>0)return!0}t=t.parent}return!1}get isAtFirstPlaceholder(){return this._placeholderGroupsIdx<=0||0===this._placeholderGroups.length}get isAtLastPlaceholder(){return this._placeholderGroupsIdx===this._placeholderGroups.length-1}get hasPlaceholder(){return this._snippet.placeholders.length>0}computePossibleSelections(){const e=new Map;for(const t of this._placeholderGroups){let i;for(const s of t){if(s.isFinalTabstop)break;i||(i=[],e.set(s.index,i));const t=this._placeholderDecorations.get(s),n=this._editor.getModel().getDecorationRange(t);if(!n){e.delete(s.index);break}i.push(n)}}return e}get choice(){return this._placeholderGroups[this._placeholderGroupsIdx][0].choice}merge(e){const t=this._editor.getModel();this._nestingLevel*=10,this._editor.changeDecorations((i=>{for(const s of this._placeholderGroups[this._placeholderGroupsIdx]){const n=e.shift();console.assert(!n._placeholderDecorations);const o=n._snippet.placeholderInfo.last.index;for(const e of n._snippet.placeholderInfo.all)e.isFinalTabstop?e.index=s.index+(o+1)/this._nestingLevel:e.index=s.index+e.index/this._nestingLevel;this._snippet.replace(s,n._snippet.children);const r=this._placeholderDecorations.get(s);i.removeDecoration(r),this._placeholderDecorations.delete(s);for(const e of n._snippet.placeholders){const s=n._snippet.offset(e),o=n._snippet.fullLen(e),r=a.e.fromPositions(t.getPositionAt(n._offset+s),t.getPositionAt(n._offset+s+o)),l=i.addDecoration(r,L._decor.inactive);this._placeholderDecorations.set(e,l)}}this._placeholderGroups=(0,s.vM)(this._snippet.placeholders,u.Vm.compareByIndex)}))}}L._decor={active:h.qx.register({description:"snippet-placeholder-1",stickiness:0,className:"snippet-placeholder"}),inactive:h.qx.register({description:"snippet-placeholder-2",stickiness:1,className:"snippet-placeholder"}),activeFinal:h.qx.register({description:"snippet-placeholder-3",stickiness:1,className:"finish-snippet-placeholder"}),inactiveFinal:h.qx.register({description:"snippet-placeholder-4",stickiness:1,className:"finish-snippet-placeholder"})};const T={overwriteBefore:0,overwriteAfter:0,adjustWhitespace:!0,clipboardText:void 0,overtypingCapturer:void 0};class D{constructor(e,t,i=T){this._templateMerges=[],this._snippets=[],this._editor=e,this._template=t,this._options=i}static adjustWhitespace(e,t,i,s,n){const r=e.getLineContent(t.lineNumber),a=(0,o.V8)(r,0,t.column-1);let l;return i.walk((t=>{if(!(t instanceof u.xv)||t.parent instanceof u.Lv)return!0;const n=t.value.split(/\r\n|\r|\n/);if(s){const s=i.offset(t);if(0===s)n[0]=e.normalizeIndentation(n[0]);else{l=null!=l?l:i.toString();let t=l.charCodeAt(s-1);10!==t&&13!==t||(n[0]=e.normalizeIndentation(a+n[0]))}for(let t=1;t<n.length;t++)n[t]=e.normalizeIndentation(a+n[t])}const o=n.join(e.getEOL());return o!==t.value&&(t.parent.replace(t,[new u.xv(o)]),l=void 0),!0})),a}static adjustSelection(e,t,i,s){if(0!==i||0!==s){const{positionLineNumber:n,positionColumn:o}=t,r=o-i,a=o+s,h=e.validateRange({startLineNumber:n,startColumn:r,endLineNumber:n,endColumn:a});t=l.Y.createWithDirection(h.startLineNumber,h.startColumn,h.endLineNumber,h.endColumn,t.getDirection())}return t}static createEditsAndSnippets(e,t,i,s,n,o,l,h){const p=[],g=[];if(!e.hasModel())return{edits:p,snippets:g};const _=e.getModel(),m=e.invokeWithinContext((e=>e.get(c.ec,d.jt))),f=e.invokeWithinContext((e=>new w(e.get(E.e,d.jt),_))),v=()=>l;let S=0,R=_.getValueInRange(D.adjustSelection(_,e.getSelection(),i,0)),P=_.getValueInRange(D.adjustSelection(_,e.getSelection(),0,s)),T=_.getLineFirstNonWhitespaceColumn(e.getSelection().positionLineNumber);const M=e.getSelections().map(((e,t)=>({selection:e,idx:t}))).sort(((e,t)=>a.e.compareRangesUsingStarts(e.selection,t.selection)));for(const{selection:a,idx:l}of M){let c=D.adjustSelection(_,a,i,0),d=D.adjustSelection(_,a,0,s);R!==_.getValueInRange(c)&&(c=a),P!==_.getValueInRange(d)&&(d=a);const w=a.setStartPosition(c.startLineNumber,c.startColumn).setEndPosition(d.endLineNumber,d.endColumn),E=(new u.Yj).parse(t,!0,n),A=w.getStartPosition(),O=D.adjustWhitespace(_,A,E,o||l>0&&T!==_.getLineFirstNonWhitespaceColumn(a.positionLineNumber),!0);E.resolveVariables(new b([f,new C(v,l,M.length,"spread"===e.getOption(69)),new y(_,a,l,h),new x(_,a),new N,new k(m),new I]));const F=_.getOffsetAt(A)+S;S+=E.toString().length-_.getValueLengthInRange(w),p[l]=r.h.replace(w,E.toString()),p[l].identifier={major:l,minor:0},g[l]=new L(e,E,F,O)}return{edits:p,snippets:g}}dispose(){(0,n.B9)(this._snippets)}_logInfo(){return`template="${this._template}", merged_templates="${this._templateMerges.join(" -> ")}"`}insert(){if(!this._editor.hasModel())return;const{edits:e,snippets:t}=D.createEditsAndSnippets(this._editor,this._template,this._options.overwriteBefore,this._options.overwriteAfter,!1,this._options.adjustWhitespace,this._options.clipboardText,this._options.overtypingCapturer);this._snippets=t,this._editor.executeEdits("snippet",e,(e=>this._snippets[0].hasPlaceholder?this._move(!0):e.filter((e=>!!e.identifier)).map((e=>l.Y.fromPositions(e.range.getEndPosition()))))),this._editor.revealRange(this._editor.getSelections()[0])}merge(e,t=T){if(!this._editor.hasModel())return;this._templateMerges.push([this._snippets[0]._nestingLevel,this._snippets[0]._placeholderGroupsIdx,e]);const{edits:i,snippets:s}=D.createEditsAndSnippets(this._editor,e,t.overwriteBefore,t.overwriteAfter,!0,t.adjustWhitespace,t.clipboardText,t.overtypingCapturer);this._editor.executeEdits("snippet",i,(e=>{for(const e of this._snippets)e.merge(s);return console.assert(0===s.length),this._snippets[0].hasPlaceholder?this._move(void 0):e.filter((e=>!!e.identifier)).map((e=>l.Y.fromPositions(e.range.getEndPosition())))}))}next(){const e=this._move(!0);this._editor.setSelections(e),this._editor.revealPositionInCenterIfOutsideViewport(e[0].getPosition())}prev(){const e=this._move(!1);this._editor.setSelections(e),this._editor.revealPositionInCenterIfOutsideViewport(e[0].getPosition())}_move(e){const t=[];for(const i of this._snippets){const s=i.move(e);t.push(...s)}return t}get isAtFirstPlaceholder(){return this._snippets[0].isAtFirstPlaceholder}get isAtLastPlaceholder(){return this._snippets[0].isAtLastPlaceholder}get hasPlaceholder(){return this._snippets[0].hasPlaceholder}get choice(){return this._snippets[0].choice}isSelectionWithinPlaceholders(){if(!this.hasPlaceholder)return!1;const e=this._editor.getSelections();if(e.length<this._snippets.length)return!1;let t=new Map;for(const i of this._snippets){const s=i.computePossibleSelections();if(0===t.size)for(const[i,n]of s){n.sort(a.e.compareRangesUsingStarts);for(const s of e)if(n[0].containsRange(s)){t.set(i,[]);break}}if(0===t.size)return!1;t.forEach(((e,t)=>{e.push(...s.get(t))}))}e.sort(a.e.compareRangesUsingStarts);for(let[i,s]of t)if(s.length===e.length){s.sort(a.e.compareRangesUsingStarts);for(let n=0;n<s.length;n++)s[n].containsRange(e[n])||t.delete(i)}else t.delete(i);return t.size>0}}},32946:function(e,t,i){i.d(t,{_:function(){return r}});var s=i(75392),n=i(97295),o=i(9488);class r{constructor(e,t,i,s,n,o,a){this.clipboardText=a,this._snippetCompareFn=r._compareCompletionItems,this._items=e,this._column=t,this._wordDistance=s,this._options=n,this._refilterKind=1,this._lineContext=i,"top"===o?this._snippetCompareFn=r._compareCompletionItemsSnippetsUp:"bottom"===o&&(this._snippetCompareFn=r._compareCompletionItemsSnippetsDown)}get lineContext(){return this._lineContext}set lineContext(e){this._lineContext.leadingLineContent===e.leadingLineContent&&this._lineContext.characterCountDelta===e.characterCountDelta||(this._refilterKind=this._lineContext.characterCountDelta<e.characterCountDelta&&this._filteredItems?2:1,this._lineContext=e)}get items(){return this._ensureCachedState(),this._filteredItems}get allProvider(){return this._ensureCachedState(),this._providerInfo.keys()}get incomplete(){this._ensureCachedState();const e=new Set;for(let[t,i]of this._providerInfo)i&&e.add(t);return e}adopt(e){let t=[];for(let i=0;i<this._items.length;)e.has(this._items[i].provider)?i++:(t.push(this._items[i]),this._items[i]=this._items[this._items.length-1],this._items.pop());return this._refilterKind=1,t}get stats(){return this._ensureCachedState(),this._stats}_ensureCachedState(){0!==this._refilterKind&&this._createCachedState()}_createCachedState(){this._providerInfo=new Map;const e=[],{leadingLineContent:t,characterCountDelta:i}=this._lineContext;let r="",a="";const l=1===this._refilterKind?this._items:this._filteredItems,h=[],c=!this._options.filterGraceful||l.length>2e3?s.EW:s.l7;for(let o=0;o<l.length;o++){const d=l[o];if(d.isInvalid)continue;this._providerInfo.set(d.provider,Boolean(d.container.incomplete));const u=d.position.column-d.editStart.column,p=u+i-(d.position.column-this._column);if(r.length!==p&&(r=0===p?"":t.slice(-p),a=r.toLowerCase()),d.word=r,0===p)d.score=s.CL.Default;else{let e=0;for(;e<u;){const t=r.charCodeAt(e);if(32!==t&&9!==t)break;e+=1}if(e>=p)d.score=s.CL.Default;else if("string"==typeof d.completion.filterText){let t=c(r,a,e,d.completion.filterText,d.filterTextLow,0,!1);if(!t)continue;0===(0,n.zY)(d.completion.filterText,d.textLabel)?d.score=t:(d.score=(0,s.jB)(r,a,e,d.textLabel,d.labelLow,0),d.score[0]=t[0])}else{let t=c(r,a,e,d.textLabel,d.labelLow,0,!1);if(!t)continue;d.score=t}}d.idx=o,d.distance=this._wordDistance.distance(d.position,d.completion),h.push(d),e.push(d.textLabel.length)}this._filteredItems=h.sort(this._snippetCompareFn),this._refilterKind=0,this._stats={pLabelLen:e.length?(0,o.HW)(e.length-.85,e,((e,t)=>e-t)):0}}static _compareCompletionItems(e,t){return e.score[0]>t.score[0]?-1:e.score[0]<t.score[0]?1:e.distance<t.distance?-1:e.distance>t.distance?1:e.idx<t.idx?-1:e.idx>t.idx?1:0}static _compareCompletionItemsSnippetsDown(e,t){if(e.completion.kind!==t.completion.kind){if(27===e.completion.kind)return 1;if(27===t.completion.kind)return-1}return r._compareCompletionItems(e,t)}static _compareCompletionItemsSnippetsUp(e,t){if(e.completion.kind!==t.completion.kind){if(27===e.completion.kind)return-1;if(27===t.completion.kind)return 1}return r._compareCompletionItems(e,t)}}},27791:function(e,t,i){i.d(t,{f:function(){return a}});var s=i(4669),n=i(5976),o=i(65321),r=i(73098);class a{constructor(){let e;this._onDidWillResize=new s.Q5,this.onDidWillResize=this._onDidWillResize.event,this._onDidResize=new s.Q5,this.onDidResize=this._onDidResize.event,this._sashListener=new n.SL,this._size=new o.Ro(0,0),this._minSize=new o.Ro(0,0),this._maxSize=new o.Ro(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER),this.domNode=document.createElement("div"),this._eastSash=new r.g(this.domNode,{getVerticalSashLeft:()=>this._size.width},{orientation:0}),this._westSash=new r.g(this.domNode,{getVerticalSashLeft:()=>0},{orientation:0}),this._northSash=new r.g(this.domNode,{getHorizontalSashTop:()=>0},{orientation:1,orthogonalEdge:r.l.North}),this._southSash=new r.g(this.domNode,{getHorizontalSashTop:()=>this._size.height},{orientation:1,orthogonalEdge:r.l.South}),this._northSash.orthogonalStartSash=this._westSash,this._northSash.orthogonalEndSash=this._eastSash,this._southSash.orthogonalStartSash=this._westSash,this._southSash.orthogonalEndSash=this._eastSash;let t=0,i=0;this._sashListener.add(s.ju.any(this._northSash.onDidStart,this._eastSash.onDidStart,this._southSash.onDidStart,this._westSash.onDidStart)((()=>{void 0===e&&(this._onDidWillResize.fire(),e=this._size,t=0,i=0)}))),this._sashListener.add(s.ju.any(this._northSash.onDidEnd,this._eastSash.onDidEnd,this._southSash.onDidEnd,this._westSash.onDidEnd)((()=>{void 0!==e&&(e=void 0,t=0,i=0,this._onDidResize.fire({dimension:this._size,done:!0}))}))),this._sashListener.add(this._eastSash.onDidChange((s=>{e&&(i=s.currentX-s.startX,this.layout(e.height+t,e.width+i),this._onDidResize.fire({dimension:this._size,done:!1,east:!0}))}))),this._sashListener.add(this._westSash.onDidChange((s=>{e&&(i=-(s.currentX-s.startX),this.layout(e.height+t,e.width+i),this._onDidResize.fire({dimension:this._size,done:!1,west:!0}))}))),this._sashListener.add(this._northSash.onDidChange((s=>{e&&(t=-(s.currentY-s.startY),this.layout(e.height+t,e.width+i),this._onDidResize.fire({dimension:this._size,done:!1,north:!0}))}))),this._sashListener.add(this._southSash.onDidChange((s=>{e&&(t=s.currentY-s.startY,this.layout(e.height+t,e.width+i),this._onDidResize.fire({dimension:this._size,done:!1,south:!0}))}))),this._sashListener.add(s.ju.any(this._eastSash.onDidReset,this._westSash.onDidReset)((e=>{this._preferredSize&&(this.layout(this._size.height,this._preferredSize.width),this._onDidResize.fire({dimension:this._size,done:!0}))}))),this._sashListener.add(s.ju.any(this._northSash.onDidReset,this._southSash.onDidReset)((e=>{this._preferredSize&&(this.layout(this._preferredSize.height,this._size.width),this._onDidResize.fire({dimension:this._size,done:!0}))})))}dispose(){this._northSash.dispose(),this._southSash.dispose(),this._eastSash.dispose(),this._westSash.dispose(),this._sashListener.dispose(),this._onDidResize.dispose(),this._onDidWillResize.dispose(),this.domNode.remove()}enableSashes(e,t,i,s){this._northSash.state=e?3:0,this._eastSash.state=t?3:0,this._southSash.state=i?3:0,this._westSash.state=s?3:0}layout(e=this.size.height,t=this.size.width){const{height:i,width:s}=this._minSize,{height:n,width:r}=this._maxSize;e=Math.max(i,Math.min(n,e)),t=Math.max(s,Math.min(r,t));const a=new o.Ro(t,e);o.Ro.equals(a,this._size)||(this.domNode.style.height=e+"px",this.domNode.style.width=t+"px",this._size=a,this._northSash.layout(),this._eastSash.layout(),this._southSash.layout(),this._westSash.layout())}clearSashHoverState(){this._eastSash.clearSashHoverState(),this._westSash.clearSashHoverState(),this._northSash.clearSashHoverState(),this._southSash.clearSashHoverState()}get size(){return this._size}set maxSize(e){this._maxSize=e}get maxSize(){return this._maxSize}set minSize(e){this._minSize=e}get minSize(){return this._minSize}set preferredSize(e){this._preferredSize=e}get preferredSize(){return this._preferredSize}}},68261:function(e,t,i){i.r(t),i.d(t,{SuggestController:function(){return ee},TriggerSuggestAction:function(){return te}});var s=i(85152),n=i(9488),o=i(17301),r=i(22258),a=i(5976),l=i(39925),h=i(16830),c=i(69386),d=i(24314),u=i(29102),p=i(93379),g=i(63472),_=i(43702),m=i(52365),f=i(44101),v=i(15393),S=i(72065),b=i(33108),y=i(65026),w=i(71531),C=function(e,t,i,s){var n,o=arguments.length,r=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(o<3?n(r):o>3?n(t,i,r):n(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r},x=function(e,t){return function(i,s){t(i,s,e)}};class N{constructor(e){this.name=e}select(e,t,i){if(0===i.length)return 0;let s=i[0].score[0];for(let e=0;e<i.length;e++){const{score:t,completion:n}=i[e];if(t[0]!==s)break;if(n.preselect)return e}return 0}}class k extends N{constructor(){super("first")}memorize(e,t,i){}toJSON(){}fromJSON(){}}let I=class e{constructor(e,t,i){this._storageService=e,this._modeService=t,this._configService=i,this._disposables=new a.SL,this._persistSoon=new v.pY((()=>this._saveState()),500),this._disposables.add(e.onWillSaveState((e=>{e.reason===m.fk.SHUTDOWN&&this._saveState()})))}dispose(){this._disposables.dispose(),this._persistSoon.dispose()}memorize(e,t,i){this._withStrategy(e,t).memorize(e,t,i),this._persistSoon.schedule()}select(e,t,i){return this._withStrategy(e,t).select(e,t,i)}_withStrategy(t,i){var s,n;const o=this._configService.getValue("editor.suggestSelection",{overrideIdentifier:null===(s=this._modeService.getLanguageIdentifier(t.getLanguageIdAtPosition(i.lineNumber,i.column)))||void 0===s?void 0:s.language,resource:t.uri});if((null===(n=this._strategy)||void 0===n?void 0:n.name)!==o){this._saveState();const t=e._strategyCtors.get(o)||k;this._strategy=new t;try{const t=this._configService.getValue("editor.suggest.shareSuggestSelections")?0:1,i=this._storageService.get(`${e._storagePrefix}/${o}`,t);i&&this._strategy.fromJSON(JSON.parse(i))}catch(e){}}return this._strategy}_saveState(){if(this._strategy){const t=this._configService.getValue("editor.suggest.shareSuggestSelections")?0:1,i=JSON.stringify(this._strategy);this._storageService.store(`${e._storagePrefix}/${this._strategy.name}`,i,t,1)}}};I._strategyCtors=new Map([["recentlyUsedByPrefix",class extends N{constructor(){super("recentlyUsedByPrefix"),this._trie=_.Id.forStrings(),this._seq=0}memorize(e,t,i){const{word:s}=e.getWordUntilPosition(t),n=`${e.getLanguageIdentifier().language}/${s}`;this._trie.set(n,{type:i.completion.kind,insertText:i.completion.insertText,touch:this._seq++})}select(e,t,i){let{word:s}=e.getWordUntilPosition(t);if(!s)return super.select(e,t,i);let n=`${e.getLanguageIdentifier().language}/${s}`,o=this._trie.get(n);if(o||(o=this._trie.findSubstr(n)),o)for(let e=0;e<i.length;e++){let{kind:t,insertText:s}=i[e].completion;if(t===o.type&&s===o.insertText)return e}return super.select(e,t,i)}toJSON(){let e=[];return this._trie.forEach(((t,i)=>e.push([i,t]))),e.sort(((e,t)=>-(e[1].touch-t[1].touch))).forEach(((e,t)=>e[1].touch=t)),e.slice(0,200)}fromJSON(e){if(this._trie.clear(),e.length>0){this._seq=e[0][1].touch+1;for(const[t,i]of e)i.type="number"==typeof i.type?i.type:(0,f.jr)(i.type),this._trie.set(t,i)}}}],["recentlyUsed",class extends N{constructor(){super("recentlyUsed"),this._cache=new _.z6(300,.66),this._seq=0}memorize(e,t,i){const s=`${e.getLanguageIdentifier().language}/${i.textLabel}`;this._cache.set(s,{touch:this._seq++,type:i.completion.kind,insertText:i.completion.insertText})}select(e,t,i){if(0===i.length)return 0;const s=e.getLineContent(t.lineNumber).substr(t.column-10,t.column-1);if(/\s$/.test(s))return super.select(e,t,i);let n=i[0].score[0],o=-1,r=-1,a=-1;for(let t=0;t<i.length&&i[t].score[0]===n;t++){const s=`${e.getLanguageIdentifier().language}/${i[t].textLabel}`,n=this._cache.peek(s);if(n&&n.touch>a&&n.type===i[t].completion.kind&&n.insertText===i[t].completion.insertText&&(a=n.touch,r=t),i[t].completion.preselect&&-1===o)return t}return-1!==r?r:-1!==o?o:0}toJSON(){return this._cache.toJSON()}fromJSON(e){this._cache.clear();for(const[t,i]of e)i.touch=0,i.type="number"==typeof i.type?i.type:(0,f.jr)(i.type),this._cache.set(t,i);this._seq=this._cache.size}}],["first",k]]),I._storagePrefix="suggest/memories",I=C([x(0,m.Uy),x(1,w.h),x(2,b.Ui)],I);const R=(0,S.yh)("ISuggestMemories");(0,y.z)(R,I,!0);var P=i(63580),E=i(94565),L=i(38819),T=i(49989),D=i(79599),M=function(e,t,i,s){var n,o=arguments.length,r=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(o<3?n(r):o>3?n(t,i,r):n(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r},A=function(e,t){return function(i,s){t(i,s,e)}};let O=class e{constructor(t,i){this._editor=t,this._index=0,this._ckOtherSuggestions=e.OtherSuggestions.bindTo(i)}dispose(){this.reset()}reset(){var e;this._ckOtherSuggestions.reset(),null===(e=this._listener)||void 0===e||e.dispose(),this._model=void 0,this._acceptNext=void 0,this._ignore=!1}set({model:t,index:i},s){if(0===t.items.length)return void this.reset();e._moveIndex(!0,t,i)!==i?(this._acceptNext=s,this._model=t,this._index=i,this._listener=this._editor.onDidChangeCursorPosition((()=>{this._ignore||this.reset()})),this._ckOtherSuggestions.set(!0)):this.reset()}static _moveIndex(e,t,i){let s=i;for(;s=(s+t.items.length+(e?1:-1))%t.items.length,s!==i&&t.items[s].completion.additionalTextEdits;);return s}next(){this._move(!0)}prev(){this._move(!1)}_move(t){if(this._model)try{this._ignore=!0,this._index=e._moveIndex(t,this._model,this._index),this._acceptNext({index:this._index,item:this._model.items[this._index],model:this._model})}finally{this._ignore=!1}}};O.OtherSuggestions=new L.uy("hasOtherSuggestions",!1),O=M([A(1,L.i6)],O);var F=i(69056),V=i(97601),W=i(50555),B=i(4669),H=i(98401),z=i(44906);class j{constructor(e,t,i){this._disposables=new a.SL,this._disposables.add(t.onDidShow((()=>this._onItem(t.getFocusedItem())))),this._disposables.add(t.onDidFocus(this._onItem,this)),this._disposables.add(t.onDidHide(this.reset,this)),this._disposables.add(e.onWillType((s=>{if(this._active&&!t.isFrozen()){const t=s.charCodeAt(s.length-1);this._active.acceptCharacters.has(t)&&e.getOption(0)&&i(this._active.item)}})))}_onItem(e){if(!e||!(0,n.Of)(e.item.completion.commitCharacters))return void this.reset();if(this._active&&this._active.item.item===e.item)return;const t=new z.q;for(const i of e.item.completion.commitCharacters)i.length>0&&t.add(i.charCodeAt(0));this._active={acceptCharacters:t,item:e}}reset(){this._active=void 0}dispose(){this._disposables.dispose()}}var K=i(25108),U=i(50187),$=i(1432),G=i(84144),q=i(71050),J=i(43557),Y=i(84013),X=function(e,t,i,s){var n,o=arguments.length,r=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(o<3?n(r):o>3?n(t,i,r):n(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r},Z=function(e,t){return function(i,s){t(i,s,e)}};class Q{constructor(e,t){this._model=e,this._position=t;if(e.getLineMaxColumn(t.lineNumber)!==t.column){const i=e.getOffsetAt(t),s=e.getPositionAt(i+1);this._marker=e.deltaDecorations([],[{range:d.e.fromPositions(t,s),options:{description:"suggest-line-suffix",stickiness:1}}])}}dispose(){this._marker&&!this._model.isDisposed()&&this._model.deltaDecorations(this._marker,[])}delta(e){if(this._model.isDisposed()||this._position.lineNumber!==e.lineNumber)return 0;if(this._marker){const t=this._model.getDecorationRange(this._marker[0]);return this._model.getOffsetAt(t.getStartPosition())-this._model.getOffsetAt(e)}return this._model.getLineMaxColumn(e.lineNumber)-e.column}}let ee=class e{constructor(e,t,i,s,n,o){this._memoryService=t,this._commandService=i,this._contextKeyService=s,this._instantiationService=n,this._logService=o,this._lineSuffix=new a.XK,this._toDispose=new a.SL,this.editor=e,this.model=n.createInstance(F.U,this.editor);const l=D._y.InsertMode.bindTo(s);l.set(e.getOption(105).insertMode),this.model.onDidTrigger((()=>l.set(e.getOption(105).insertMode))),this.widget=this._toDispose.add(new v.Ue((()=>{const e=this._instantiationService.createInstance(V.XZ,this.editor);this._toDispose.add(e),this._toDispose.add(e.onDidSelect((e=>this._insertSuggestion(e,0)),this));const t=new j(this.editor,e,(e=>this._insertSuggestion(e,2)));this._toDispose.add(t),this._toDispose.add(this.model.onDidSuggest((e=>{0===e.completionModel.items.length&&t.reset()})));const i=D._y.MakesTextEdit.bindTo(this._contextKeyService),s=D._y.HasInsertAndReplaceRange.bindTo(this._contextKeyService),n=D._y.CanResolve.bindTo(this._contextKeyService);return this._toDispose.add((0,a.OF)((()=>{i.reset(),s.reset(),n.reset()}))),this._toDispose.add(e.onDidFocus((({item:e})=>{const t=this.editor.getPosition(),o=e.editStart.column,r=t.column;let a=!0;if(!("smart"!==this.editor.getOption(1)||2!==this.model.state||e.completion.command||e.completion.additionalTextEdits||4&e.completion.insertTextRules||r-o!==e.completion.insertText.length)){a=this.editor.getModel().getValueInRange({startLineNumber:t.lineNumber,startColumn:o,endLineNumber:t.lineNumber,endColumn:r})!==e.completion.insertText}i.set(a),s.set(!U.L.equals(e.editInsertEnd,e.editReplaceEnd)),n.set(Boolean(e.provider.resolveCompletionItem)||Boolean(e.completion.documentation)||e.completion.detail!==e.completion.label)}))),this._toDispose.add(e.onDetailsKeyDown((e=>{e.toKeybinding().equals(new r.QC(!0,!1,!1,!1,33))||$.dz&&e.toKeybinding().equals(new r.QC(!1,!1,!1,!0,33))?e.stopPropagation():e.toKeybinding().isModifierKey()||this.editor.focus()}))),e}))),this._overtypingCapturer=this._toDispose.add(new v.Ue((()=>this._toDispose.add(new K.K(this.editor,this.model))))),this._alternatives=this._toDispose.add(new v.Ue((()=>this._toDispose.add(new O(this.editor,this._contextKeyService))))),this._toDispose.add(n.createInstance(W.p,e)),this._toDispose.add(this.model.onDidTrigger((e=>{this.widget.value.showTriggered(e.auto,e.shy?250:50),this._lineSuffix.value=new Q(this.editor.getModel(),e.position)}))),this._toDispose.add(this.model.onDidSuggest((e=>{if(!e.shy){let t=this._memoryService.select(this.editor.getModel(),this.editor.getPosition(),e.completionModel.items);this.widget.value.showSuggestions(e.completionModel,t,e.isFrozen,e.auto)}}))),this._toDispose.add(this.model.onDidCancel((e=>{e.retrigger||this.widget.value.hideWidget()}))),this._toDispose.add(this.editor.onDidBlurEditorWidget((()=>{this.model.cancel(),this.model.clear()})));let h=D._y.AcceptSuggestionsOnEnter.bindTo(s),c=()=>{const e=this.editor.getOption(1);h.set("on"===e||"smart"===e)};this._toDispose.add(this.editor.onDidChangeConfiguration((()=>c()))),c()}static get(t){return t.getContribution(e.ID)}dispose(){this._alternatives.dispose(),this._toDispose.dispose(),this.widget.dispose(),this.model.dispose(),this._lineSuffix.dispose()}_insertSuggestion(e,t){if(!e||!e.item)return this._alternatives.value.reset(),this.model.cancel(),void this.model.clear();if(!this.editor.hasModel())return;const i=this.editor.getModel(),s=i.getAlternativeVersionId(),{item:n}=e,r=[],a=new q.A;1&t||this.editor.pushUndoStop();const h=this.getOverwriteInfo(n,Boolean(8&t));if(this._memoryService.memorize(i,this.editor.getPosition(),n),Array.isArray(n.completion.additionalTextEdits)){const e=l.ZF.capture(this.editor);this.editor.executeEdits("suggestController.additionalTextEdits.sync",n.completion.additionalTextEdits.map((e=>c.h.replace(d.e.lift(e.range),e.text)))),e.restoreRelativeVerticalPositionOfCursor(this.editor)}else if(!n.isResolved){const e=new Y.G(!0);let s;const o=i.onDidChangeContent((e=>{if(e.isFlush)return a.cancel(),void o.dispose();for(let t of e.changes){const e=d.e.getEndPosition(t.range);s&&!U.L.isBefore(e,s)||(s=e)}}));let h=t;t|=2;let u=!1,p=this.editor.onWillType((()=>{p.dispose(),u=!0,2&h||this.editor.pushUndoStop()}));r.push(n.resolve(a.token).then((()=>{if(!n.completion.additionalTextEdits||a.token.isCancellationRequested)return!1;if(s&&n.completion.additionalTextEdits.some((e=>U.L.isBefore(s,d.e.getStartPosition(e.range)))))return!1;u&&this.editor.pushUndoStop();const e=l.ZF.capture(this.editor);return this.editor.executeEdits("suggestController.additionalTextEdits.async",n.completion.additionalTextEdits.map((e=>c.h.replace(d.e.lift(e.range),e.text)))),e.restoreRelativeVerticalPositionOfCursor(this.editor),!u&&2&h||this.editor.pushUndoStop(),!0})).then((t=>{this._logService.trace("[suggest] async resolving of edits DONE (ms, applied?)",e.elapsed(),t),o.dispose(),p.dispose()})))}let{insertText:u}=n.completion;4&n.completion.insertTextRules||(u=g.Yj.escape(u)),p.SnippetController2.get(this.editor).insert(u,{overwriteBefore:h.overwriteBefore,overwriteAfter:h.overwriteAfter,undoStopBefore:!1,undoStopAfter:!1,adjustWhitespace:!(1&n.completion.insertTextRules),clipboardText:e.model.clipboardText,overtypingCapturer:this._overtypingCapturer.value}),2&t||this.editor.pushUndoStop(),n.completion.command?n.completion.command.id===te.id?this.model.trigger({auto:!0,shy:!1},!0):(r.push(this._commandService.executeCommand(n.completion.command.id,...n.completion.command.arguments?[...n.completion.command.arguments]:[]).catch(o.dL)),this.model.cancel()):this.model.cancel(),4&t&&this._alternatives.value.set(e,(e=>{for(a.cancel();i.canUndo();){s!==i.getAlternativeVersionId()&&i.undo(),this._insertSuggestion(e,3|(8&t?8:0));break}})),this._alertCompletionItem(n),Promise.all(r).finally((()=>{this.model.clear(),a.dispose()}))}getOverwriteInfo(e,t){(0,H.p_)(this.editor.hasModel());let i="replace"===this.editor.getOption(105).insertMode;t&&(i=!i);const s=e.position.column-e.editStart.column,n=(i?e.editReplaceEnd.column:e.editInsertEnd.column)-e.position.column;return{overwriteBefore:s+(this.editor.getPosition().column-e.position.column),overwriteAfter:n+(this._lineSuffix.value?this._lineSuffix.value.delta(this.editor.getPosition()):0)}}_alertCompletionItem(e){if((0,n.Of)(e.completion.additionalTextEdits)){let t=P.N("aria.alert.snippet","Accepting '{0}' made {1} additional edits",e.textLabel,e.completion.additionalTextEdits.length);(0,s.Z9)(t)}}triggerSuggest(e){this.editor.hasModel()&&(this.model.trigger({auto:!1,shy:!1},!1,e),this.editor.revealLine(this.editor.getPosition().lineNumber,0),this.editor.focus())}triggerSuggestAndAcceptBest(e){if(!this.editor.hasModel())return;const t=this.editor.getPosition(),i=()=>{t.equals(this.editor.getPosition())&&this._commandService.executeCommand(e.fallback)},s=e=>{if(4&e.completion.insertTextRules||e.completion.additionalTextEdits)return!0;const t=this.editor.getPosition(),i=e.editStart.column,s=t.column;if(s-i!==e.completion.insertText.length)return!0;return this.editor.getModel().getValueInRange({startLineNumber:t.lineNumber,startColumn:i,endLineNumber:t.lineNumber,endColumn:s})!==e.completion.insertText};B.ju.once(this.model.onDidTrigger)((e=>{let t=[];B.ju.any(this.model.onDidTrigger,this.model.onDidCancel)((()=>{(0,a.B9)(t),i()}),void 0,t),this.model.onDidSuggest((({completionModel:e})=>{if((0,a.B9)(t),0===e.items.length)return void i();const n=this._memoryService.select(this.editor.getModel(),this.editor.getPosition(),e.items),o=e.items[n];s(o)?(this.editor.pushUndoStop(),this._insertSuggestion({index:n,item:o,model:e},7)):i()}),void 0,t)})),this.model.trigger({auto:!1,shy:!0}),this.editor.revealLine(t.lineNumber,0),this.editor.focus()}acceptSelectedSuggestion(e,t){const i=this.widget.value.getFocusedItem();let s=0;e&&(s|=4),t&&(s|=8),this._insertSuggestion(i,s)}acceptNextSuggestion(){this._alternatives.value.next()}acceptPrevSuggestion(){this._alternatives.value.prev()}cancelSuggestWidget(){this.model.cancel(),this.model.clear(),this.widget.value.hideWidget()}selectNextSuggestion(){this.widget.value.selectNext()}selectNextPageSuggestion(){this.widget.value.selectNextPage()}selectLastSuggestion(){this.widget.value.selectLast()}selectPrevSuggestion(){this.widget.value.selectPrevious()}selectPrevPageSuggestion(){this.widget.value.selectPreviousPage()}selectFirstSuggestion(){this.widget.value.selectFirst()}toggleSuggestionDetails(){this.widget.value.toggleDetails()}toggleExplainMode(){this.widget.value.toggleExplainMode()}toggleSuggestionFocus(){this.widget.value.toggleDetailsFocus()}resetWidgetSize(){this.widget.value.resetPersistedSize()}forceRenderingAbove(){this.widget.value.forceRenderingAbove()}stopForceRenderingAbove(){this.widget.value.stopForceRenderingAbove()}};ee.ID="editor.contrib.suggestController",ee=X([Z(1,R),Z(2,E.H),Z(3,L.i6),Z(4,S.TG),Z(5,J.VZ)],ee);class te extends h.R6{constructor(){super({id:te.id,label:P.N("suggest.trigger.label","Trigger Suggest"),alias:"Trigger Suggest",precondition:L.Ao.and(u.u.writable,u.u.hasCompletionItemProvider),kbOpts:{kbExpr:u.u.textInputFocus,primary:2058,secondary:[2087],mac:{primary:266,secondary:[521,2087]},weight:100}})}run(e,t){const i=ee.get(t);i&&i.triggerSuggest()}}te.id="editor.action.triggerSuggest",(0,h._K)(ee.ID,ee),(0,h.Qr)(te);const ie=190,se=h._l.bindToContribution(ee.get);(0,h.fK)(new se({id:"acceptSelectedSuggestion",precondition:D._y.Visible,handler(e){e.acceptSelectedSuggestion(!0,!1)}})),T.W.registerKeybindingRule({id:"acceptSelectedSuggestion",when:L.Ao.and(D._y.Visible,u.u.textInputFocus),primary:2,weight:ie}),T.W.registerKeybindingRule({id:"acceptSelectedSuggestion",when:L.Ao.and(D._y.Visible,u.u.textInputFocus,D._y.AcceptSuggestionsOnEnter,D._y.MakesTextEdit),primary:3,weight:ie}),G.BH.appendMenuItem(D.GI,{command:{id:"acceptSelectedSuggestion",title:P.N("accept.insert","Insert")},group:"left",order:1,when:D._y.HasInsertAndReplaceRange.toNegated()}),G.BH.appendMenuItem(D.GI,{command:{id:"acceptSelectedSuggestion",title:P.N("accept.insert","Insert")},group:"left",order:1,when:L.Ao.and(D._y.HasInsertAndReplaceRange,D._y.InsertMode.isEqualTo("insert"))}),G.BH.appendMenuItem(D.GI,{command:{id:"acceptSelectedSuggestion",title:P.N("accept.replace","Replace")},group:"left",order:1,when:L.Ao.and(D._y.HasInsertAndReplaceRange,D._y.InsertMode.isEqualTo("replace"))}),(0,h.fK)(new se({id:"acceptAlternativeSelectedSuggestion",precondition:L.Ao.and(D._y.Visible,u.u.textInputFocus),kbOpts:{weight:ie,kbExpr:u.u.textInputFocus,primary:1027,secondary:[1026]},handler(e){e.acceptSelectedSuggestion(!1,!0)},menuOpts:[{menuId:D.GI,group:"left",order:2,when:L.Ao.and(D._y.HasInsertAndReplaceRange,D._y.InsertMode.isEqualTo("insert")),title:P.N("accept.replace","Replace")},{menuId:D.GI,group:"left",order:2,when:L.Ao.and(D._y.HasInsertAndReplaceRange,D._y.InsertMode.isEqualTo("replace")),title:P.N("accept.insert","Insert")}]})),E.P.registerCommandAlias("acceptSelectedSuggestionOnEnter","acceptSelectedSuggestion"),(0,h.fK)(new se({id:"hideSuggestWidget",precondition:D._y.Visible,handler:e=>e.cancelSuggestWidget(),kbOpts:{weight:ie,kbExpr:u.u.textInputFocus,primary:9,secondary:[1033]}})),(0,h.fK)(new se({id:"selectNextSuggestion",precondition:L.Ao.and(D._y.Visible,D._y.MultipleSuggestions),handler:e=>e.selectNextSuggestion(),kbOpts:{weight:ie,kbExpr:u.u.textInputFocus,primary:18,secondary:[2066],mac:{primary:18,secondary:[2066,300]}}})),(0,h.fK)(new se({id:"selectNextPageSuggestion",precondition:L.Ao.and(D._y.Visible,D._y.MultipleSuggestions),handler:e=>e.selectNextPageSuggestion(),kbOpts:{weight:ie,kbExpr:u.u.textInputFocus,primary:12,secondary:[2060]}})),(0,h.fK)(new se({id:"selectLastSuggestion",precondition:L.Ao.and(D._y.Visible,D._y.MultipleSuggestions),handler:e=>e.selectLastSuggestion()})),(0,h.fK)(new se({id:"selectPrevSuggestion",precondition:L.Ao.and(D._y.Visible,D._y.MultipleSuggestions),handler:e=>e.selectPrevSuggestion(),kbOpts:{weight:ie,kbExpr:u.u.textInputFocus,primary:16,secondary:[2064],mac:{primary:16,secondary:[2064,302]}}})),(0,h.fK)(new se({id:"selectPrevPageSuggestion",precondition:L.Ao.and(D._y.Visible,D._y.MultipleSuggestions),handler:e=>e.selectPrevPageSuggestion(),kbOpts:{weight:ie,kbExpr:u.u.textInputFocus,primary:11,secondary:[2059]}})),(0,h.fK)(new se({id:"selectFirstSuggestion",precondition:L.Ao.and(D._y.Visible,D._y.MultipleSuggestions),handler:e=>e.selectFirstSuggestion()})),(0,h.fK)(new se({id:"toggleSuggestionDetails",precondition:D._y.Visible,handler:e=>e.toggleSuggestionDetails(),kbOpts:{weight:ie,kbExpr:u.u.textInputFocus,primary:2058,mac:{primary:266}},menuOpts:[{menuId:D.GI,group:"right",order:1,when:L.Ao.and(D._y.DetailsVisible,D._y.CanResolve),title:P.N("detail.more","show less")},{menuId:D.GI,group:"right",order:1,when:L.Ao.and(D._y.DetailsVisible.toNegated(),D._y.CanResolve),title:P.N("detail.less","show more")}]})),(0,h.fK)(new se({id:"toggleExplainMode",precondition:D._y.Visible,handler:e=>e.toggleExplainMode(),kbOpts:{weight:100,primary:2133}})),(0,h.fK)(new se({id:"toggleSuggestionFocus",precondition:D._y.Visible,handler:e=>e.toggleSuggestionFocus(),kbOpts:{weight:ie,kbExpr:u.u.textInputFocus,primary:2570,mac:{primary:778}}})),(0,h.fK)(new se({id:"insertBestCompletion",precondition:L.Ao.and(u.u.textInputFocus,L.Ao.equals("config.editor.tabCompletion","on"),W.p.AtEnd,D._y.Visible.toNegated(),O.OtherSuggestions.toNegated(),p.SnippetController2.InSnippetMode.toNegated()),handler:(e,t)=>{e.triggerSuggestAndAcceptBest((0,H.Kn)(t)?Object.assign({fallback:"tab"},t):{fallback:"tab"})},kbOpts:{weight:ie,primary:2}})),(0,h.fK)(new se({id:"insertNextSuggestion",precondition:L.Ao.and(u.u.textInputFocus,L.Ao.equals("config.editor.tabCompletion","on"),O.OtherSuggestions,D._y.Visible.toNegated(),p.SnippetController2.InSnippetMode.toNegated()),handler:e=>e.acceptNextSuggestion(),kbOpts:{weight:ie,kbExpr:u.u.textInputFocus,primary:2}})),(0,h.fK)(new se({id:"insertPrevSuggestion",precondition:L.Ao.and(u.u.textInputFocus,L.Ao.equals("config.editor.tabCompletion","on"),O.OtherSuggestions,D._y.Visible.toNegated(),p.SnippetController2.InSnippetMode.toNegated()),handler:e=>e.acceptPrevSuggestion(),kbOpts:{weight:ie,kbExpr:u.u.textInputFocus,primary:1026}})),(0,h.Qr)(class extends h.R6{constructor(){super({id:"editor.action.resetSuggestSize",label:P.N("suggest.reset.label","Reset Suggest Widget Size"),alias:"Reset Suggest Widget Size",precondition:void 0})}run(e,t){ee.get(t).resetWidgetSize()}})}}]);