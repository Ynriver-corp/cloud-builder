"use strict";(self.webpackChunkcloud_builder=self.webpackChunkcloud_builder||[]).push([[9068],{23111:function(e,t,i){i.r(t);var o=i(63580),n=i(16830),r=i(82334);class s extends n.R6{constructor(){super({id:"editor.action.fontZoomIn",label:o.N("EditorFontZoomIn.label","Editor Font Zoom In"),alias:"Editor Font Zoom In",precondition:void 0})}run(e,t){r.C.setZoomLevel(r.C.getZoomLevel()+1)}}class a extends n.R6{constructor(){super({id:"editor.action.fontZoomOut",label:o.N("EditorFontZoomOut.label","Editor Font Zoom Out"),alias:"Editor Font Zoom Out",precondition:void 0})}run(e,t){r.C.setZoomLevel(r.C.getZoomLevel()-1)}}class d extends n.R6{constructor(){super({id:"editor.action.fontZoomReset",label:o.N("EditorFontZoomReset.label","Editor Font Zoom Reset"),alias:"Editor Font Zoom Reset",precondition:void 0})}run(e,t){r.C.setZoomLevel(0)}}(0,n.Qr)(s),(0,n.Qr)(a),(0,n.Qr)(d)},44325:function(e,t,i){i.d(t,{Zg:function(){return D},xC:function(){return N},x$:function(){return R},Qq:function(){return P},Qs:function(){return I}});var o=i(85152),n=i(9488),r=i(71050),s=i(17301),a=i(70666),d=i(39925),l=i(65520),c=i(50187),h=i(24314),u=i(3860),g=i(44101),p=i(90469),_=i(51200),m=i(69939),f=i(63580),v=i(90553),w=i(72065),y=i(91741),b=i(94565),C=i(98401),k=i(53725),M=function(e,t,i,o){return new(i||(i=Promise))((function(n,r){function s(e){try{d(o.next(e))}catch(e){r(e)}}function a(e){try{d(o.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}d((o=o.apply(e,t||[])).next())}))};function D(e){if(!(e=e.filter((e=>e.range))).length)return;let{range:t}=e[0];for(let i=1;i<e.length;i++)t=h.e.plusRange(t,e[i].range);const{startLineNumber:i,endLineNumber:n}=t;i===n?1===e.length?(0,o.Z9)(f.N("hint11","Made 1 formatting edit on line {0}",i)):(0,o.Z9)(f.N("hintn1","Made {0} formatting edits on line {1}",e.length,i)):1===e.length?(0,o.Z9)(f.N("hint1n","Made 1 formatting edit between lines {0} and {1}",i,n)):(0,o.Z9)(f.N("hintnn","Made {0} formatting edits between lines {1} and {2}",e.length,i,n))}function S(e){const t=[],i=new Set,o=g.Az.ordered(e);for(const e of o)t.push(e),e.extensionId&&i.add(v.k.toKey(e.extensionId));const n=g.vN.ordered(e);for(const e of n){if(e.extensionId){if(i.has(v.k.toKey(e.extensionId)))continue;i.add(v.k.toKey(e.extensionId))}t.push({displayName:e.displayName,extensionId:e.extensionId,provideDocumentFormattingEdits:(t,i,o)=>e.provideDocumentRangeFormattingEdits(t,t.getFullModelRange(),i,o)})}return t}class N{static setFormatterSelector(e){return{dispose:N._selectors.unshift(e)}}static select(e,t,i){return M(this,void 0,void 0,(function*(){if(0===e.length)return;const o=k.$.first(N._selectors);return o?yield o(e,t,i):void 0}))}}function R(e,t,i,o,n,r){return M(this,void 0,void 0,(function*(){const s=e.get(w.TG),a=(0,l.CL)(t)?t.getModel():t,d=g.vN.ordered(a),c=yield N.select(d,a,o);c&&(n.report(c),yield s.invokeFunction(x,c,t,i,r))}))}function x(e,t,i,o,r){return M(this,void 0,void 0,(function*(){const s=e.get(p.p);let a,c;(0,l.CL)(i)?(a=i.getModel(),c=new d.Dl(i,5,void 0,r)):(a=i,c=new d.YQ(i,r));let g=[],_=0;for(let e of(0,n._2)(o).sort(h.e.compareRangesUsingStarts))_>0&&h.e.areIntersectingOrTouching(g[_-1],e)?g[_-1]=h.e.fromPositions(g[_-1].getStartPosition(),e.getEndPosition()):_=g.push(e);const f=e=>M(this,void 0,void 0,(function*(){return(yield t.provideDocumentRangeFormattingEdits(a,e,a.getFormattingOptions(),c.token))||[]})),v=(e,t)=>{if(!e.length||!t.length)return!1;const i=e.reduce(((e,t)=>h.e.plusRange(e,t.range)),e[0].range);if(!t.some((e=>h.e.intersectRanges(i,e.range))))return!1;for(let i of e)for(let e of t)if(h.e.intersectRanges(i.range,e.range))return!0;return!1},w=[],y=[];try{for(let e of g){if(c.token.isCancellationRequested)return!0;y.push(yield f(e))}for(let e=0;e<g.length;++e)for(let t=e+1;t<g.length;++t){if(c.token.isCancellationRequested)return!0;if(v(y[e],y[t])){const i=h.e.plusRange(g[e],g[t]),o=yield f(i);g.splice(t,1),g.splice(e,1),g.push(i),y.splice(t,1),y.splice(e,1),y.push(o),e=0,t=0}}for(let e of y){if(c.token.isCancellationRequested)return!0;const t=yield s.computeMoreMinimalEdits(a.uri,e);t&&w.push(...t)}}finally{c.dispose()}if(0===w.length)return!1;if((0,l.CL)(i))m.V.execute(i,w,!0),D(w),i.revealPositionInCenterIfOutsideViewport(i.getPosition(),1);else{const[{range:e}]=w,t=new u.Y(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn);a.pushEditOperations([t],w.map((e=>({text:e.text,range:h.e.lift(e.range),forceMoveMarkers:!0}))),(e=>{for(const{range:i}of e)if(h.e.areIntersectingOrTouching(i,t))return[new u.Y(i.startLineNumber,i.startColumn,i.endLineNumber,i.endColumn)];return null}))}return!0}))}function P(e,t,i,o,n){return M(this,void 0,void 0,(function*(){const r=e.get(w.TG),s=(0,l.CL)(t)?t.getModel():t,a=S(s),d=yield N.select(a,s,i);d&&(o.report(d),yield r.invokeFunction(L,d,t,i,n))}))}function L(e,t,i,o,n){return M(this,void 0,void 0,(function*(){const r=e.get(p.p);let s,a,c;(0,l.CL)(i)?(s=i.getModel(),a=new d.Dl(i,5,void 0,n)):(s=i,a=new d.YQ(i,n));try{const e=yield t.provideDocumentFormattingEdits(s,s.getFormattingOptions(),a.token);if(c=yield r.computeMoreMinimalEdits(s.uri,e),a.token.isCancellationRequested)return!0}finally{a.dispose()}if(!c||0===c.length)return!1;if((0,l.CL)(i))m.V.execute(i,c,2!==o),2!==o&&(D(c),i.revealPositionInCenterIfOutsideViewport(i.getPosition(),1));else{const[{range:e}]=c,t=new u.Y(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn);s.pushEditOperations([t],c.map((e=>({text:e.text,range:h.e.lift(e.range),forceMoveMarkers:!0}))),(e=>{for(const{range:i}of e)if(h.e.areIntersectingOrTouching(i,t))return[new u.Y(i.startLineNumber,i.startColumn,i.endLineNumber,i.endColumn)];return null}))}return!0}))}function I(e,t,i,o,n){const a=g.ln.ordered(t);return 0===a.length||a[0].autoFormatTriggerCharacters.indexOf(o)<0?Promise.resolve(void 0):Promise.resolve(a[0].provideOnTypeFormattingEdits(t,i,o,n,r.T.None)).catch(s.Cp).then((i=>e.computeMoreMinimalEdits(t.uri,i)))}N._selectors=new y.S,b.P.registerCommand("_executeFormatRangeProvider",(function(e,...t){const[i,o,d]=t;(0,C.p_)(a.o.isUri(i)),(0,C.p_)(h.e.isIRange(o));const l=e.get(_.q).getModel(i);if(!l)throw(0,s.b1)("resource");return function(e,t,i,o,r){return M(this,void 0,void 0,(function*(){const a=g.vN.ordered(t);for(const d of a){let a=yield Promise.resolve(d.provideDocumentRangeFormattingEdits(t,i,o,r)).catch(s.Cp);if((0,n.Of)(a))return yield e.computeMoreMinimalEdits(t.uri,a)}}))}(e.get(p.p),l,h.e.lift(o),d,r.T.None)})),b.P.registerCommand("_executeFormatDocumentProvider",(function(e,...t){const[i,o]=t;(0,C.p_)(a.o.isUri(i));const d=e.get(_.q).getModel(i);if(!d)throw(0,s.b1)("resource");return function(e,t,i,o){return M(this,void 0,void 0,(function*(){const r=S(t);for(const a of r){let r=yield Promise.resolve(a.provideDocumentFormattingEdits(t,i,o)).catch(s.Cp);if((0,n.Of)(r))return yield e.computeMoreMinimalEdits(t.uri,r)}}))}(e.get(p.p),d,o,r.T.None)})),b.P.registerCommand("_executeFormatOnTypeProvider",(function(e,...t){const[i,o,n,r]=t;(0,C.p_)(a.o.isUri(i)),(0,C.p_)(c.L.isIPosition(o)),(0,C.p_)("string"==typeof n);const d=e.get(_.q).getModel(i);if(!d)throw(0,s.b1)("resource");return I(e.get(p.p),d,c.L.lift(o),n,r)}))},44818:function(e,t,i){i.r(t);var o=i(9488),n=i(71050),r=i(22258),s=i(5976),a=i(16830),d=i(11640),l=i(44906),c=i(24314),h=i(29102),u=i(44101),g=i(90469),p=i(44325),_=i(69939),m=i(63580),f=i(94565),v=i(38819),w=i(72065),y=i(17301),b=i(90535),C=function(e,t,i,o){var n,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(r<3?n(s):r>3?n(t,i,s):n(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},k=function(e,t){return function(i,o){t(i,o,e)}},M=function(e,t,i,o){return new(i||(i=Promise))((function(n,r){function s(e){try{d(o.next(e))}catch(e){r(e)}}function a(e){try{d(o.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}d((o=o.apply(e,t||[])).next())}))};let D=class{constructor(e,t){this._workerService=t,this._callOnDispose=new s.SL,this._callOnModel=new s.SL,this._editor=e,this._callOnDispose.add(e.onDidChangeConfiguration((()=>this._update()))),this._callOnDispose.add(e.onDidChangeModel((()=>this._update()))),this._callOnDispose.add(e.onDidChangeModelLanguage((()=>this._update()))),this._callOnDispose.add(u.ln.onDidChange(this._update,this))}dispose(){this._callOnDispose.dispose(),this._callOnModel.dispose()}_update(){if(this._callOnModel.clear(),!this._editor.getOption(46))return;if(!this._editor.hasModel())return;const e=this._editor.getModel(),[t]=u.ln.ordered(e);if(!t||!t.autoFormatTriggerCharacters)return;let i=new l.q;for(let e of t.autoFormatTriggerCharacters)i.add(e.charCodeAt(0));this._callOnModel.add(this._editor.onDidType((e=>{let t=e.charCodeAt(e.length-1);i.has(t)&&this._trigger(String.fromCharCode(t))})))}_trigger(e){if(!this._editor.hasModel())return;if(this._editor.getSelections().length>1)return;const t=this._editor.getModel(),i=this._editor.getPosition();let n=!1;const r=this._editor.onDidChangeModelContent((e=>{if(e.isFlush)return n=!0,void r.dispose();for(let t=0,o=e.changes.length;t<o;t++){if(e.changes[t].range.endLineNumber<=i.lineNumber)return n=!0,void r.dispose()}}));(0,p.Qs)(this._workerService,t,i,e,t.getFormattingOptions()).then((e=>{r.dispose(),n||(0,o.Of)(e)&&(_.V.execute(this._editor,e,!0),(0,p.Zg)(e))}),(e=>{throw r.dispose(),e}))}};D.ID="editor.contrib.autoFormat",D=C([k(1,g.p)],D);let S=class{constructor(e,t){this.editor=e,this._instantiationService=t,this._callOnDispose=new s.SL,this._callOnModel=new s.SL,this._callOnDispose.add(e.onDidChangeConfiguration((()=>this._update()))),this._callOnDispose.add(e.onDidChangeModel((()=>this._update()))),this._callOnDispose.add(e.onDidChangeModelLanguage((()=>this._update()))),this._callOnDispose.add(u.vN.onDidChange(this._update,this))}dispose(){this._callOnDispose.dispose(),this._callOnModel.dispose()}_update(){this._callOnModel.clear(),this.editor.getOption(45)&&this.editor.hasModel()&&u.vN.has(this.editor.getModel())&&this._callOnModel.add(this.editor.onDidPaste((({range:e})=>this._trigger(e))))}_trigger(e){this.editor.hasModel()&&(this.editor.getSelections().length>1||this._instantiationService.invokeFunction(p.x$,this.editor,e,2,b.E.None,n.T.None).catch(y.dL))}};S.ID="editor.contrib.formatOnPaste",S=C([k(1,w.TG)],S);class N extends a.R6{constructor(){super({id:"editor.action.formatDocument",label:m.N("formatDocument.label","Format Document"),alias:"Format Document",precondition:v.Ao.and(h.u.notInCompositeEditor,h.u.writable,h.u.hasDocumentFormattingProvider),kbOpts:{kbExpr:h.u.editorTextFocus,primary:1572,linux:{primary:3111},weight:100},contextMenuOpts:{group:"1_modification",order:1.3}})}run(e,t){return M(this,void 0,void 0,(function*(){if(t.hasModel()){const i=e.get(w.TG),o=e.get(b.e);yield o.showWhile(i.invokeFunction(p.Qq,t,1,b.E.None,n.T.None),250)}}))}}class R extends a.R6{constructor(){super({id:"editor.action.formatSelection",label:m.N("formatSelection.label","Format Selection"),alias:"Format Selection",precondition:v.Ao.and(h.u.writable,h.u.hasDocumentSelectionFormattingProvider),kbOpts:{kbExpr:h.u.editorTextFocus,primary:(0,r.gx)(2089,2084),weight:100},contextMenuOpts:{when:h.u.hasNonEmptySelection,group:"1_modification",order:1.31}})}run(e,t){return M(this,void 0,void 0,(function*(){if(!t.hasModel())return;const i=e.get(w.TG),o=t.getModel(),r=t.getSelections().map((e=>e.isEmpty()?new c.e(e.startLineNumber,1,e.startLineNumber,o.getLineMaxColumn(e.startLineNumber)):e)),s=e.get(b.e);yield s.showWhile(i.invokeFunction(p.x$,t,r,1,b.E.None,n.T.None),250)}))}}(0,a._K)(D.ID,D),(0,a._K)(S.ID,S),(0,a.Qr)(N),(0,a.Qr)(R),f.P.registerCommand("editor.action.format",(e=>M(void 0,void 0,void 0,(function*(){const t=e.get(d.$).getFocusedCodeEditor();if(!t||!t.hasModel())return;const i=e.get(f.H);t.getSelection().isEmpty()?yield i.executeCommand("editor.action.formatDocument"):yield i.executeCommand("editor.action.formatSelection")}))))},69939:function(e,t,i){i.d(t,{V:function(){return r}});var o=i(69386),n=i(24314);class r{static _handleEolEdits(e,t){let i,o=[];for(let e of t)"number"==typeof e.eol&&(i=e.eol),e.range&&"string"==typeof e.text&&o.push(e);return"number"==typeof i&&e.hasModel()&&e.getModel().pushEOL(i),o}static _isFullModelReplaceEdit(e,t){if(!e.hasModel())return!1;const i=e.getModel(),o=i.validateRange(t.range);return i.getFullModelRange().equalsRange(o)}static execute(e,t,i){i&&e.pushUndoStop();const s=r._handleEolEdits(e,t);1===s.length&&r._isFullModelReplaceEdit(e,s[0])?e.executeEdits("formatEditsCommand",s.map((e=>o.h.replace(n.e.lift(e.range),e.text)))):e.executeEdits("formatEditsCommand",s.map((e=>o.h.replaceMove(n.e.lift(e.range),e.text)))),i&&e.pushUndoStop()}}},61964:function(e,t,i){i.r(t),i.d(t,{MarkerController:function(){return ee},NextMarkerAction:function(){return ie}});var o=i(63580),n=i(5976),r=i(38819),s=i(50187),a=i(24314),d=i(16830),l=i(29102),c=i(65321),h=i(98674),u=i(73910),g=i(97781),p=i(41264),_=i(65388),m=i(68843),f=i(9488),v=i(4669),w=i(42292),y=i(95935),b=i(41967),C=i(50988),k=i(84144),M=i(27628),D=i(72065),S=i(97295),N=i(44349),R=function(e,t,i,o){var n,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(r<3?n(s):r>3?n(t,i,s):n(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},x=function(e,t){return function(i,o){t(i,o,e)}};class P{constructor(e,t,i,o,r){this._openerService=o,this._labelService=r,this._lines=0,this._longestLineLength=0,this._relatedDiagnostics=new WeakMap,this._disposables=new n.SL,this._editor=t;const s=document.createElement("div");s.className="descriptioncontainer",this._messageBlock=document.createElement("div"),this._messageBlock.classList.add("message"),this._messageBlock.setAttribute("aria-live","assertive"),this._messageBlock.setAttribute("role","alert"),s.appendChild(this._messageBlock),this._relatedBlock=document.createElement("div"),s.appendChild(this._relatedBlock),this._disposables.add(c.mu(this._relatedBlock,"click",(e=>{e.preventDefault();const t=this._relatedDiagnostics.get(e.target);t&&i(t)}))),this._scrollable=new _.NB(s,{horizontal:1,vertical:1,useShadows:!1,horizontalScrollbarSize:3,verticalScrollbarSize:3}),e.appendChild(this._scrollable.getDomNode()),this._disposables.add(this._scrollable.onScroll((e=>{s.style.left=`-${e.scrollLeft}px`,s.style.top=`-${e.scrollTop}px`}))),this._disposables.add(this._scrollable)}dispose(){(0,n.B9)(this._disposables)}update(e){const{source:t,message:i,relatedInformation:o,code:n}=e;let r=((null==t?void 0:t.length)||0)+"()".length;n&&(r+="string"==typeof n?n.length:n.value.length);const s=(0,S.uq)(i);this._lines=s.length,this._longestLineLength=0;for(const e of s)this._longestLineLength=Math.max(e.length+r,this._longestLineLength);c.PO(this._messageBlock),this._messageBlock.setAttribute("aria-label",this.getAriaLabel(e)),this._editor.applyFontInfo(this._messageBlock);let a=this._messageBlock;for(const e of s)a=document.createElement("div"),a.innerText=e,""===e&&(a.style.height=this._messageBlock.style.lineHeight),this._messageBlock.appendChild(a);if(t||n){const e=document.createElement("span");if(e.classList.add("details"),a.appendChild(e),t){const i=document.createElement("span");i.innerText=t,i.classList.add("source"),e.appendChild(i)}if(n)if("string"==typeof n){const t=document.createElement("span");t.innerText=`(${n})`,t.classList.add("code"),e.appendChild(t)}else{this._codeLink=c.$("a.code-link"),this._codeLink.setAttribute("href",`${n.target.toString()}`),this._codeLink.onclick=e=>{this._openerService.open(n.target,{allowCommands:!0}),e.preventDefault(),e.stopPropagation()};c.R3(this._codeLink,c.$("span")).innerText=n.value,e.appendChild(this._codeLink)}}if(c.PO(this._relatedBlock),this._editor.applyFontInfo(this._relatedBlock),(0,f.Of)(o)){const e=this._relatedBlock.appendChild(document.createElement("div"));e.style.paddingTop=`${Math.floor(.66*this._editor.getOption(57))}px`,this._lines+=1;for(const t of o){let i=document.createElement("div"),o=document.createElement("a");o.classList.add("filename"),o.innerText=`${(0,m.p)(t.resource)}(${t.startLineNumber}, ${t.startColumn}): `,o.title=this._labelService.getUriLabel(t.resource),this._relatedDiagnostics.set(o,t);let n=document.createElement("span");n.innerText=t.message,i.appendChild(o),i.appendChild(n),this._lines+=1,e.appendChild(i)}}const d=this._editor.getOption(41),l=Math.ceil(d.typicalFullwidthCharacterWidth*this._longestLineLength*.75),h=d.lineHeight*this._lines;this._scrollable.setScrollDimensions({scrollWidth:l,scrollHeight:h})}layout(e,t){this._scrollable.getDomNode().style.height=`${e}px`,this._scrollable.getDomNode().style.width=`${t}px`,this._scrollable.setScrollDimensions({width:t,height:e})}getHeightInLines(){return Math.min(17,this._lines)}getAriaLabel(e){let t="";switch(e.severity){case h.ZL.Error:t=o.N("Error","Error");break;case h.ZL.Warning:t=o.N("Warning","Warning");break;case h.ZL.Info:t=o.N("Info","Info");break;case h.ZL.Hint:t=o.N("Hint","Hint")}let i=o.N("marker aria","{0} at {1}. ",t,e.startLineNumber+":"+e.startColumn);const n=this._editor.getModel();if(n&&e.startLineNumber<=n.getLineCount()&&e.startLineNumber>=1){i=`${n.getLineContent(e.startLineNumber)}, ${i}`}return i}}let L=class e extends w.vk{constructor(e,t,i,o,r,s,a){super(e,{showArrow:!0,showFrame:!0,isAccessible:!0},r),this._themeService=t,this._openerService=i,this._menuService=o,this._contextKeyService=s,this._labelService=a,this._callOnDispose=new n.SL,this._onDidSelectRelatedInformation=new v.Q5,this.onDidSelectRelatedInformation=this._onDidSelectRelatedInformation.event,this._severity=h.ZL.Warning,this._backgroundColor=p.Il.white,this._applyTheme(t.getColorTheme()),this._callOnDispose.add(t.onDidColorThemeChange(this._applyTheme.bind(this))),this.create()}_applyTheme(e){this._backgroundColor=e.getColor(W);let t=O;this._severity===h.ZL.Warning?t=A:this._severity===h.ZL.Info&&(t=F);const i=e.getColor(t);this.style({arrowColor:i,frameColor:i,headerBackgroundColor:this._backgroundColor,primaryHeadingColor:e.getColor(w.IH),secondaryHeadingColor:e.getColor(w.R7)})}_applyStyles(){this._parentContainer&&(this._parentContainer.style.backgroundColor=this._backgroundColor?this._backgroundColor.toString():""),super._applyStyles()}dispose(){this._callOnDispose.dispose(),super.dispose()}_fillHead(t){super._fillHead(t),this._disposables.add(this._actionbarWidget.actionRunner.onBeforeRun((e=>this.editor.focus())));const i=[],o=this._menuService.createMenu(e.TitleMenu,this._contextKeyService);(0,M.vr)(o,void 0,i),this._actionbarWidget.push(i,{label:!1,icon:!0,index:0}),o.dispose()}_fillTitleIcon(e){this._icon=c.R3(e,c.$(""))}_fillBody(e){this._parentContainer=e,e.classList.add("marker-widget"),this._parentContainer.tabIndex=0,this._parentContainer.setAttribute("role","tooltip"),this._container=document.createElement("div"),e.appendChild(this._container),this._message=new P(this._container,this.editor,(e=>this._onDidSelectRelatedInformation.fire(e)),this._openerService,this._labelService),this._disposables.add(this._message)}show(){throw new Error("call showAtMarker")}showAtMarker(e,t,i){this._container.classList.remove("stale"),this._message.update(e),this._severity=e.severity,this._applyTheme(this._themeService.getColorTheme());let n=a.e.lift(e);const r=this.editor.getPosition();let s=r&&n.containsPosition(r)?r:n.getStartPosition();super.show(s,this.computeRequiredHeight());const d=this.editor.getModel();if(d){const e=i>1?o.N("problems","{0} of {1} problems",t,i):o.N("change","{0} of {1} problem",t,i);this.setTitle((0,y.EZ)(d.uri),e)}this._icon.className=`codicon ${b.j.className(h.ZL.toSeverity(this._severity))}`,this.editor.revealPositionNearTop(s,0),this.editor.focus()}updateMarker(e){this._container.classList.remove("stale"),this._message.update(e)}showStale(){this._container.classList.add("stale"),this._relayout()}_doLayoutBody(e,t){super._doLayoutBody(e,t),this._heightInPixel=e,this._message.layout(e,t),this._container.style.height=`${e}px`}_onWidth(e){this._message.layout(this._heightInPixel,e)}_relayout(){super._relayout(this.computeRequiredHeight())}computeRequiredHeight(){return 3+this._message.getHeightInLines()}};L.TitleMenu=new k.eH("gotoErrorTitleMenu"),L=R([x(1,g.XE),x(2,C.v4),x(3,k.co),x(4,D.TG),x(5,r.i6),x(6,N.e)],L);let I=(0,u.kw)(u.lX,u.b6),E=(0,u.kw)(u.uo,u.pW),T=(0,u.kw)(u.c6,u.T8);const O=(0,u.P6)("editorMarkerNavigationError.background",{dark:I,light:I,hc:I},o.N("editorMarkerNavigationError","Editor marker navigation widget error color.")),A=(0,u.P6)("editorMarkerNavigationWarning.background",{dark:E,light:E,hc:E},o.N("editorMarkerNavigationWarning","Editor marker navigation widget warning color.")),F=(0,u.P6)("editorMarkerNavigationInfo.background",{dark:T,light:T,hc:T},o.N("editorMarkerNavigationInfo","Editor marker navigation widget info color.")),W=(0,u.P6)("editorMarkerNavigation.background",{dark:"#2D2D30",light:p.Il.white,hc:"#0C141F"},o.N("editorMarkerNavigationBackground","Editor marker navigation widget background."));(0,g.Ic)(((e,t)=>{const i=e.getColor(u.ur);i&&t.addRule(`.monaco-editor .marker-widget a.code-link span { color: ${i}; }`);const o=e.getColor(u.sg);o&&t.addRule(`.monaco-editor .marker-widget a.code-link span:hover { color: ${o}; }`)}));var H=i(11640),K=i(73046),V=i(70666),$=i(65026),B=i(91741),U=function(e,t,i,o){var n,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(r<3?n(s):r>3?n(t,i,s):n(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},G=function(e,t){return function(i,o){t(i,o,e)}};class Z{constructor(e,t,i){this.marker=e,this.index=t,this.total=i}}let j=class e{constructor(t,i){this._markerService=i,this._onDidChange=new v.Q5,this.onDidChange=this._onDidChange.event,this._dispoables=new n.SL,this._markers=[],this._nextIdx=-1,V.o.isUri(t)?this._resourceFilter=e=>e.toString()===t.toString():t&&(this._resourceFilter=t);const o=()=>{this._markers=this._markerService.read({resource:V.o.isUri(t)?t:void 0,severities:h.ZL.Error|h.ZL.Warning|h.ZL.Info}),"function"==typeof t&&(this._markers=this._markers.filter((e=>this._resourceFilter(e.resource)))),this._markers.sort(e._compareMarker)};o(),this._dispoables.add(i.onMarkerChanged((e=>{this._resourceFilter&&!e.some((e=>this._resourceFilter(e)))||(o(),this._nextIdx=-1,this._onDidChange.fire())})))}dispose(){this._dispoables.dispose(),this._onDidChange.dispose()}matches(e){return!this._resourceFilter&&!e||!(!this._resourceFilter||!e)&&this._resourceFilter(e)}get selected(){const e=this._markers[this._nextIdx];return e&&new Z(e,this._nextIdx+1,this._markers.length)}_initIdx(e,t,i){let o=!1,n=this._markers.findIndex((t=>t.resource.toString()===e.uri.toString()));n<0&&(n=(0,f.ry)(this._markers,{resource:e.uri},((e,t)=>(0,S.qu)(e.resource.toString(),t.resource.toString()))),n<0&&(n=~n));for(let i=n;i<this._markers.length;i++){let n=a.e.lift(this._markers[i]);if(n.isEmpty()){const t=e.getWordAtPosition(n.getStartPosition());t&&(n=new a.e(n.startLineNumber,t.startColumn,n.startLineNumber,t.endColumn))}if(t&&(n.containsPosition(t)||t.isBeforeOrEqual(n.getStartPosition()))){this._nextIdx=i,o=!0;break}if(this._markers[i].resource.toString()!==e.uri.toString())break}o||(this._nextIdx=i?0:this._markers.length-1),this._nextIdx<0&&(this._nextIdx=this._markers.length-1)}resetIndex(){this._nextIdx=-1}move(e,t,i){if(0===this._markers.length)return!1;let o=this._nextIdx;return-1===this._nextIdx?this._initIdx(t,i,e):e?this._nextIdx=(this._nextIdx+1)%this._markers.length:e||(this._nextIdx=(this._nextIdx-1+this._markers.length)%this._markers.length),o!==this._nextIdx}find(e,t){let i=this._markers.findIndex((t=>t.resource.toString()===e.toString()));if(!(i<0))for(;i<this._markers.length;i++)if(a.e.containsPosition(this._markers[i],t))return new Z(this._markers[i],i+1,this._markers.length)}static _compareMarker(e,t){let i=(0,S.qu)(e.resource.toString(),t.resource.toString());return 0===i&&(i=h.ZL.compare(e.severity,t.severity)),0===i&&(i=a.e.compareRangesUsingStarts(e,t)),i}};j=U([G(1,h.lT)],j);const Q=(0,D.yh)("IMarkerNavigationService");let z=class{constructor(e){this._markerService=e,this._provider=new B.S}getMarkerList(e){for(let t of this._provider){const i=t.getMarkerList(e);if(i)return i}return new j(e,this._markerService)}};z=U([G(0,h.lT)],z),(0,$.z)(Q,z,!0);var q=i(59554),J=function(e,t,i,o){var n,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(r<3?n(s):r>3?n(t,i,s):n(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},X=function(e,t){return function(i,o){t(i,o,e)}},Y=function(e,t,i,o){return new(i||(i=Promise))((function(n,r){function s(e){try{d(o.next(e))}catch(e){r(e)}}function a(e){try{d(o.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}d((o=o.apply(e,t||[])).next())}))};let ee=class e{constructor(e,t,i,o,r){this._markerNavigationService=t,this._contextKeyService=i,this._editorService=o,this._instantiationService=r,this._sessionDispoables=new n.SL,this._editor=e,this._widgetVisible=ne.bindTo(this._contextKeyService)}static get(t){return t.getContribution(e.ID)}dispose(){this._cleanUp(),this._sessionDispoables.dispose()}_cleanUp(){this._widgetVisible.reset(),this._sessionDispoables.clear(),this._widget=void 0,this._model=void 0}_getOrCreateModel(e){if(this._model&&this._model.matches(e))return this._model;let t=!1;return this._model&&(t=!0,this._cleanUp()),this._model=this._markerNavigationService.getMarkerList(e),t&&this._model.move(!0,this._editor.getModel(),this._editor.getPosition()),this._widget=this._instantiationService.createInstance(L,this._editor),this._widget.onDidClose((()=>this.close()),this,this._sessionDispoables),this._widgetVisible.set(!0),this._sessionDispoables.add(this._model),this._sessionDispoables.add(this._widget),this._sessionDispoables.add(this._editor.onDidChangeCursorPosition((e=>{var t,i,o;(null===(t=this._model)||void 0===t?void 0:t.selected)&&a.e.containsPosition(null===(i=this._model)||void 0===i?void 0:i.selected.marker,e.position)||null===(o=this._model)||void 0===o||o.resetIndex()}))),this._sessionDispoables.add(this._model.onDidChange((()=>{if(!this._widget||!this._widget.position||!this._model)return;const e=this._model.find(this._editor.getModel().uri,this._widget.position);e?this._widget.updateMarker(e.marker):this._widget.showStale()}))),this._sessionDispoables.add(this._widget.onDidSelectRelatedInformation((e=>{this._editorService.openCodeEditor({resource:e.resource,options:{pinned:!0,revealIfOpened:!0,selection:a.e.lift(e).collapseToStart()}},this._editor),this.close(!1)}))),this._sessionDispoables.add(this._editor.onDidChangeModel((()=>this._cleanUp()))),this._model}close(e=!0){this._cleanUp(),e&&this._editor.focus()}showAtMarker(e){if(this._editor.hasModel()){const t=this._getOrCreateModel(this._editor.getModel().uri);t.resetIndex(),t.move(!0,this._editor.getModel(),new s.L(e.startLineNumber,e.startColumn)),t.selected&&this._widget.showAtMarker(t.selected.marker,t.selected.index,t.selected.total)}}nagivate(t,i){return Y(this,void 0,void 0,(function*(){if(this._editor.hasModel()){const o=this._getOrCreateModel(i?void 0:this._editor.getModel().uri);if(o.move(t,this._editor.getModel(),this._editor.getPosition()),!o.selected)return;if(o.selected.marker.resource.toString()!==this._editor.getModel().uri.toString()){this._cleanUp();const n=yield this._editorService.openCodeEditor({resource:o.selected.marker.resource,options:{pinned:!1,revealIfOpened:!0,selectionRevealType:2,selection:o.selected.marker}},this._editor);n&&(e.get(n).close(),e.get(n).nagivate(t,i))}else this._widget.showAtMarker(o.selected.marker,o.selected.index,o.selected.total)}}))}};ee.ID="editor.contrib.markerController",ee=J([X(1,Q),X(2,r.i6),X(3,H.$),X(4,D.TG)],ee);class te extends d.R6{constructor(e,t,i){super(i),this._next=e,this._multiFile=t}run(e,t){return Y(this,void 0,void 0,(function*(){t.hasModel()&&ee.get(t).nagivate(this._next,this._multiFile)}))}}class ie extends te{constructor(){super(!0,!1,{id:ie.ID,label:ie.LABEL,alias:"Go to Next Problem (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:l.u.focus,primary:578,weight:100},menuOpts:{menuId:L.TitleMenu,title:ie.LABEL,icon:(0,q.q5)("marker-navigation-next",K.lA.chevronDown,o.N("nextMarkerIcon","Icon for goto next marker.")),group:"navigation",order:1}})}}ie.ID="editor.action.marker.next",ie.LABEL=o.N("markerAction.next.label","Go to Next Problem (Error, Warning, Info)");class oe extends te{constructor(){super(!1,!1,{id:oe.ID,label:oe.LABEL,alias:"Go to Previous Problem (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:l.u.focus,primary:1602,weight:100},menuOpts:{menuId:L.TitleMenu,title:ie.LABEL,icon:(0,q.q5)("marker-navigation-previous",K.lA.chevronUp,o.N("previousMarkerIcon","Icon for goto previous marker.")),group:"navigation",order:2}})}}oe.ID="editor.action.marker.prev",oe.LABEL=o.N("markerAction.previous.label","Go to Previous Problem (Error, Warning, Info)");(0,d._K)(ee.ID,ee),(0,d.Qr)(ie),(0,d.Qr)(oe),(0,d.Qr)(class extends te{constructor(){super(!0,!0,{id:"editor.action.marker.nextInFiles",label:o.N("markerAction.nextInFiles.label","Go to Next Problem in Files (Error, Warning, Info)"),alias:"Go to Next Problem in Files (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:l.u.focus,primary:66,weight:100},menuOpts:{menuId:k.eH.MenubarGoMenu,title:o.N({key:"miGotoNextProblem",comment:["&& denotes a mnemonic"]},"Next &&Problem"),group:"6_problem_nav",order:1}})}}),(0,d.Qr)(class extends te{constructor(){super(!1,!0,{id:"editor.action.marker.prevInFiles",label:o.N("markerAction.previousInFiles.label","Go to Previous Problem in Files (Error, Warning, Info)"),alias:"Go to Previous Problem in Files (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:l.u.focus,primary:1090,weight:100},menuOpts:{menuId:k.eH.MenubarGoMenu,title:o.N({key:"miGotoPreviousProblem",comment:["&& denotes a mnemonic"]},"Previous &&Problem"),group:"6_problem_nav",order:2}})}});const ne=new r.uy("markersNavigationVisible",!1),re=d._l.bindToContribution(ee.get);(0,d.fK)(new re({id:"closeMarkersNavigation",precondition:ne,handler:e=>e.close(),kbOpts:{weight:150,kbExpr:l.u.focus,primary:9,secondary:[1033]}}))},92729:function(e,t,i){i.r(t),i.d(t,{DefinitionAction:function(){return te}});var o=i(85152),n=i(15393),r=i(22258),s=i(1432),a=i(65520),d=i(16830),l=i(11640),c=i(50187),h=i(24314),u=i(29102),g=i(44101),p=i(82276),_=i(42292),m=i(44318),f=i(71455),v=i(63580),w=i(84144),y=i(38819),b=i(59422),C=i(90535),k=i(91691),M=i(94565),D=i(39925),S=i(72065),N=i(65026),R=i(49989),x=i(5976),P=i(4669),L=i(91847),I=i(95935),E=function(e,t,i,o){var n,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(r<3?n(s):r>3?n(t,i,s):n(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},T=function(e,t){return function(i,o){t(i,o,e)}};const O=new y.uy("hasSymbols",!1,(0,v.N)("hasSymbols","Whether there are symbol locations that can be navigated via keyboard-only.")),A=(0,S.yh)("ISymbolNavigationService");let F=class{constructor(e,t,i,o){this._editorService=t,this._notificationService=i,this._keybindingService=o,this._currentModel=void 0,this._currentIdx=-1,this._ignoreEditorChange=!1,this._ctxHasSymbols=O.bindTo(e)}reset(){var e,t;this._ctxHasSymbols.reset(),null===(e=this._currentState)||void 0===e||e.dispose(),null===(t=this._currentMessage)||void 0===t||t.dispose(),this._currentModel=void 0,this._currentIdx=-1}put(e){const t=e.parent.parent;if(t.references.length<=1)return void this.reset();this._currentModel=t,this._currentIdx=t.references.indexOf(e),this._ctxHasSymbols.set(!0),this._showMessage();const i=new W(this._editorService),o=i.onDidChange((e=>{if(this._ignoreEditorChange)return;const i=this._editorService.getActiveCodeEditor();if(!i)return;const o=i.getModel(),n=i.getPosition();if(!o||!n)return;let r=!1,s=!1;for(const e of t.references)if((0,I.Xy)(e.uri,o.uri))r=!0,s=s||h.e.containsPosition(e.range,n);else if(r)break;r&&s||this.reset()}));this._currentState=(0,x.F8)(i,o)}revealNext(e){if(!this._currentModel)return Promise.resolve();this._currentIdx+=1,this._currentIdx%=this._currentModel.references.length;const t=this._currentModel.references[this._currentIdx];return this._showMessage(),this._ignoreEditorChange=!0,this._editorService.openCodeEditor({resource:t.uri,options:{selection:h.e.collapseToStart(t.range),selectionRevealType:3}},e).finally((()=>{this._ignoreEditorChange=!1}))}_showMessage(){var e;null===(e=this._currentMessage)||void 0===e||e.dispose();const t=this._keybindingService.lookupKeybinding("editor.gotoNextSymbolFromResult"),i=t?(0,v.N)("location.kb","Symbol {0} of {1}, {2} for next",this._currentIdx+1,this._currentModel.references.length,t.getLabel()):(0,v.N)("location","Symbol {0} of {1}",this._currentIdx+1,this._currentModel.references.length);this._currentMessage=this._notificationService.status(i)}};F=E([T(0,y.i6),T(1,l.$),T(2,b.lT),T(3,L.d)],F),(0,N.z)(A,F,!0),(0,d.fK)(new class extends d._l{constructor(){super({id:"editor.gotoNextSymbolFromResult",precondition:O,kbOpts:{weight:100,primary:70}})}runEditorCommand(e,t){return e.get(A).revealNext(t)}}),R.W.registerCommandAndKeybindingRule({id:"editor.gotoNextSymbolFromResult.cancel",weight:100,when:O,primary:9,handler(e){e.get(A).reset()}});let W=class{constructor(e){this._listener=new Map,this._disposables=new x.SL,this._onDidChange=new P.Q5,this.onDidChange=this._onDidChange.event,this._disposables.add(e.onCodeEditorRemove(this._onDidRemoveEditor,this)),this._disposables.add(e.onCodeEditorAdd(this._onDidAddEditor,this)),e.listCodeEditors().forEach(this._onDidAddEditor,this)}dispose(){this._disposables.dispose(),this._onDidChange.dispose(),(0,x.B9)(this._listener.values())}_onDidAddEditor(e){this._listener.set(e,(0,x.F8)(e.onDidChangeCursorPosition((t=>this._onDidChange.fire({editor:e}))),e.onDidChangeModelContent((t=>this._onDidChange.fire({editor:e})))))}_onDidRemoveEditor(e){var t;null===(t=this._listener.get(e))||void 0===t||t.dispose(),this._listener.delete(e)}};W=E([T(0,l.$)],W);var H,K,V,$,B,U,G,Z,j=i(16268),Q=i(70666),z=i(98401),q=i(84527),J=function(e,t,i,o){return new(i||(i=Promise))((function(n,r){function s(e){try{d(o.next(e))}catch(e){r(e)}}function a(e){try{d(o.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}d((o=o.apply(e,t||[])).next())}))};w.BH.appendMenuItem(w.eH.EditorContext,{submenu:w.eH.EditorContextPeek,title:v.N("peek.submenu","Peek"),group:"navigation",order:100});const X=new Set;function Y(e){const t=new e;return(0,d.QG)(t),X.add(t.id),t}class ee extends d.R6{constructor(e,t){super(t),this._configuration=e}run(e,t){if(!t.hasModel())return Promise.resolve(void 0);const i=e.get(b.lT),r=e.get(l.$),s=e.get(C.e),a=e.get(A),d=t.getModel(),c=t.getPosition(),h=new D.Dl(t,5),u=(0,n.eP)(this._getLocationModel(d,c,h.token),h.token).then((e=>J(this,void 0,void 0,(function*(){if(!e||h.token.isCancellationRequested)return;let i;if((0,o.Z9)(e.ariaMessage),e.referenceAt(d.uri,c)){const e=this._getAlternativeCommand(t);e!==this.id&&X.has(e)&&(i=t.getAction(e))}const n=e.references.length;if(0===n){if(!this._configuration.muteMessage){const e=d.getWordAtPosition(c);p.O.get(t).showMessage(this._getNoResultFoundMessage(e),c)}}else{if(1!==n||!i)return this._onResult(r,a,t,e);i.run()}}))),(e=>{i.error(e)})).finally((()=>{h.dispose()}));return s.showWhile(u,250),u}_onResult(e,t,i,o){return J(this,void 0,void 0,(function*(){const n=this._getGoToPreference(i);if(i instanceof q.H||!(this._configuration.openInPeek||"peek"===n&&o.references.length>1)){const r=o.firstReference(),s=o.references.length>1&&"gotoAndPeek"===n,a=yield this._openReference(i,e,r,this._configuration.openToSide,!s);s&&a?this._openInPeek(a,o):o.dispose(),"goto"===n&&t.put(r)}else this._openInPeek(i,o)}))}_openReference(e,t,i,o,n){return J(this,void 0,void 0,(function*(){let r;if((0,g.vx)(i)&&(r=i.targetSelectionRange),r||(r=i.range),!r)return;const s=yield t.openCodeEditor({resource:i.uri,options:{selection:h.e.collapseToStart(r),selectionRevealType:3}},e,o);if(s){if(n){const e=s.getModel(),t=s.deltaDecorations([],[{range:r,options:{description:"symbol-navigate-action-highlight",className:"symbolHighlight"}}]);setTimeout((()=>{s.getModel()===e&&s.deltaDecorations(t,[])}),350)}return s}}))}_openInPeek(e,t){let i=m.J.get(e);i&&e.hasModel()?i.toggleWidget(e.getSelection(),(0,n.PG)((e=>Promise.resolve(t))),this._configuration.openInPeek):t.dispose()}}class te extends ee{_getLocationModel(e,t,i){return J(this,void 0,void 0,(function*(){return new f.oQ(yield(0,k.nD)(e,t,i),v.N("def.title","Definitions"))}))}_getNoResultFoundMessage(e){return e&&e.word?v.N("noResultWord","No definition found for '{0}'",e.word):v.N("generic.noResults","No definition found")}_getAlternativeCommand(e){return e.getOption(48).alternativeDefinitionCommand}_getGoToPreference(e){return e.getOption(48).multipleDefinitions}}const ie=s.$L&&!j.$W?2118:70;Y(((H=class e extends te{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:e.id,label:v.N("actions.goToDecl.label","Go to Definition"),alias:"Go to Definition",precondition:y.Ao.and(u.u.hasDefinitionProvider,u.u.isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:u.u.editorTextFocus,primary:ie,weight:100},contextMenuOpts:{group:"navigation",order:1.1},menuOpts:{menuId:w.eH.MenubarGoMenu,group:"4_symbol_nav",order:2,title:v.N({key:"miGotoDefinition",comment:["&& denotes a mnemonic"]},"Go to &&Definition")}}),M.P.registerCommandAlias("editor.action.goToDeclaration",e.id)}}).id="editor.action.revealDefinition",H)),Y(((K=class e extends te{constructor(){super({openToSide:!0,openInPeek:!1,muteMessage:!1},{id:e.id,label:v.N("actions.goToDeclToSide.label","Open Definition to the Side"),alias:"Open Definition to the Side",precondition:y.Ao.and(u.u.hasDefinitionProvider,u.u.isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:u.u.editorTextFocus,primary:(0,r.gx)(2089,ie),weight:100}}),M.P.registerCommandAlias("editor.action.openDeclarationToTheSide",e.id)}}).id="editor.action.revealDefinitionAside",K)),Y(((V=class e extends te{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:e.id,label:v.N("actions.previewDecl.label","Peek Definition"),alias:"Peek Definition",precondition:y.Ao.and(u.u.hasDefinitionProvider,_.Jy.notInPeekEditor,u.u.isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:u.u.editorTextFocus,primary:582,linux:{primary:3140},weight:100},contextMenuOpts:{menuId:w.eH.EditorContextPeek,group:"peek",order:2}}),M.P.registerCommandAlias("editor.action.previewDeclaration",e.id)}}).id="editor.action.peekDefinition",V));class oe extends ee{_getLocationModel(e,t,i){return J(this,void 0,void 0,(function*(){return new f.oQ(yield(0,k.zq)(e,t,i),v.N("decl.title","Declarations"))}))}_getNoResultFoundMessage(e){return e&&e.word?v.N("decl.noResultWord","No declaration found for '{0}'",e.word):v.N("decl.generic.noResults","No declaration found")}_getAlternativeCommand(e){return e.getOption(48).alternativeDeclarationCommand}_getGoToPreference(e){return e.getOption(48).multipleDeclarations}}Y((($=class e extends oe{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:e.id,label:v.N("actions.goToDeclaration.label","Go to Declaration"),alias:"Go to Declaration",precondition:y.Ao.and(u.u.hasDeclarationProvider,u.u.isInWalkThroughSnippet.toNegated()),contextMenuOpts:{group:"navigation",order:1.3},menuOpts:{menuId:w.eH.MenubarGoMenu,group:"4_symbol_nav",order:3,title:v.N({key:"miGotoDeclaration",comment:["&& denotes a mnemonic"]},"Go to &&Declaration")}})}_getNoResultFoundMessage(e){return e&&e.word?v.N("decl.noResultWord","No declaration found for '{0}'",e.word):v.N("decl.generic.noResults","No declaration found")}}).id="editor.action.revealDeclaration",$)),Y(class extends oe{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:"editor.action.peekDeclaration",label:v.N("actions.peekDecl.label","Peek Declaration"),alias:"Peek Declaration",precondition:y.Ao.and(u.u.hasDeclarationProvider,_.Jy.notInPeekEditor,u.u.isInWalkThroughSnippet.toNegated()),contextMenuOpts:{menuId:w.eH.EditorContextPeek,group:"peek",order:3}})}});class ne extends ee{_getLocationModel(e,t,i){return J(this,void 0,void 0,(function*(){return new f.oQ(yield(0,k.L3)(e,t,i),v.N("typedef.title","Type Definitions"))}))}_getNoResultFoundMessage(e){return e&&e.word?v.N("goToTypeDefinition.noResultWord","No type definition found for '{0}'",e.word):v.N("goToTypeDefinition.generic.noResults","No type definition found")}_getAlternativeCommand(e){return e.getOption(48).alternativeTypeDefinitionCommand}_getGoToPreference(e){return e.getOption(48).multipleTypeDefinitions}}Y(((B=class e extends ne{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:e.ID,label:v.N("actions.goToTypeDefinition.label","Go to Type Definition"),alias:"Go to Type Definition",precondition:y.Ao.and(u.u.hasTypeDefinitionProvider,u.u.isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:u.u.editorTextFocus,primary:0,weight:100},contextMenuOpts:{group:"navigation",order:1.4},menuOpts:{menuId:w.eH.MenubarGoMenu,group:"4_symbol_nav",order:3,title:v.N({key:"miGotoTypeDefinition",comment:["&& denotes a mnemonic"]},"Go to &&Type Definition")}})}}).ID="editor.action.goToTypeDefinition",B)),Y(((U=class e extends ne{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:e.ID,label:v.N("actions.peekTypeDefinition.label","Peek Type Definition"),alias:"Peek Type Definition",precondition:y.Ao.and(u.u.hasTypeDefinitionProvider,_.Jy.notInPeekEditor,u.u.isInWalkThroughSnippet.toNegated()),contextMenuOpts:{menuId:w.eH.EditorContextPeek,group:"peek",order:4}})}}).ID="editor.action.peekTypeDefinition",U));class re extends ee{_getLocationModel(e,t,i){return J(this,void 0,void 0,(function*(){return new f.oQ(yield(0,k.f4)(e,t,i),v.N("impl.title","Implementations"))}))}_getNoResultFoundMessage(e){return e&&e.word?v.N("goToImplementation.noResultWord","No implementation found for '{0}'",e.word):v.N("goToImplementation.generic.noResults","No implementation found")}_getAlternativeCommand(e){return e.getOption(48).alternativeImplementationCommand}_getGoToPreference(e){return e.getOption(48).multipleImplementations}}Y(((G=class e extends re{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:e.ID,label:v.N("actions.goToImplementation.label","Go to Implementations"),alias:"Go to Implementations",precondition:y.Ao.and(u.u.hasImplementationProvider,u.u.isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:u.u.editorTextFocus,primary:2118,weight:100},menuOpts:{menuId:w.eH.MenubarGoMenu,group:"4_symbol_nav",order:4,title:v.N({key:"miGotoImplementation",comment:["&& denotes a mnemonic"]},"Go to &&Implementations")},contextMenuOpts:{group:"navigation",order:1.45}})}}).ID="editor.action.goToImplementation",G)),Y(((Z=class e extends re{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:e.ID,label:v.N("actions.peekImplementation.label","Peek Implementations"),alias:"Peek Implementations",precondition:y.Ao.and(u.u.hasImplementationProvider,_.Jy.notInPeekEditor,u.u.isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:u.u.editorTextFocus,primary:3142,weight:100},contextMenuOpts:{menuId:w.eH.EditorContextPeek,group:"peek",order:5}})}}).ID="editor.action.peekImplementation",Z));class se extends ee{_getNoResultFoundMessage(e){return e?v.N("references.no","No references found for '{0}'",e.word):v.N("references.noGeneric","No references found")}_getAlternativeCommand(e){return e.getOption(48).alternativeReferenceCommand}_getGoToPreference(e){return e.getOption(48).multipleReferences}}Y(class extends se{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:"editor.action.goToReferences",label:v.N("goToReferences.label","Go to References"),alias:"Go to References",precondition:y.Ao.and(u.u.hasReferenceProvider,_.Jy.notInPeekEditor,u.u.isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:u.u.editorTextFocus,primary:1094,weight:100},contextMenuOpts:{group:"navigation",order:1.45},menuOpts:{menuId:w.eH.MenubarGoMenu,group:"4_symbol_nav",order:5,title:v.N({key:"miGotoReference",comment:["&& denotes a mnemonic"]},"Go to &&References")}})}_getLocationModel(e,t,i){return J(this,void 0,void 0,(function*(){return new f.oQ(yield(0,k.aA)(e,t,!0,i),v.N("ref.title","References"))}))}}),Y(class extends se{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:"editor.action.referenceSearch.trigger",label:v.N("references.action.label","Peek References"),alias:"Peek References",precondition:y.Ao.and(u.u.hasReferenceProvider,_.Jy.notInPeekEditor,u.u.isInWalkThroughSnippet.toNegated()),contextMenuOpts:{menuId:w.eH.EditorContextPeek,group:"peek",order:6}})}_getLocationModel(e,t,i){return J(this,void 0,void 0,(function*(){return new f.oQ(yield(0,k.aA)(e,t,!1,i),v.N("ref.title","References"))}))}});class ae extends ee{constructor(e,t,i){super(e,{id:"editor.action.goToLocation",label:v.N("label.generic","Go To Any Symbol"),alias:"Go To Any Symbol",precondition:y.Ao.and(_.Jy.notInPeekEditor,u.u.isInWalkThroughSnippet.toNegated())}),this._references=t,this._gotoMultipleBehaviour=i}_getLocationModel(e,t,i){return J(this,void 0,void 0,(function*(){return new f.oQ(this._references,v.N("generic.title","Locations"))}))}_getNoResultFoundMessage(e){return e&&v.N("generic.noResult","No results for '{0}'",e.word)||""}_getGoToPreference(e){var t;return null!==(t=this._gotoMultipleBehaviour)&&void 0!==t?t:e.getOption(48).multipleReferences}_getAlternativeCommand(){return""}}M.P.registerCommand({id:"editor.action.goToLocations",description:{description:"Go to locations from a position in a file",args:[{name:"uri",description:"The text document in which to start",constraint:Q.o},{name:"position",description:"The position at which to start",constraint:c.L.isIPosition},{name:"locations",description:"An array of locations.",constraint:Array},{name:"multiple",description:"Define what to do when having multiple results, either `peek`, `gotoAndPeek`, or `goto"},{name:"noResultsMessage",description:"Human readable message that shows when locations is empty."}]},handler:(e,t,i,o,n,r,s)=>J(void 0,void 0,void 0,(function*(){(0,z.p_)(Q.o.isUri(t)),(0,z.p_)(c.L.isIPosition(i)),(0,z.p_)(Array.isArray(o)),(0,z.p_)(void 0===n||"string"==typeof n),(0,z.p_)(void 0===s||"boolean"==typeof s);const d=e.get(l.$),h=yield d.openCodeEditor({resource:t},d.getFocusedCodeEditor());if((0,a.CL)(h))return h.setPosition(i),h.revealPositionInCenterIfOutsideViewport(i,0),h.invokeWithinContext((e=>{const t=new class extends ae{_getNoResultFoundMessage(e){return r||super._getNoResultFoundMessage(e)}}({muteMessage:!Boolean(r),openInPeek:Boolean(s),openToSide:!1},o,n);e.get(S.TG).invokeFunction(t.run.bind(t),h)}))}))}),M.P.registerCommand({id:"editor.action.peekLocations",description:{description:"Peek locations from a position in a file",args:[{name:"uri",description:"The text document in which to start",constraint:Q.o},{name:"position",description:"The position at which to start",constraint:c.L.isIPosition},{name:"locations",description:"An array of locations.",constraint:Array},{name:"multiple",description:"Define what to do when having multiple results, either `peek`, `gotoAndPeek`, or `goto"}]},handler:(e,t,i,o,n)=>J(void 0,void 0,void 0,(function*(){e.get(M.H).executeCommand("editor.action.goToLocations",t,i,o,n,void 0,!0)}))}),M.P.registerCommand({id:"editor.action.findReferences",handler:(e,t,i)=>{(0,z.p_)(Q.o.isUri(t)),(0,z.p_)(c.L.isIPosition(i));const o=e.get(l.$);return o.openCodeEditor({resource:t},o.getFocusedCodeEditor()).then((e=>{if(!(0,a.CL)(e)||!e.hasModel())return;const t=m.J.get(e);if(!t)return;const o=(0,n.PG)((t=>(0,k.aA)(e.getModel(),c.L.lift(i),!1,t).then((e=>new f.oQ(e,v.N("ref.title","References")))))),r=new h.e(i.lineNumber,i.column,i.lineNumber,i.column);return Promise.resolve(t.toggleWidget(r,o,!1))}))}}),M.P.registerCommandAlias("editor.action.showReferences","editor.action.peekLocations")},91691:function(e,t,i){i.d(t,{nD:function(){return c},zq:function(){return h},f4:function(){return u},L3:function(){return g},aA:function(){return p}});var o=i(71050),n=i(17301),r=i(16830),s=i(44101),a=i(71455),d=function(e,t,i,o){return new(i||(i=Promise))((function(n,r){function s(e){try{d(o.next(e))}catch(e){r(e)}}function a(e){try{d(o.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}d((o=o.apply(e,t||[])).next())}))};function l(e,t,i,o){const r=i.ordered(e).map((i=>Promise.resolve(o(i,e,t)).then(void 0,(e=>{(0,n.Cp)(e)}))));return Promise.all(r).then((e=>{const t=[];for(let i of e)Array.isArray(i)?t.push(...i):i&&t.push(i);return t}))}function c(e,t,i){return l(e,t,s.Ct,((e,t,o)=>e.provideDefinition(t,o,i)))}function h(e,t,i){return l(e,t,s.RN,((e,t,o)=>e.provideDeclaration(t,o,i)))}function u(e,t,i){return l(e,t,s.vI,((e,t,o)=>e.provideImplementation(t,o,i)))}function g(e,t,i){return l(e,t,s.tA,((e,t,o)=>e.provideTypeDefinition(t,o,i)))}function p(e,t,i,o){return l(e,t,s.FL,((e,t,n)=>d(this,void 0,void 0,(function*(){const r=yield e.provideReferences(t,n,{includeDeclaration:!0},o);if(!i||!r||2!==r.length)return r;const s=yield e.provideReferences(t,n,{includeDeclaration:!1},o);return s&&1===s.length?s:r}))))}function _(e){return d(this,void 0,void 0,(function*(){const t=yield e(),i=new a.oQ(t,""),o=i.references.map((e=>e.link));return i.dispose(),o}))}(0,r.sb)("_executeDefinitionProvider",((e,t)=>_((()=>c(e,t,o.T.None))))),(0,r.sb)("_executeDeclarationProvider",((e,t)=>_((()=>h(e,t,o.T.None))))),(0,r.sb)("_executeImplementationProvider",((e,t)=>_((()=>u(e,t,o.T.None))))),(0,r.sb)("_executeTypeDefinitionProvider",((e,t)=>_((()=>g(e,t,o.T.None))))),(0,r.sb)("_executeReferenceProvider",((e,t)=>_((()=>p(e,t,!1,o.T.None)))))},69241:function(e,t,i){i.d(t,{yN:function(){return h}});var o=i(5976),n=i(4669),r=i(1432);function s(e,t){return!!e[t]}class a{constructor(e,t){this.target=e.target,this.hasTriggerModifier=s(e.event,t.triggerModifier),this.hasSideBySideModifier=s(e.event,t.triggerSideBySideModifier),this.isNoneOrSingleMouseDown=e.event.detail<=1}}class d{constructor(e,t){this.keyCodeIsTriggerKey=e.keyCode===t.triggerKey,this.keyCodeIsSideBySideKey=e.keyCode===t.triggerSideBySideKey,this.hasTriggerModifier=s(e,t.triggerModifier)}}class l{constructor(e,t,i,o){this.triggerKey=e,this.triggerModifier=t,this.triggerSideBySideKey=i,this.triggerSideBySideModifier=o}equals(e){return this.triggerKey===e.triggerKey&&this.triggerModifier===e.triggerModifier&&this.triggerSideBySideKey===e.triggerSideBySideKey&&this.triggerSideBySideModifier===e.triggerSideBySideModifier}}function c(e){return"altKey"===e?r.dz?new l(57,"metaKey",6,"altKey"):new l(5,"ctrlKey",6,"altKey"):r.dz?new l(6,"altKey",57,"metaKey"):new l(6,"altKey",5,"ctrlKey")}class h extends o.JT{constructor(e){super(),this._onMouseMoveOrRelevantKeyDown=this._register(new n.Q5),this.onMouseMoveOrRelevantKeyDown=this._onMouseMoveOrRelevantKeyDown.event,this._onExecute=this._register(new n.Q5),this.onExecute=this._onExecute.event,this._onCancel=this._register(new n.Q5),this.onCancel=this._onCancel.event,this._editor=e,this._opts=c(this._editor.getOption(68)),this._lastMouseMoveEvent=null,this._hasTriggerKeyOnMouseDown=!1,this._lineNumberOnMouseDown=0,this._register(this._editor.onDidChangeConfiguration((e=>{if(e.hasChanged(68)){const e=c(this._editor.getOption(68));if(this._opts.equals(e))return;this._opts=e,this._lastMouseMoveEvent=null,this._hasTriggerKeyOnMouseDown=!1,this._lineNumberOnMouseDown=0,this._onCancel.fire()}}))),this._register(this._editor.onMouseMove((e=>this._onEditorMouseMove(new a(e,this._opts))))),this._register(this._editor.onMouseDown((e=>this._onEditorMouseDown(new a(e,this._opts))))),this._register(this._editor.onMouseUp((e=>this._onEditorMouseUp(new a(e,this._opts))))),this._register(this._editor.onKeyDown((e=>this._onEditorKeyDown(new d(e,this._opts))))),this._register(this._editor.onKeyUp((e=>this._onEditorKeyUp(new d(e,this._opts))))),this._register(this._editor.onMouseDrag((()=>this._resetHandler()))),this._register(this._editor.onDidChangeCursorSelection((e=>this._onDidChangeCursorSelection(e)))),this._register(this._editor.onDidChangeModel((e=>this._resetHandler()))),this._register(this._editor.onDidChangeModelContent((()=>this._resetHandler()))),this._register(this._editor.onDidScrollChange((e=>{(e.scrollTopChanged||e.scrollLeftChanged)&&this._resetHandler()})))}_onDidChangeCursorSelection(e){e.selection&&e.selection.startColumn!==e.selection.endColumn&&this._resetHandler()}_onEditorMouseMove(e){this._lastMouseMoveEvent=e,this._onMouseMoveOrRelevantKeyDown.fire([e,null])}_onEditorMouseDown(e){this._hasTriggerKeyOnMouseDown=e.hasTriggerModifier,this._lineNumberOnMouseDown=e.target.position?e.target.position.lineNumber:0}_onEditorMouseUp(e){const t=e.target.position?e.target.position.lineNumber:0;this._hasTriggerKeyOnMouseDown&&this._lineNumberOnMouseDown&&this._lineNumberOnMouseDown===t&&this._onExecute.fire(e)}_onEditorKeyDown(e){this._lastMouseMoveEvent&&(e.keyCodeIsTriggerKey||e.keyCodeIsSideBySideKey&&e.hasTriggerModifier)?this._onMouseMoveOrRelevantKeyDown.fire([this._lastMouseMoveEvent,e]):e.hasTriggerModifier&&this._onCancel.fire()}_onEditorKeyUp(e){e.keyCodeIsTriggerKey&&this._onCancel.fire()}_resetHandler(){this._lastMouseMoveEvent=null,this._hasTriggerKeyOnMouseDown=!1,this._onCancel.fire()}}},10365:function(e,t,i){i.r(t),i.d(t,{GotoDefinitionAtPositionEditorContribution:function(){return D}});var o=i(63580),n=i(15393),r=i(17301),s=i(59365),a=i(71531),d=i(24314),l=i(44101),c=i(16830),h=i(91691),u=i(5976),g=i(88216),p=i(97781),_=i(73910),m=i(39925),f=i(92729),v=i(69241),w=i(50187),y=i(98401),b=i(42292),C=i(38819),k=function(e,t,i,o){var n,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(r<3?n(s):r>3?n(t,i,s):n(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},M=function(e,t){return function(i,o){t(i,o,e)}};let D=class e{constructor(e,t,i){this.textModelResolverService=t,this.modeService=i,this.toUnhook=new u.SL,this.toUnhookForKeyboard=new u.SL,this.linkDecorations=[],this.currentWordAtPosition=null,this.previousPromise=null,this.editor=e;let o=new v.yN(e);this.toUnhook.add(o),this.toUnhook.add(o.onMouseMoveOrRelevantKeyDown((([e,t])=>{this.startFindDefinitionFromMouse(e,(0,y.f6)(t))}))),this.toUnhook.add(o.onExecute((e=>{this.isEnabled(e)&&this.gotoDefinition(e.target.position,e.hasSideBySideModifier).then((()=>{this.removeLinkDecorations()}),(e=>{this.removeLinkDecorations(),(0,r.dL)(e)}))}))),this.toUnhook.add(o.onCancel((()=>{this.removeLinkDecorations(),this.currentWordAtPosition=null})))}static get(t){return t.getContribution(e.ID)}startFindDefinitionFromCursor(e){return this.startFindDefinition(e).then((()=>{this.toUnhookForKeyboard.add(this.editor.onDidChangeCursorPosition((()=>{this.currentWordAtPosition=null,this.removeLinkDecorations(),this.toUnhookForKeyboard.clear()}))),this.toUnhookForKeyboard.add(this.editor.onKeyDown((e=>{e&&(this.currentWordAtPosition=null,this.removeLinkDecorations(),this.toUnhookForKeyboard.clear())})))}))}startFindDefinitionFromMouse(e,t){if(9===e.target.type&&this.linkDecorations.length>0)return;if(!this.editor.hasModel()||!this.isEnabled(e,t))return this.currentWordAtPosition=null,void this.removeLinkDecorations();const i=e.target.position;this.startFindDefinition(i)}startFindDefinition(e){var t;this.toUnhookForKeyboard.clear();const i=e?null===(t=this.editor.getModel())||void 0===t?void 0:t.getWordAtPosition(e):null;if(!i)return this.currentWordAtPosition=null,this.removeLinkDecorations(),Promise.resolve(0);if(this.currentWordAtPosition&&this.currentWordAtPosition.startColumn===i.startColumn&&this.currentWordAtPosition.endColumn===i.endColumn&&this.currentWordAtPosition.word===i.word)return Promise.resolve(0);this.currentWordAtPosition=i;let a=new m.yy(this.editor,15);return this.previousPromise&&(this.previousPromise.cancel(),this.previousPromise=null),this.previousPromise=(0,n.PG)((t=>this.findDefinition(e,t))),this.previousPromise.then((t=>{if(t&&t.length&&a.validate(this.editor))if(t.length>1)this.addDecoration(new d.e(e.lineNumber,i.startColumn,e.lineNumber,i.endColumn),(new s.W5).appendText(o.N("multipleResults","Click to show {0} definitions.",t.length)));else{let o=t[0];if(!o.uri)return;this.textModelResolverService.createModelReference(o.uri).then((t=>{if(!t.object||!t.object.textEditorModel)return void t.dispose();const{object:{textEditorModel:n}}=t,{startLineNumber:r}=o.range;if(r<1||r>n.getLineCount())return void t.dispose();const a=this.getPreviewValue(n,r,o);let l;l=o.originSelectionRange?d.e.lift(o.originSelectionRange):new d.e(e.lineNumber,i.startColumn,e.lineNumber,i.endColumn);const c=this.modeService.getModeIdByFilepathOrFirstLine(n.uri);this.addDecoration(l,(new s.W5).appendCodeblock(c||"",a)),t.dispose()}))}else this.removeLinkDecorations()})).then(void 0,r.dL)}getPreviewValue(t,i,o){let n=o.targetSelectionRange?o.range:this.getPreviewRangeBasedOnBrackets(t,i);n.endLineNumber-n.startLineNumber>=e.MAX_SOURCE_PREVIEW_LINES&&(n=this.getPreviewRangeBasedOnIndentation(t,i));return this.stripIndentationFromPreviewRange(t,i,n)}stripIndentationFromPreviewRange(e,t,i){let o=e.getLineFirstNonWhitespaceColumn(t);for(let n=t+1;n<i.endLineNumber;n++){const t=e.getLineFirstNonWhitespaceColumn(n);o=Math.min(o,t)}return e.getValueInRange(i).replace(new RegExp(`^\\s{${o-1}}`,"gm"),"").trim()}getPreviewRangeBasedOnIndentation(t,i){const o=t.getLineFirstNonWhitespaceColumn(i),n=Math.min(t.getLineCount(),i+e.MAX_SOURCE_PREVIEW_LINES);let r=i+1;for(;r<n;r++){if(o===t.getLineFirstNonWhitespaceColumn(r))break}return new d.e(i,1,r+1,1)}getPreviewRangeBasedOnBrackets(t,i){const o=Math.min(t.getLineCount(),i+e.MAX_SOURCE_PREVIEW_LINES),n=[];let r=!0,s=t.findNextBracket(new w.L(i,1));for(;null!==s;){if(0===n.length)n.push(s);else{const e=n[n.length-1];if(e.open[0]===s.open[0]&&e.isOpen&&!s.isOpen?n.pop():n.push(s),0===n.length){if(!r)return new d.e(i,1,s.range.endLineNumber+1,1);r=!1}}const e=t.getLineMaxColumn(i);let a=s.range.endLineNumber,l=s.range.endColumn;if(e===s.range.endColumn&&(a++,l=1),a>o)return new d.e(i,1,o+1,1);s=t.findNextBracket(new w.L(a,l))}return new d.e(i,1,o+1,1)}addDecoration(e,t){const i={range:e,options:{description:"goto-definition-link",inlineClassName:"goto-definition-link",hoverMessage:t}};this.linkDecorations=this.editor.deltaDecorations(this.linkDecorations,[i])}removeLinkDecorations(){this.linkDecorations.length>0&&(this.linkDecorations=this.editor.deltaDecorations(this.linkDecorations,[]))}isEnabled(e,t){return this.editor.hasModel()&&e.isNoneOrSingleMouseDown&&6===e.target.type&&(e.hasTriggerModifier||!!t&&t.keyCodeIsTriggerKey)&&l.Ct.has(this.editor.getModel())}findDefinition(e,t){const i=this.editor.getModel();return i?(0,h.nD)(i,e,t):Promise.resolve(null)}gotoDefinition(e,t){return this.editor.setPosition(e),this.editor.invokeWithinContext((e=>{const i=!t&&this.editor.getOption(76)&&!this.isInPeekEditor(e);return new f.DefinitionAction({openToSide:t,openInPeek:i,muteMessage:!0},{alias:"",label:"",id:"",precondition:void 0}).run(e,this.editor)}))}isInPeekEditor(e){const t=e.get(C.i6);return b.Jy.inPeekEditor.getValue(t)}dispose(){this.toUnhook.dispose()}};D.ID="editor.contrib.gotodefinitionatposition",D.MAX_SOURCE_PREVIEW_LINES=8,D=k([M(1,g.S),M(2,a.h)],D),(0,c._K)(D.ID,D),(0,p.Ic)(((e,t)=>{const i=e.getColor(_._Y);i&&t.addRule(`.monaco-editor .goto-definition-link { color: ${i} !important; }`)}))},44318:function(e,t,i){i.d(t,{J:function(){return de}});var o=i(63580),n=i(17301),r=i(5976),s=i(11640),a=i(72065),d=i(38819),l=i(33108),c=i(52365),h=i(71455),u=i(65321),g=i(41264),p=i(4669),_=i(66663),m=i(95935),f=i(84527),v=i(24314),w=i(83103),y=i(88216),b=i(48801),C=i(67488),k=i(44349),M=i(97781),D=i(88810),S=i(68843),N=i(91847),R=i(75392),x=i(34650),P=function(e,t,i,o){var n,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(r<3?n(s):r>3?n(t,i,s):n(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},L=function(e,t){return function(i,o){t(i,o,e)}};let I=class{constructor(e){this._resolverService=e}hasChildren(e){return e instanceof h.oQ||e instanceof h.F2}getChildren(e){if(e instanceof h.oQ)return e.groups;if(e instanceof h.F2)return e.resolve(this._resolverService).then((e=>e.children));throw new Error("bad tree")}};I=P([L(0,y.S)],I);class E{getHeight(){return 23}getTemplateId(e){return e instanceof h.F2?F.id:H.id}}let T=class{constructor(e){this._keybindingService=e}getKeyboardNavigationLabel(e){var t;if(e instanceof h.WX){const i=null===(t=e.parent.getPreview(e))||void 0===t?void 0:t.preview(e.range);if(i)return i.value}return(0,m.EZ)(e.uri)}};T=P([L(0,N.d)],T);class O{getId(e){return e instanceof h.WX?e.id:e.uri}}let A=class extends r.JT{constructor(e,t,i){super(),this._uriLabel=t;const o=document.createElement("div");o.classList.add("reference-file"),this.file=this._register(new b.g(o,{supportHighlights:!0})),this.badge=new C.Z(u.R3(o,u.$(".count"))),this._register((0,D.WZ)(this.badge,i)),e.appendChild(o)}set(e,t){let i=(0,m.XX)(e.uri);this.file.setLabel((0,S.p)(e.uri),this._uriLabel.getUriLabel(i,{relative:!0}),{title:this._uriLabel.getUriLabel(e.uri),matches:t});const n=e.children.length;this.badge.setCount(n),n>1?this.badge.setTitleFormat((0,o.N)("referencesCount","{0} references",n)):this.badge.setTitleFormat((0,o.N)("referenceCount","{0} reference",n))}};A=P([L(1,k.e),L(2,M.XE)],A);let F=class e{constructor(t){this._instantiationService=t,this.templateId=e.id}renderTemplate(e){return this._instantiationService.createInstance(A,e)}renderElement(e,t,i){i.set(e.element,(0,R.mB)(e.filterData))}disposeTemplate(e){e.dispose()}};F.id="FileReferencesRenderer",F=P([L(0,a.TG)],F);class W{constructor(e){this.label=new x.q(e,!1)}set(e,t){var i;const o=null===(i=e.parent.getPreview(e))||void 0===i?void 0:i.preview(e.range);if(o&&o.value){const{value:e,highlight:i}=o;t&&!R.CL.isDefault(t)?(this.label.element.classList.toggle("referenceMatch",!1),this.label.set(e,(0,R.mB)(t))):(this.label.element.classList.toggle("referenceMatch",!0),this.label.set(e,[i]))}else this.label.set(`${(0,m.EZ)(e.uri)}:${e.range.startLineNumber+1}:${e.range.startColumn+1}`)}}class H{constructor(){this.templateId=H.id}renderTemplate(e){return new W(e)}renderElement(e,t,i){i.set(e.element,e.filterData)}disposeTemplate(){}}H.id="OneReferenceRenderer";class K{getWidgetAriaLabel(){return(0,o.N)("treeAriaLabel","References")}getAriaLabel(e){return e.ariaMessage}}var V=i(32414),$=i(73910),B=i(42292),U=i(23937),G=i(64862),Z=function(e,t,i,o){var n,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(r<3?n(s):r>3?n(t,i,s):n(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},j=function(e,t){return function(i,o){t(i,o,e)}},Q=function(e,t,i,o){return new(i||(i=Promise))((function(n,r){function s(e){try{d(o.next(e))}catch(e){r(e)}}function a(e){try{d(o.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}d((o=o.apply(e,t||[])).next())}))};class z{constructor(e,t){this._editor=e,this._model=t,this._decorations=new Map,this._decorationIgnoreSet=new Set,this._callOnDispose=new r.SL,this._callOnModelChange=new r.SL,this._callOnDispose.add(this._editor.onDidChangeModel((()=>this._onModelChanged()))),this._onModelChanged()}dispose(){this._callOnModelChange.dispose(),this._callOnDispose.dispose(),this.removeDecorations()}_onModelChanged(){this._callOnModelChange.clear();const e=this._editor.getModel();if(e)for(let t of this._model.references)if(t.uri.toString()===e.uri.toString())return void this._addDecorations(t.parent)}_addDecorations(e){if(!this._editor.hasModel())return;this._callOnModelChange.add(this._editor.getModel().onDidChangeDecorations((()=>this._onDecorationChanged())));const t=[],i=[];for(let o=0,n=e.children.length;o<n;o++){let n=e.children[o];this._decorationIgnoreSet.has(n.id)||n.uri.toString()===this._editor.getModel().uri.toString()&&(t.push({range:n.range,options:z.DecorationOptions}),i.push(o))}const o=this._editor.deltaDecorations([],t);for(let t=0;t<o.length;t++)this._decorations.set(o[t],e.children[i[t]])}_onDecorationChanged(){const e=[],t=this._editor.getModel();if(t){for(let[i,o]of this._decorations){const n=t.getDecorationRange(i);if(!n)continue;let r=!1;if(!v.e.equalsRange(n,o.range)){if(v.e.spansMultipleLines(n))r=!0;else{o.range.endColumn-o.range.startColumn!==n.endColumn-n.startColumn&&(r=!0)}r?(this._decorationIgnoreSet.add(o.id),e.push(i)):o.range=n}}for(let t=0,i=e.length;t<i;t++)this._decorations.delete(e[t]);this._editor.deltaDecorations(e,[])}}removeDecorations(){this._editor.deltaDecorations([...this._decorations.keys()],[]),this._decorations.clear()}}z.DecorationOptions=w.qx.register({description:"reference-decoration",stickiness:1,className:"reference-decoration"});class q extends V.ls{}let J=class extends B.vk{constructor(e,t,i,o,n,s,a,d,l,c){super(e,{showFrame:!1,showArrow:!0,isResizeable:!0,isAccessible:!0},s),this._defaultTreeKeyboardSupport=t,this.layoutData=i,this._textModelResolverService=n,this._instantiationService=s,this._peekViewService=a,this._uriLabel=d,this._undoRedoService=l,this._keybindingService=c,this._disposeOnNewModel=new r.SL,this._callOnDispose=new r.SL,this._onDidSelectReference=new p.Q5,this.onDidSelectReference=this._onDidSelectReference.event,this._dim=new u.Ro(0,0),this._applyTheme(o.getColorTheme()),this._callOnDispose.add(o.onDidColorThemeChange(this._applyTheme.bind(this))),this._peekViewService.addExclusiveWidget(e,this),this.create()}dispose(){this.setModel(void 0),this._callOnDispose.dispose(),this._disposeOnNewModel.dispose(),(0,r.B9)(this._preview),(0,r.B9)(this._previewNotAvailableMessage),(0,r.B9)(this._tree),(0,r.B9)(this._previewModelReference),this._splitView.dispose(),super.dispose()}_applyTheme(e){const t=e.getColor(B.SC)||g.Il.transparent;this.style({arrowColor:t,frameColor:t,headerBackgroundColor:e.getColor(B.KY)||g.Il.transparent,primaryHeadingColor:e.getColor(B.IH),secondaryHeadingColor:e.getColor(B.R7)})}show(e){this.editor.revealRangeInCenterIfOutsideViewport(e,0),super.show(e,this.layoutData.heightInLines||18)}focusOnReferenceTree(){this._tree.domFocus()}focusOnPreviewEditor(){this._preview.focus()}isPreviewEditorFocused(){return this._preview.hasTextFocus()}_onTitleClick(e){this._preview&&this._preview.getModel()&&this._onDidSelectReference.fire({element:this._getFocusedReference(),kind:e.ctrlKey||e.metaKey||e.altKey?"side":"open",source:"title"})}_fillBody(e){this.setCssClass("reference-zone-widget"),this._messageContainer=u.R3(e,u.$("div.messages")),u.Cp(this._messageContainer),this._splitView=new U.z(e,{orientation:1}),this._previewContainer=u.R3(e,u.$("div.preview.inline"));this._preview=this._instantiationService.createInstance(f.H,this._previewContainer,{scrollBeyondLastLine:!1,scrollbar:{verticalScrollbarSize:14,horizontal:"auto",useShadows:!0,verticalHasArrows:!1,horizontalHasArrows:!1,alwaysConsumeMouseWheel:!1},overviewRulerLanes:2,fixedOverflowWidgets:!0,minimap:{enabled:!1}},this.editor),u.Cp(this._previewContainer),this._previewNotAvailableMessage=new w.yO(o.N("missingPreviewMessage","no preview available"),w.yO.DEFAULT_CREATION_OPTIONS,null,null,this._undoRedoService),this._treeContainer=u.R3(e,u.$("div.ref-tree.inline"));const t={keyboardSupport:this._defaultTreeKeyboardSupport,accessibilityProvider:new K,keyboardNavigationLabelProvider:this._instantiationService.createInstance(T),identityProvider:new O,openOnSingleClick:!0,selectionNavigation:!0,overrideStyles:{listBackground:B.M8}};this._defaultTreeKeyboardSupport&&this._callOnDispose.add(u.mu(this._treeContainer,"keydown",(e=>{e.equals(9)&&(this._keybindingService.dispatchEvent(e,e.target),e.stopPropagation())}),!0)),this._tree=this._instantiationService.createInstance(q,"ReferencesWidget",this._treeContainer,new E,[this._instantiationService.createInstance(F),this._instantiationService.createInstance(H)],this._instantiationService.createInstance(I),t),this._splitView.addView({onDidChange:p.ju.None,element:this._previewContainer,minimumSize:200,maximumSize:Number.MAX_VALUE,layout:e=>{this._preview.layout({height:this._dim.height,width:e})}},U.M.Distribute),this._splitView.addView({onDidChange:p.ju.None,element:this._treeContainer,minimumSize:100,maximumSize:Number.MAX_VALUE,layout:e=>{this._treeContainer.style.height=`${this._dim.height}px`,this._treeContainer.style.width=`${e}px`,this._tree.layout(this._dim.height,e)}},U.M.Distribute),this._disposables.add(this._splitView.onDidSashChange((()=>{this._dim.width&&(this.layoutData.ratio=this._splitView.getViewSize(0)/this._dim.width)}),void 0));let i=(e,t)=>{e instanceof h.WX&&("show"===t&&this._revealReference(e,!1),this._onDidSelectReference.fire({element:e,kind:t,source:"tree"}))};this._tree.onDidOpen((e=>{e.sideBySide?i(e.element,"side"):e.editorOptions.pinned?i(e.element,"goto"):i(e.element,"show")})),u.Cp(this._treeContainer)}_onWidth(e){this._dim&&this._doLayoutBody(this._dim.height,e)}_doLayoutBody(e,t){super._doLayoutBody(e,t),this._dim=new u.Ro(t,e),this.layoutData.heightInLines=this._viewZone?this._viewZone.heightInLines:this.layoutData.heightInLines,this._splitView.layout(t),this._splitView.resizeView(0,t*this.layoutData.ratio)}setSelection(e){return this._revealReference(e,!0).then((()=>{this._model&&(this._tree.setSelection([e]),this._tree.setFocus([e]))}))}setModel(e){return this._disposeOnNewModel.clear(),this._model=e,this._model?this._onNewModel():Promise.resolve()}_onNewModel(){return this._model?this._model.isEmpty?(this.setTitle(""),this._messageContainer.innerText=o.N("noResults","No results"),u.$Z(this._messageContainer),Promise.resolve(void 0)):(u.Cp(this._messageContainer),this._decorationsManager=new z(this._preview,this._model),this._disposeOnNewModel.add(this._decorationsManager),this._disposeOnNewModel.add(this._model.onDidChangeReferenceRange((e=>this._tree.rerender(e)))),this._disposeOnNewModel.add(this._preview.onMouseDown((e=>{const{event:t,target:i}=e;if(2!==t.detail)return;const o=this._getFocusedReference();o&&this._onDidSelectReference.fire({element:{uri:o.uri,range:i.range},kind:t.ctrlKey||t.metaKey||t.altKey?"side":"open",source:"editor"})}))),this.container.classList.add("results-loaded"),u.$Z(this._treeContainer),u.$Z(this._previewContainer),this._splitView.layout(this._dim.width),this.focusOnReferenceTree(),this._tree.setInput(1===this._model.groups.length?this._model.groups[0]:this._model)):Promise.resolve(void 0)}_getFocusedReference(){const[e]=this._tree.getFocus();return e instanceof h.WX?e:e instanceof h.F2&&e.children.length>0?e.children[0]:void 0}revealReference(e){return Q(this,void 0,void 0,(function*(){yield this._revealReference(e,!1),this._onDidSelectReference.fire({element:e,kind:"goto",source:"tree"})}))}_revealReference(e,t){return Q(this,void 0,void 0,(function*(){if(this._revealedReference===e)return;this._revealedReference=e,e.uri.scheme!==_.lg.inMemory?this.setTitle((0,m.Hx)(e.uri),this._uriLabel.getUriLabel((0,m.XX)(e.uri))):this.setTitle(o.N("peekView.alternateTitle","References"));const i=this._textModelResolverService.createModelReference(e.uri);this._tree.getInput()===e.parent||(t&&this._tree.reveal(e.parent),yield this._tree.expand(e.parent)),this._tree.reveal(e);const n=yield i;if(!this._model)return void n.dispose();(0,r.B9)(this._previewModelReference);const s=n.object;if(s){const t=this._preview.getModel()===s.textEditorModel?0:1,i=v.e.lift(e.range).collapseToStart();this._previewModelReference=n,this._preview.setModel(s.textEditorModel),this._preview.setSelection(i),this._preview.revealRangeInCenter(i,t)}else this._preview.setModel(this._previewNotAvailableMessage),n.dispose()}))}};J=Z([j(3,M.XE),j(4,y.S),j(5,a.TG),j(6,B.Fw),j(7,k.e),j(8,G.tJ),j(9,N.d)],J),(0,M.Ic)(((e,t)=>{const i=e.getColor(B.F8);i&&t.addRule(`.monaco-editor .reference-zone-widget .ref-tree .referenceMatch .highlight { background-color: ${i}; }`);const o=e.getColor(B.WL);o&&t.addRule(`.monaco-editor .reference-zone-widget .preview .reference-decoration { background-color: ${o}; }`);const n=e.getColor(B.xH);n&&t.addRule(`.monaco-editor .reference-zone-widget .preview .reference-decoration { border: 2px solid ${n}; box-sizing: border-box; }`);const r=e.getColor($.xL);r&&t.addRule(`.monaco-editor .reference-zone-widget .ref-tree .referenceMatch .highlight { border: 1px dotted ${r}; box-sizing: border-box; }`);const s=e.getColor(B.M8);s&&t.addRule(`.monaco-editor .reference-zone-widget .ref-tree { background-color: ${s}; }`);const a=e.getColor(B.xk);a&&t.addRule(`.monaco-editor .reference-zone-widget .ref-tree { color: ${a}; }`);const d=e.getColor(B.a7);d&&t.addRule(`.monaco-editor .reference-zone-widget .ref-tree .reference-file { color: ${d}; }`);const l=e.getColor(B.Zj);l&&t.addRule(`.monaco-editor .reference-zone-widget .ref-tree .monaco-list:focus .monaco-list-rows > .monaco-list-row.selected:not(.highlighted) { background-color: ${l}; }`);const c=e.getColor(B.IY);c&&t.addRule(`.monaco-editor .reference-zone-widget .ref-tree .monaco-list:focus .monaco-list-rows > .monaco-list-row.selected:not(.highlighted) { color: ${c} !important; }`);const h=e.getColor(B.RX);h&&t.addRule(`.monaco-editor .reference-zone-widget .preview .monaco-editor .monaco-editor-background,.monaco-editor .reference-zone-widget .preview .monaco-editor .inputarea.ime-input {\tbackground-color: ${h};}`);const u=e.getColor(B.sH);u&&t.addRule(`.monaco-editor .reference-zone-widget .preview .monaco-editor .margin {\tbackground-color: ${u};}`)}));var X=i(50187),Y=i(59422),ee=i(15393),te=i(49989),ie=i(22258),oe=i(94565),ne=function(e,t,i,o){var n,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(r<3?n(s):r>3?n(t,i,s):n(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},re=function(e,t){return function(i,o){t(i,o,e)}},se=function(e,t,i,o){return new(i||(i=Promise))((function(n,r){function s(e){try{d(o.next(e))}catch(e){r(e)}}function a(e){try{d(o.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}d((o=o.apply(e,t||[])).next())}))};const ae=new d.uy("referenceSearchVisible",!1,o.N("referenceSearchVisible","Whether reference peek is visible, like 'Peek References' or 'Peek Definition'"));let de=class e{constructor(e,t,i,o,n,s,a,d){this._defaultTreeKeyboardSupport=e,this._editor=t,this._editorService=o,this._notificationService=n,this._instantiationService=s,this._storageService=a,this._configurationService=d,this._disposables=new r.SL,this._requestIdPool=0,this._ignoreModelChangeEvent=!1,this._referenceSearchVisible=ae.bindTo(i)}static get(t){return t.getContribution(e.ID)}dispose(){var e,t;this._referenceSearchVisible.reset(),this._disposables.dispose(),null===(e=this._widget)||void 0===e||e.dispose(),null===(t=this._model)||void 0===t||t.dispose(),this._widget=void 0,this._model=void 0}toggleWidget(e,t,i){let n;if(this._widget&&(n=this._widget.position),this.closeWidget(),n&&e.containsPosition(n))return;this._peekMode=i,this._referenceSearchVisible.set(!0),this._disposables.add(this._editor.onDidChangeModelLanguage((()=>{this.closeWidget()}))),this._disposables.add(this._editor.onDidChangeModel((()=>{this._ignoreModelChangeEvent||this.closeWidget()})));const r="peekViewLayout",s=class{constructor(){this.ratio=.7,this.heightInLines=18}static fromJSON(e){let t,i;try{const o=JSON.parse(e);t=o.ratio,i=o.heightInLines}catch(e){}return{ratio:t||.7,heightInLines:i||18}}}.fromJSON(this._storageService.get(r,0,"{}"));this._widget=this._instantiationService.createInstance(J,this._editor,this._defaultTreeKeyboardSupport,s),this._widget.setTitle(o.N("labelLoading","Loading...")),this._widget.show(e),this._disposables.add(this._widget.onDidClose((()=>{t.cancel(),this._widget&&(this._storageService.store(r,JSON.stringify(this._widget.layoutData),0,1),this._widget=void 0),this.closeWidget()}))),this._disposables.add(this._widget.onDidSelectReference((e=>{let{element:t,kind:o}=e;if(t)switch(o){case"open":"editor"===e.source&&this._configurationService.getValue("editor.stablePeek")||this.openReference(t,!1,!1);break;case"side":this.openReference(t,!0,!1);break;case"goto":i?this._gotoReference(t):this.openReference(t,!1,!0)}})));const a=++this._requestIdPool;t.then((t=>{var i;if(a===this._requestIdPool&&this._widget)return null===(i=this._model)||void 0===i||i.dispose(),this._model=t,this._widget.setModel(this._model).then((()=>{if(this._widget&&this._model&&this._editor.hasModel()){this._model.isEmpty?this._widget.setMetaTitle(""):this._widget.setMetaTitle(o.N("metaTitle.N","{0} ({1})",this._model.title,this._model.references.length));let t=this._editor.getModel().uri,i=new X.L(e.startLineNumber,e.startColumn),n=this._model.nearestReference(t,i);if(n)return this._widget.setSelection(n).then((()=>{this._widget&&"editor"===this._editor.getOption(75)&&this._widget.focusOnPreviewEditor()}))}}));t.dispose()}),(e=>{this._notificationService.error(e)}))}changeFocusBetweenPreviewAndReferences(){this._widget&&(this._widget.isPreviewEditorFocused()?this._widget.focusOnReferenceTree():this._widget.focusOnPreviewEditor())}goToNextOrPreviousReference(e){return se(this,void 0,void 0,(function*(){if(!this._editor.hasModel()||!this._model||!this._widget)return;const t=this._widget.position;if(!t)return;const i=this._model.nearestReference(this._editor.getModel().uri,t);if(!i)return;const o=this._model.nextOrPreviousReference(i,e),n=this._editor.hasTextFocus(),r=this._widget.isPreviewEditorFocused();yield this._widget.setSelection(o),yield this._gotoReference(o),n?this._editor.focus():this._widget&&r&&this._widget.focusOnPreviewEditor()}))}revealReference(e){return se(this,void 0,void 0,(function*(){this._editor.hasModel()&&this._model&&this._widget&&(yield this._widget.revealReference(e))}))}closeWidget(e=!0){var t,i;null===(t=this._widget)||void 0===t||t.dispose(),null===(i=this._model)||void 0===i||i.dispose(),this._referenceSearchVisible.reset(),this._disposables.clear(),this._widget=void 0,this._model=void 0,e&&this._editor.focus(),this._requestIdPool+=1}_gotoReference(t){this._widget&&this._widget.hide(),this._ignoreModelChangeEvent=!0;const i=v.e.lift(t.range).collapseToStart();return this._editorService.openCodeEditor({resource:t.uri,options:{selection:i}},this._editor).then((t=>{var o;if(this._ignoreModelChangeEvent=!1,t&&this._widget)if(this._editor===t)this._widget.show(i),this._widget.focusOnReferenceTree();else{const n=e.get(t),r=this._model.clone();this.closeWidget(),t.focus(),n.toggleWidget(i,(0,ee.PG)((e=>Promise.resolve(r))),null!==(o=this._peekMode)&&void 0!==o&&o)}else this.closeWidget()}),(e=>{this._ignoreModelChangeEvent=!1,(0,n.dL)(e)}))}openReference(e,t,i){t||this.closeWidget();const{uri:o,range:n}=e;this._editorService.openCodeEditor({resource:o,options:{selection:n,pinned:i}},this._editor,t)}};function le(e,t){const i=(0,B.rc)(e);if(!i)return;let o=de.get(i);o&&t(o)}de.ID="editor.contrib.referencesController",de=ne([re(2,d.i6),re(3,s.$),re(4,Y.lT),re(5,a.TG),re(6,c.Uy),re(7,l.Ui)],de),te.W.registerCommandAndKeybindingRule({id:"togglePeekWidgetFocus",weight:100,primary:(0,ie.gx)(2089,60),when:d.Ao.or(ae,B.Jy.inPeekEditor),handler(e){le(e,(e=>{e.changeFocusBetweenPreviewAndReferences()}))}}),te.W.registerCommandAndKeybindingRule({id:"goToNextReference",weight:90,primary:62,secondary:[70],when:d.Ao.or(ae,B.Jy.inPeekEditor),handler(e){le(e,(e=>{e.goToNextOrPreviousReference(!0)}))}}),te.W.registerCommandAndKeybindingRule({id:"goToPreviousReference",weight:90,primary:1086,secondary:[1094],when:d.Ao.or(ae,B.Jy.inPeekEditor),handler(e){le(e,(e=>{e.goToNextOrPreviousReference(!1)}))}}),oe.P.registerCommandAlias("goToNextReferenceFromEmbeddedEditor","goToNextReference"),oe.P.registerCommandAlias("goToPreviousReferenceFromEmbeddedEditor","goToPreviousReference"),oe.P.registerCommandAlias("closeReferenceSearchEditor","closeReferenceSearch"),oe.P.registerCommand("closeReferenceSearch",(e=>le(e,(e=>e.closeWidget())))),te.W.registerKeybindingRule({id:"closeReferenceSearch",weight:-1,primary:9,secondary:[1033],when:d.Ao.and(B.Jy.inPeekEditor,d.Ao.not("config.editor.stablePeek"))}),te.W.registerKeybindingRule({id:"closeReferenceSearch",weight:250,primary:9,secondary:[1033],when:d.Ao.and(ae,d.Ao.not("config.editor.stablePeek"))}),te.W.registerCommandAndKeybindingRule({id:"revealReference",weight:200,primary:3,mac:{primary:3,secondary:[2066]},when:d.Ao.and(ae,V.CQ),handler(e){var t;const i=null===(t=e.get(V.Lw).lastFocusedList)||void 0===t?void 0:t.getFocus();Array.isArray(i)&&i[0]instanceof h.WX&&le(e,(e=>e.revealReference(i[0])))}}),te.W.registerCommandAndKeybindingRule({id:"openReferenceToSide",weight:100,primary:2051,mac:{primary:259},when:d.Ao.and(ae,V.CQ),handler(e){var t;const i=null===(t=e.get(V.Lw).lastFocusedList)||void 0===t?void 0:t.getFocus();Array.isArray(i)&&i[0]instanceof h.WX&&le(e,(e=>e.openReference(i[0],!0,!0)))}}),oe.P.registerCommand("openReference",(e=>{var t;const i=null===(t=e.get(V.Lw).lastFocusedList)||void 0===t?void 0:t.getFocus();Array.isArray(i)&&i[0]instanceof h.WX&&le(e,(e=>e.openReference(i[0],!1,!0)))}))},71455:function(e,t,i){i.d(t,{WX:function(){return g},F2:function(){return _},oQ:function(){return m}});var o=i(63580),n=i(4669),r=i(95935),s=i(5976),a=i(97295),d=i(44742),l=i(24314),c=i(43702),h=i(17301),u=function(e,t,i,o){return new(i||(i=Promise))((function(n,r){function s(e){try{d(o.next(e))}catch(e){r(e)}}function a(e){try{d(o.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}d((o=o.apply(e,t||[])).next())}))};class g{constructor(e,t,i,o){this.isProviderFirst=e,this.parent=t,this.link=i,this._rangeCallback=o,this.id=d.a.nextId()}get uri(){return this.link.uri}get range(){var e,t;return null!==(t=null!==(e=this._range)&&void 0!==e?e:this.link.targetSelectionRange)&&void 0!==t?t:this.link.range}set range(e){this._range=e,this._rangeCallback(this)}get ariaMessage(){var e;const t=null===(e=this.parent.getPreview(this))||void 0===e?void 0:e.preview(this.range);return t?(0,o.N)({key:"aria.oneReference.preview",comment:["Placeholders are: 0: filename, 1:line number, 2: column number, 3: preview snippet of source code"]},"symbol in {0} on line {1} at column {2}, {3}",(0,r.EZ)(this.uri),this.range.startLineNumber,this.range.startColumn,t.value):(0,o.N)("aria.oneReference","symbol in {0} on line {1} at column {2}",(0,r.EZ)(this.uri),this.range.startLineNumber,this.range.startColumn)}}class p{constructor(e){this._modelReference=e}dispose(){this._modelReference.dispose()}preview(e,t=8){const i=this._modelReference.object.textEditorModel;if(!i)return;const{startLineNumber:o,startColumn:n,endLineNumber:r,endColumn:s}=e,a=i.getWordUntilPosition({lineNumber:o,column:n-t}),d=new l.e(o,a.startColumn,o,n),c=new l.e(r,s,r,1073741824),h=i.getValueInRange(d).replace(/^\s+/,""),u=i.getValueInRange(e);return{value:h+u+i.getValueInRange(c).replace(/\s+$/,""),highlight:{start:h.length,end:h.length+u.length}}}}class _{constructor(e,t){this.parent=e,this.uri=t,this.children=[],this._previews=new c.Y9}dispose(){(0,s.B9)(this._previews.values()),this._previews.clear()}getPreview(e){return this._previews.get(e.uri)}get ariaMessage(){const e=this.children.length;return 1===e?(0,o.N)("aria.fileReferences.1","1 symbol in {0}, full path {1}",(0,r.EZ)(this.uri),this.uri.fsPath):(0,o.N)("aria.fileReferences.N","{0} symbols in {1}, full path {2}",e,(0,r.EZ)(this.uri),this.uri.fsPath)}resolve(e){return u(this,void 0,void 0,(function*(){if(0!==this._previews.size)return this;for(let t of this.children)if(!this._previews.has(t.uri))try{const i=yield e.createModelReference(t.uri);this._previews.set(t.uri,new p(i))}catch(e){(0,h.dL)(e)}return this}))}}class m{constructor(e,t){this.groups=[],this.references=[],this._onDidChangeReferenceRange=new n.Q5,this.onDidChangeReferenceRange=this._onDidChangeReferenceRange.event,this._links=e,this._title=t;const[i]=e;let o;e.sort(m._compareReferences);for(let t of e)if(o&&r.SF.isEqual(o.uri,t.uri,!0)||(o=new _(this,t.uri),this.groups.push(o)),0===o.children.length||0!==m._compareReferences(t,o.children[o.children.length-1])){const e=new g(i===t,o,t,(e=>this._onDidChangeReferenceRange.fire(e)));this.references.push(e),o.children.push(e)}}dispose(){(0,s.B9)(this.groups),this._onDidChangeReferenceRange.dispose(),this.groups.length=0}clone(){return new m(this._links,this._title)}get title(){return this._title}get isEmpty(){return 0===this.groups.length}get ariaMessage(){return this.isEmpty?(0,o.N)("aria.result.0","No results found"):1===this.references.length?(0,o.N)("aria.result.1","Found 1 symbol in {0}",this.references[0].uri.fsPath):1===this.groups.length?(0,o.N)("aria.result.n1","Found {0} symbols in {1}",this.references.length,this.groups[0].uri.fsPath):(0,o.N)("aria.result.nm","Found {0} symbols in {1} files",this.references.length,this.groups.length)}nextOrPreviousReference(e,t){let{parent:i}=e,o=i.children.indexOf(e),n=i.children.length,r=i.parent.groups.length;return 1===r||t&&o+1<n||!t&&o>0?(o=t?(o+1)%n:(o+n-1)%n,i.children[o]):(o=i.parent.groups.indexOf(i),t?(o=(o+1)%r,i.parent.groups[o].children[0]):(o=(o+r-1)%r,i.parent.groups[o].children[i.parent.groups[o].children.length-1]))}nearestReference(e,t){const i=this.references.map(((i,o)=>({idx:o,prefixLen:a.Mh(i.uri.toString(),e.toString()),offsetDist:100*Math.abs(i.range.startLineNumber-t.lineNumber)+Math.abs(i.range.startColumn-t.column)}))).sort(((e,t)=>e.prefixLen>t.prefixLen?-1:e.prefixLen<t.prefixLen?1:e.offsetDist<t.offsetDist?-1:e.offsetDist>t.offsetDist?1:0))[0];if(i)return this.references[i.idx]}referenceAt(e,t){for(const i of this.references)if(i.uri.toString()===e.toString()&&l.e.containsPosition(i.range,t))return i}firstReference(){for(const e of this.references)if(e.isProviderFirst)return e;return this.references[0]}static _compareReferences(e,t){return r.SF.compare(e.uri,t.uri)||l.e.compareRangesUsingStarts(e.range,t.range)}}},67910:function(e,t,i){i.r(t),i.d(t,{ModesHoverController:function(){return Ce}});var o=i(63580),n=i(22258),r=i(5976),s=i(16830),a=i(24314),d=i(29102),l=i(71531),c=i(65321),h=i(50187),u=i(83103),g=i(44101),p=i(15393),_=i(17301);class m{constructor(e,t,i,o,n){this._computer=e,this._state=0,this._hoverTime=n,this._firstWaitScheduler=new p.pY((()=>this._triggerAsyncComputation()),0),this._secondWaitScheduler=new p.pY((()=>this._triggerSyncComputation()),0),this._loadingMessageScheduler=new p.pY((()=>this._showLoadingMessage()),0),this._asyncComputationPromise=null,this._asyncComputationPromiseDone=!1,this._completeCallback=t,this._errorCallback=i,this._progressCallback=o}setHoverTime(e){this._hoverTime=e}_firstWaitTime(){return this._hoverTime/2}_secondWaitTime(){return this._hoverTime/2}_loadingMessageTime(){return 3*this._hoverTime}_triggerAsyncComputation(){this._state=2,this._secondWaitScheduler.schedule(this._secondWaitTime()),this._computer.computeAsync?(this._asyncComputationPromiseDone=!1,this._asyncComputationPromise=(0,p.PG)((e=>this._computer.computeAsync(e))),this._asyncComputationPromise.then((e=>{this._asyncComputationPromiseDone=!0,this._withAsyncResult(e)}),(e=>this._onError(e)))):this._asyncComputationPromiseDone=!0}_triggerSyncComputation(){this._computer.computeSync&&this._computer.onResult(this._computer.computeSync(),!0),this._asyncComputationPromiseDone?(this._state=0,this._onComplete(this._computer.getResult())):(this._state=3,this._onProgress(this._computer.getResult()))}_showLoadingMessage(){3===this._state&&this._onProgress(this._computer.getResultWithLoadingMessage())}_withAsyncResult(e){e&&this._computer.onResult(e,!1),3===this._state&&(this._state=0,this._onComplete(this._computer.getResult()))}_onComplete(e){this._completeCallback(e)}_onError(e){this._errorCallback?this._errorCallback(e):(0,_.dL)(e)}_onProgress(e){this._progressCallback(e)}start(e){if(0===e)0===this._state&&(this._state=1,this._firstWaitScheduler.schedule(this._firstWaitTime()),this._loadingMessageScheduler.schedule(this._loadingMessageTime()));else switch(this._state){case 0:this._triggerAsyncComputation(),this._secondWaitScheduler.cancel(),this._triggerSyncComputation();break;case 2:this._secondWaitScheduler.cancel(),this._triggerSyncComputation()}}cancel(){this._loadingMessageScheduler.cancel(),1===this._state&&this._firstWaitScheduler.cancel(),2===this._state&&(this._secondWaitScheduler.cancel(),this._asyncComputationPromise&&(this._asyncComputationPromise.cancel(),this._asyncComputationPromise=null)),3===this._state&&this._asyncComputationPromise&&(this._asyncComputationPromise.cancel(),this._asyncComputationPromise=null),this._state=0}}var f=i(9488),v=i(93794),w=i(30986),y=i(98674),b=i(95935),C=i(26479),k=i(50988),M=i(61964),D=i(31907),S=i(59471),N=i(89532),R=i(90535),x=i(97781),P=i(73910),L=function(e,t,i,o){var n,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(r<3?n(s):r>3?n(t,i,s):n(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},I=function(e,t){return function(i,o){t(i,o,e)}};const E=c.$;class T{constructor(e,t,i){this.owner=e,this.range=t,this.marker=i}isValidForHoverAnchor(e){return 1===e.type&&this.range.startColumn<=e.range.startColumn&&this.range.endColumn>=e.range.endColumn}}const O={type:1,filter:{include:N.yN.QuickFix}};let A=class{constructor(e,t,i,o){this._editor=e,this._hover=t,this._markerDecorationsService=i,this._openerService=o,this.recentMarkerCodeActionsInfo=void 0}computeSync(e,t){if(!this._editor.hasModel()||1!==e.type)return[];const i=this._editor.getModel(),o=e.range.startLineNumber,n=i.getLineMaxColumn(o),r=[];for(const s of t){const t=s.range.startLineNumber===o?s.range.startColumn:1,d=s.range.endLineNumber===o?s.range.endColumn:n,l=this._markerDecorationsService.getMarker(i.uri,s);if(!l)continue;const c=new a.e(e.range.startLineNumber,t,e.range.startLineNumber,d);r.push(new T(this,c,l))}return r}renderHoverParts(e,t,i){if(!e.length)return r.JT.None;const o=new r.SL;e.forEach((e=>t.appendChild(this.renderMarkerHover(e,o))));const n=1===e.length?e[0]:e.sort(((e,t)=>y.ZL.compare(e.marker.severity,t.marker.severity)))[0];return this.renderMarkerStatusbar(n,i,o),o}renderMarkerHover(e,t){const i=E("div.hover-row"),o=c.R3(i,E("div.marker.hover-contents")),{source:n,message:r,code:s,relatedInformation:a}=e.marker;this._editor.applyFontInfo(o);const d=c.R3(o,E("span"));if(d.style.whiteSpace="pre-wrap",d.innerText=r,n||s)if(s&&"string"!=typeof s){const e=E("span");if(n){c.R3(e,E("span")).innerText=n}const i=c.R3(e,E("a.code-link"));i.setAttribute("href",s.target.toString()),t.add(c.nm(i,"click",(e=>{this._openerService.open(s.target,{allowCommands:!0}),e.preventDefault(),e.stopPropagation()})));c.R3(i,E("span")).innerText=s.value;const r=c.R3(o,e);r.style.opacity="0.6",r.style.paddingLeft="6px"}else{const e=c.R3(o,E("span"));e.style.opacity="0.6",e.style.paddingLeft="6px",e.innerText=n&&s?`${n}(${s})`:n||`(${s})`}if((0,f.Of)(a))for(const{message:e,resource:i,startLineNumber:n,startColumn:r}of a){const s=c.R3(o,E("div"));s.style.marginTop="8px";const a=c.R3(s,E("a"));a.innerText=`${(0,b.EZ)(i)}(${n}, ${r}): `,a.style.cursor="pointer",t.add(c.nm(a,"click",(e=>{e.stopPropagation(),e.preventDefault(),this._openerService&&this._openerService.open(i,{fromUserGesture:!0,editorOptions:{selection:{startLineNumber:n,startColumn:r}}}).catch(_.dL)})));const d=c.R3(s,E("span"));d.innerText=e,this._editor.applyFontInfo(d)}return i}renderMarkerStatusbar(e,t,i){if(e.marker.severity!==y.ZL.Error&&e.marker.severity!==y.ZL.Warning&&e.marker.severity!==y.ZL.Info||t.addAction({label:o.N("view problem","View Problem"),commandId:M.NextMarkerAction.ID,run:()=>{this._hover.hide(),M.MarkerController.get(this._editor).showAtMarker(e.marker),this._editor.focus()}}),!this._editor.getOption(79)){const n=t.append(E("div"));this.recentMarkerCodeActionsInfo&&(y.H0.makeKey(this.recentMarkerCodeActionsInfo.marker)===y.H0.makeKey(e.marker)?this.recentMarkerCodeActionsInfo.hasCodeActions||(n.textContent=o.N("noQuickFixes","No quick fixes available")):this.recentMarkerCodeActionsInfo=void 0);const s=this.recentMarkerCodeActionsInfo&&!this.recentMarkerCodeActionsInfo.hasCodeActions?r.JT.None:i.add((0,p.Vg)((()=>n.textContent=o.N("checkingForQuickFixes","Checking for quick fixes...")),200));n.textContent||(n.textContent=String.fromCharCode(160));const a=this.getCodeActions(e.marker);i.add((0,r.OF)((()=>a.cancel()))),a.then((a=>{if(s.dispose(),this.recentMarkerCodeActionsInfo={marker:e.marker,hasCodeActions:a.validActions.length>0},!this.recentMarkerCodeActionsInfo.hasCodeActions)return a.dispose(),void(n.textContent=o.N("noQuickFixes","No quick fixes available"));n.style.display="none";let d=!1;i.add((0,r.OF)((()=>{d||a.dispose()}))),t.addAction({label:o.N("quick fixes","Quick Fix..."),commandId:S.E7.Id,run:e=>{d=!0;const t=S.pY.get(this._editor),i=c.i(e);this._hover.hide(),t.showCodeActions(O,a,{x:i.left+6,y:i.top+i.height+6})}})}))}}getCodeActions(e){return(0,p.PG)((t=>(0,D.aI)(this._editor.getModel(),new a.e(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn),O,R.E.None,t)))}};A=L([I(2,C.i),I(3,k.v4)],A),(0,x.Ic)(((e,t)=>{const i=e.getColor(P.ur);i&&t.addRule(`.monaco-hover .hover-contents a.code-link span { color: ${i}; }`);const o=e.getColor(P.sg);o&&t.addRule(`.monaco-hover .hover-contents a.code-link span:hover { color: ${o}; }`)}));var F=i(72065),W=i(59365),H=i(88527),K=i(71050);function V(e,t,i){const o=g.xp.ordered(e).map((o=>Promise.resolve(o.provideHover(e,t,i)).then((e=>e&&function(e){const t=void 0!==e.range,i=void 0!==e.contents&&e.contents&&e.contents.length>0;return t&&i}(e)?e:void 0),(e=>{(0,_.Cp)(e)}))));return Promise.all(o).then(f.kX)}(0,s.sb)("_executeHoverProvider",((e,t)=>V(e,t,K.T.None)));var $=i(33108),B=function(e,t,i,o){var n,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(r<3?n(s):r>3?n(t,i,s):n(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},U=function(e,t){return function(i,o){t(i,o,e)}},G=function(e,t,i,o){return new(i||(i=Promise))((function(n,r){function s(e){try{d(o.next(e))}catch(e){r(e)}}function a(e){try{d(o.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}d((o=o.apply(e,t||[])).next())}))};const Z=c.$;class j{constructor(e,t,i){this.owner=e,this.range=t,this.contents=i}isValidForHoverAnchor(e){return 1===e.type&&this.range.startColumn<=e.range.startColumn&&this.range.endColumn>=e.range.endColumn}}let Q=class{constructor(e,t,i,o,n){this._editor=e,this._hover=t,this._modeService=i,this._openerService=o,this._configurationService=n}createLoadingMessage(e){return new j(this,e.range,[(new W.W5).appendText(o.N("modesContentHover.loading","Loading..."))])}computeSync(e,t){if(!this._editor.hasModel()||1!==e.type)return[];const i=this._editor.getModel(),n=e.range.startLineNumber,r=i.getLineMaxColumn(n),s=[];for(const i of t){const t=i.range.startLineNumber===n?i.range.startColumn:1,o=i.range.endLineNumber===n?i.range.endColumn:r,d=i.options.hoverMessage;if(!d||(0,W.CP)(d))continue;const l=new a.e(e.range.startLineNumber,t,e.range.startLineNumber,o);s.push(new j(this,l,(0,f._2)(d)))}const d=this._editor.getModel().getLineLength(n),l=this._configurationService.getValue("editor.maxTokenizationLineLength");return"number"==typeof l&&d>=l&&s.push(new j(this,new a.e(n,1,n,d+1),[{value:o.N("too many characters","Tokenization is skipped for long lines for performance reasons. This can be configured via `editor.maxTokenizationLineLength`.")}])),s}computeAsync(e,t,i){return G(this,void 0,void 0,(function*(){if(!this._editor.hasModel()||1!==e.type)return Promise.resolve([]);const t=this._editor.getModel();if(!g.xp.has(t))return Promise.resolve([]);const o=yield V(t,new h.L(e.range.startLineNumber,e.range.startColumn),i),n=[];for(const t of o){if((0,W.CP)(t.contents))continue;const i=t.range?a.e.lift(t.range):e.range;n.push(new j(this,i,t.contents))}return n}))}renderHoverParts(e,t,i){const o=new r.SL;for(const i of e)for(const e of i.contents){if((0,W.CP)(e))continue;const i=Z("div.hover-row.markdown-hover"),n=c.R3(i,Z("div.hover-contents")),r=o.add(new H.$({editor:this._editor},this._modeService,this._openerService));o.add(r.onDidRenderAsync((()=>{n.className="hover-contents code-hover-contents",this._hover.onContentsChanged()})));const s=o.add(r.render(e));n.appendChild(s.element),t.appendChild(i)}return o}};Q=B([U(2,l.h),U(3,k.v4),U(4,$.Ui)],Q);var z=i(96073),q=i(83308),J=i(64494),X=i(41264),Y=i(94789),ee=i(77862),te=function(e,t,i,o){var n,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(r<3?n(s):r>3?n(t,i,s):n(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},ie=function(e,t){return function(i,o){t(i,o,e)}},oe=function(e,t,i,o){return new(i||(i=Promise))((function(n,r){function s(e){try{d(o.next(e))}catch(e){r(e)}}function a(e){try{d(o.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}d((o=o.apply(e,t||[])).next())}))};class ne{constructor(e,t,i,o){this.owner=e,this.range=t,this.model=i,this.provider=o,this.forceShowAtRange=!0}isValidForHoverAnchor(e){return 1===e.type&&this.range.startColumn<=e.range.startColumn&&this.range.endColumn>=e.range.endColumn}}let re=class{constructor(e,t,i){this._editor=e,this._hover=t,this._themeService=i}computeSync(e,t){return[]}computeAsync(e,t,i){return oe(this,void 0,void 0,(function*(){if(!this._editor.hasModel())return[];const e=J.i.get(this._editor);for(const i of t){const t=e.getColorData(i.range.getStartPosition());if(t){return[yield this._createColorHover(this._editor.getModel(),t.colorInfo,t.provider)]}}return[]}))}_createColorHover(e,t,i){return oe(this,void 0,void 0,(function*(){const o=e.getValueInRange(t.range),{red:n,green:r,blue:s,alpha:d}=t.color,l=new X.VS(Math.round(255*n),Math.round(255*r),Math.round(255*s),d),c=new X.Il(l),h=yield(0,q.R)(e,t,i,K.T.None),u=new Y.A(c,[],0);return u.colorPresentations=h||[],u.guessColorPresentation(c,o),new ne(this,a.e.lift(t.range),u,i)}))}renderHoverParts(e,t,i){if(0===e.length||!this._editor.hasModel())return r.JT.None;const o=new r.SL,n=e[0],s=this._editor.getModel(),d=n.model,l=o.add(new ee.YW(t,d,this._editor.getOption(127),this._themeService));let c=new a.e(n.range.startLineNumber,n.range.startColumn,n.range.endLineNumber,n.range.endColumn);const h=()=>{let e,t;if(d.presentation.textEdit){e=[d.presentation.textEdit],t=new a.e(d.presentation.textEdit.range.startLineNumber,d.presentation.textEdit.range.startColumn,d.presentation.textEdit.range.endLineNumber,d.presentation.textEdit.range.endColumn);const i=this._editor.getModel()._setTrackedRange(null,t,3);this._editor.pushUndoStop(),this._editor.executeEdits("colorpicker",e),t=this._editor.getModel()._getTrackedRange(i)||t}else e=[{identifier:null,range:c,text:d.presentation.label,forceMoveMarkers:!1}],t=c.setEndPosition(c.endLineNumber,c.startColumn+d.presentation.label.length),this._editor.pushUndoStop(),this._editor.executeEdits("colorpicker",e);d.presentation.additionalTextEdits&&(e=[...d.presentation.additionalTextEdits],this._editor.executeEdits("colorpicker",e),this._hover.hide()),this._editor.pushUndoStop(),c=t},u=e=>(0,q.R)(s,{range:c,color:{red:e.rgba.r/255,green:e.rgba.g/255,blue:e.rgba.b/255,alpha:e.rgba.a}},n.provider,K.T.None).then((e=>{d.colorPresentations=e||[]}));return o.add(d.onColorFlushed((e=>{u(e).then(h)}))),o.add(d.onDidChangeColor(u)),this._hover.setColorPicker(l),o}};re=te([ie(2,x.XE)],re);var se=i(91847),ae=i(47411),de=function(e,t,i,o){var n,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(r<3?n(s):r>3?n(t,i,s):n(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},le=function(e,t){return function(i,o){t(i,o,e)}},ce=function(e,t,i,o){return new(i||(i=Promise))((function(n,r){function s(e){try{d(o.next(e))}catch(e){r(e)}}function a(e){try{d(o.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}d((o=o.apply(e,t||[])).next())}))};const he=c.$;let ue=class extends r.JT{constructor(e){super(),this._keybindingService=e,this._hasContent=!1,this.hoverElement=he("div.hover-row.status-bar"),this.actionsElement=c.R3(this.hoverElement,he("div.actions"))}get hasContent(){return this._hasContent}addAction(e){const t=this._keybindingService.lookupKeybinding(e.commandId),i=t?t.getLabel():null;return this._hasContent=!0,this._register(w.S.render(this.actionsElement,e,i))}append(e){const t=c.R3(this.actionsElement,e);return this._hasContent=!0,t}};ue=de([le(0,se.d)],ue);class ge{constructor(e,t){this._participants=t,this._editor=e,this._result=[],this._anchor=null}setAnchor(e){this._anchor=e,this._result=[]}clearResult(){this._result=[]}static _getLineDecorations(e,t){if(1!==t.type)return[];const i=e.getModel(),o=t.range.startLineNumber,n=i.getLineMaxColumn(o);return e.getLineDecorations(o).filter((e=>{if(e.options.isWholeLine)return!0;const i=e.range.startLineNumber===o?e.range.startColumn:1,r=e.range.endLineNumber===o?e.range.endColumn:n;return!(i>t.range.startColumn||t.range.endColumn>r)}))}computeAsync(e){return ce(this,void 0,void 0,(function*(){const t=this._anchor;if(!this._editor.hasModel()||!t)return Promise.resolve([]);const i=ge._getLineDecorations(this._editor,t),o=yield Promise.all(this._participants.map((o=>this._computeAsync(o,i,t,e))));return(0,f.xH)(o)}))}_computeAsync(e,t,i,o){return ce(this,void 0,void 0,(function*(){return e.computeAsync?e.computeAsync(i,t,o):[]}))}computeSync(){if(!this._editor.hasModel()||!this._anchor)return[];const e=ge._getLineDecorations(this._editor,this._anchor);let t=[];for(const i of this._participants)t=t.concat(i.computeSync(this._anchor,e));return(0,f.kX)(t)}onResult(e,t){this._result=t?e.concat(this._result):this._result.concat(e)}getResult(){return this._result.slice(0)}getResultWithLoadingMessage(){if(this._anchor)for(const e of this._participants)if(e.createLoadingMessage){const t=e.createLoadingMessage(this._anchor);if(t)return this._result.slice(0).concat([t])}return this._result.slice(0)}}let pe=class e extends v.${constructor(t,i,o,n){super(),this._hoverVisibleKey=i,this._keybindingService=n,this.allowEditorOverflow=!0,this._participants=[o.createInstance(re,t,this),o.createInstance(Q,t,this),o.createInstance(z.l,t,this),o.createInstance(A,t,this)],this._hover=this._register(new w.c),this._id=e.ID,this._editor=t,this._isVisible=!1,this._stoleFocus=!1,this._renderDisposable=null,this.onkeydown(this._hover.containerDomNode,(e=>{e.equals(9)&&this.hide()})),this._register(this._editor.onDidChangeConfiguration((e=>{e.hasChanged(41)&&this._updateFont()}))),this._editor.onDidLayoutChange((()=>this.layout())),this.layout(),this._editor.addContentWidget(this),this._showAtPosition=null,this._showAtRange=null,this._stoleFocus=!1,this._messages=[],this._lastAnchor=null,this._computer=new ge(this._editor,this._participants),this._highlightDecorations=[],this._isChangingDecorations=!1,this._shouldFocus=!1,this._colorPicker=null,this._hoverOperation=new m(this._computer,(e=>this._withResult(e,!0)),null,(e=>this._withResult(e,!1)),this._editor.getOption(51).delay),this._register(c.mu(this.getDomNode(),c.tw.FOCUS,(()=>{this._colorPicker&&this.getDomNode().classList.add("colorpicker-hover")}))),this._register(c.mu(this.getDomNode(),c.tw.BLUR,(()=>{this.getDomNode().classList.remove("colorpicker-hover")}))),this._register(t.onDidChangeConfiguration((()=>{this._hoverOperation.setHoverTime(this._editor.getOption(51).delay)}))),this._register(g.RW.onDidChange((()=>{this._isVisible&&this._lastAnchor&&this._messages.length>0&&(this._hover.contentsDomNode.textContent="",this._renderMessages(this._lastAnchor,this._messages))})))}dispose(){this._hoverOperation.cancel(),this._editor.removeContentWidget(this),super.dispose()}getId(){return this._id}getDomNode(){return this._hover.containerDomNode}_shouldShowAt(e){const t=e.target.type;if(6===t)return!0;if(7===t){const t=this._editor.getOption(41).typicalHalfwidthCharacterWidth/2,i=e.target.detail;if(i&&!i.isAfterLines&&"number"==typeof i.horizontalDistanceToText&&i.horizontalDistanceToText<t)return!0}return!1}maybeShowAt(e){var t;const i=[];for(const t of this._participants)if("function"==typeof t.suggestHoverAnchor){const o=t.suggestHoverAnchor(e);o&&i.push(o)}if(this._shouldShowAt(e)&&e.target.range){const o=[...(null===(t=e.target.element)||void 0===t?void 0:t.classList.values())||[]].find((e=>e.startsWith("ced-colorBox")))&&e.target.range.endColumn-e.target.range.startColumn==1?new a.e(e.target.range.startLineNumber,e.target.range.startColumn+1,e.target.range.endLineNumber,e.target.range.endColumn+1):e.target.range;i.push(new ae.Q(0,o))}return 0!==i.length&&(i.sort(((e,t)=>t.priority-e.priority)),this._startShowingAt(i[0],0,!1),!0)}_showAt(e,t,i){this._showAtPosition=e,this._showAtRange=t,this._hoverVisibleKey.set(!0),this._isVisible=!0,this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible),this._editor.layoutContentWidget(this),this._editor.render(),this._stoleFocus=i,i&&this._hover.containerDomNode.focus()}getPosition(){return this._isVisible?{position:this._showAtPosition,range:this._showAtRange,preference:[1,2]}:null}_updateFont(){Array.prototype.slice.call(this._hover.contentsDomNode.getElementsByClassName("code")).forEach((e=>this._editor.applyFontInfo(e)))}_updateContents(e){this._hover.contentsDomNode.textContent="",this._hover.contentsDomNode.appendChild(e),this._updateFont(),this._editor.layoutContentWidget(this),this._hover.onContentsChanged()}layout(){const e=Math.max(this._editor.getLayoutInfo().height/4,250),{fontSize:t,lineHeight:i}=this._editor.getOption(41);this._hover.contentsDomNode.style.fontSize=`${t}px`,this._hover.contentsDomNode.style.lineHeight=`${i}px`,this._hover.contentsDomNode.style.maxHeight=`${e}px`,this._hover.contentsDomNode.style.maxWidth=`${Math.max(.66*this._editor.getLayoutInfo().width,500)}px`}onModelDecorationsChanged(){this._isChangingDecorations||this._isVisible&&(this._hoverOperation.cancel(),this._computer.clearResult(),this._colorPicker||this._hoverOperation.start(0))}startShowingAtRange(e,t,i){this._startShowingAt(new ae.Q(0,e),t,i)}_startShowingAt(e,t,i){if(!this._lastAnchor||!this._lastAnchor.equals(e)){if(this._hoverOperation.cancel(),this._isVisible)if(this._showAtPosition&&this._lastAnchor&&e.canAdoptVisibleHover(this._lastAnchor,this._showAtPosition)){const t=this._messages.filter((t=>t.isValidForHoverAnchor(e)));if(0===t.length)this.hide();else{if(t.length===this._messages.length)return;this._renderMessages(e,t)}}else this.hide();this._lastAnchor=e,this._computer.setAnchor(e),this._shouldFocus=i,this._hoverOperation.start(t)}}hide(){this._lastAnchor=null,this._hoverOperation.cancel(),this._isVisible&&(setTimeout((()=>{this._isVisible||this._hoverVisibleKey.set(!1)}),0),this._isVisible=!1,this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible),this._editor.layoutContentWidget(this),this._stoleFocus&&this._editor.focus()),this._isChangingDecorations=!0,this._highlightDecorations=this._editor.deltaDecorations(this._highlightDecorations,[]),this._isChangingDecorations=!1,this._renderDisposable&&(this._renderDisposable.dispose(),this._renderDisposable=null),this._colorPicker=null}isColorPickerVisible(){return!!this._colorPicker}setColorPicker(e){this._colorPicker=e}onContentsChanged(){this._hover.onContentsChanged()}_withResult(e,t){this._messages=e,this._lastAnchor&&this._messages.length>0?this._renderMessages(this._lastAnchor,this._messages):t&&this.hide()}_renderMessages(t,i){this._renderDisposable&&(this._renderDisposable.dispose(),this._renderDisposable=null),this._colorPicker=null;let o=1073741824,n=i[0].range,s=null,d=document.createDocumentFragment();const l=new r.SL,c=new Map;for(const e of i){o=Math.min(o,e.range.startColumn),n=a.e.plusRange(n,e.range),e.forceShowAtRange&&(s=e.range),c.has(e.owner)||c.set(e.owner,[]);c.get(e.owner).push(e)}const u=l.add(new ue(this._keybindingService));for(const[e,t]of c)l.add(e.renderHoverParts(t,d,u));u.hasContent&&d.appendChild(u.hoverElement),this._renderDisposable=l,d.hasChildNodes()&&(s?this._showAt(s.getStartPosition(),s,this._shouldFocus):this._showAt(new h.L(t.range.startLineNumber,o),n,this._shouldFocus),this._updateContents(d)),this._colorPicker&&this._colorPicker.layout(),this._isChangingDecorations=!0,this._highlightDecorations=this._editor.deltaDecorations(this._highlightDecorations,n?[{range:n,options:e._DECORATION_OPTIONS}]:[]),this._isChangingDecorations=!1}};pe.ID="editor.contrib.modesContentHoverWidget",pe._DECORATION_OPTIONS=u.qx.register({description:"content-hover-highlight",className:"hoverHighlight"}),pe=de([le(2,F.TG),le(3,se.d)],pe);class _e extends v.${constructor(e,t){super(),this._id=e,this._editor=t,this._isVisible=!1,this._domNode=document.createElement("div"),this._domNode.className="monaco-hover hidden",this._domNode.setAttribute("aria-hidden","true"),this._domNode.setAttribute("role","tooltip"),this._showAtLineNumber=-1,this._register(this._editor.onDidChangeConfiguration((e=>{e.hasChanged(41)&&this.updateFont()}))),this._editor.addOverlayWidget(this)}get isVisible(){return this._isVisible}set isVisible(e){this._isVisible=e,this._domNode.classList.toggle("hidden",!this._isVisible)}getId(){return this._id}getDomNode(){return this._domNode}showAt(e){this._showAtLineNumber=e,this.isVisible||(this.isVisible=!0);const t=this._editor.getLayoutInfo(),i=this._editor.getTopForLineNumber(this._showAtLineNumber),o=this._editor.getScrollTop(),n=this._editor.getOption(57),r=i-o-(this._domNode.clientHeight-n)/2;this._domNode.style.left=`${t.glyphMarginLeft+t.glyphMarginWidth}px`,this._domNode.style.top=`${Math.max(Math.round(r),0)}px`}hide(){this.isVisible&&(this.isVisible=!1)}getPosition(){return null}dispose(){this._editor.removeOverlayWidget(this),super.dispose()}updateFont(){[...Array.prototype.slice.call(this._domNode.getElementsByTagName("code")),...Array.prototype.slice.call(this._domNode.getElementsByClassName("code"))].forEach((e=>this._editor.applyFontInfo(e)))}updateContents(e){this._domNode.textContent="",this._domNode.appendChild(e),this.updateFont()}}class me{constructor(e){this._editor=e,this._lineNumber=-1,this._result=[]}setLineNumber(e){this._lineNumber=e,this._result=[]}clearResult(){this._result=[]}computeSync(){const e=e=>({value:e}),t=this._editor.getLineDecorations(this._lineNumber),i=[];if(!t)return i;for(const o of t){if(!o.options.glyphMarginClassName)continue;const t=o.options.glyphMarginHoverMessage;t&&!(0,W.CP)(t)&&i.push(...(0,f._2)(t).map(e))}return i}onResult(e,t){this._result=this._result.concat(e)}getResult(){return this._result}getResultWithLoadingMessage(){return this.getResult()}}class fe extends _e{constructor(e,t,i=k.SW){super(fe.ID,e),this._renderDisposeables=this._register(new r.SL),this._messages=[],this._lastLineNumber=-1,this._markdownRenderer=this._register(new H.$({editor:this._editor},t,i)),this._computer=new me(this._editor),this._hoverOperation=new m(this._computer,(e=>this._withResult(e)),void 0,(e=>this._withResult(e)),300)}dispose(){this._hoverOperation.cancel(),super.dispose()}onModelDecorationsChanged(){this.isVisible&&(this._hoverOperation.cancel(),this._computer.clearResult(),this._hoverOperation.start(0))}startShowingAt(e){this._lastLineNumber!==e&&(this._hoverOperation.cancel(),this.hide(),this._lastLineNumber=e,this._computer.setLineNumber(e),this._hoverOperation.start(0))}hide(){this._lastLineNumber=-1,this._hoverOperation.cancel(),super.hide()}_withResult(e){this._messages=e,this._messages.length>0?this._renderMessages(this._lastLineNumber,this._messages):this.hide()}_renderMessages(e,t){this._renderDisposeables.clear();const i=document.createDocumentFragment();for(const e of t){const t=this._markdownRenderer.render(e.value);this._renderDisposeables.add(t),i.appendChild((0,c.$)("div.hover-row",void 0,t.element))}this.updateContents(i),this.showAt(e)}}fe.ID="editor.contrib.modesGlyphHoverWidget";var ve=i(10365),we=i(38819),ye=function(e,t,i,o){var n,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(r<3?n(s):r>3?n(t,i,s):n(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},be=function(e,t){return function(i,o){t(i,o,e)}};let Ce=class e{constructor(e,t,i,o,n){this._editor=e,this._instantiationService=t,this._openerService=i,this._modeService=o,this._toUnhook=new r.SL,this._isMouseDown=!1,this._hoverClicked=!1,this._contentWidget=null,this._glyphWidget=null,this._hookEvents(),this._didChangeConfigurationHandler=this._editor.onDidChangeConfiguration((e=>{e.hasChanged(51)&&(this._unhookEvents(),this._hookEvents())})),this._hoverVisibleKey=d.u.hoverVisible.bindTo(n)}static get(t){return t.getContribution(e.ID)}_hookEvents(){const e=()=>this._hideWidgets(),t=this._editor.getOption(51);this._isHoverEnabled=t.enabled,this._isHoverSticky=t.sticky,this._isHoverEnabled?(this._toUnhook.add(this._editor.onMouseDown((e=>this._onEditorMouseDown(e)))),this._toUnhook.add(this._editor.onMouseUp((e=>this._onEditorMouseUp(e)))),this._toUnhook.add(this._editor.onMouseMove((e=>this._onEditorMouseMove(e)))),this._toUnhook.add(this._editor.onKeyDown((e=>this._onKeyDown(e)))),this._toUnhook.add(this._editor.onDidChangeModelDecorations((()=>this._onModelDecorationsChanged())))):(this._toUnhook.add(this._editor.onMouseMove((e=>this._onEditorMouseMove(e)))),this._toUnhook.add(this._editor.onKeyDown((e=>this._onKeyDown(e))))),this._toUnhook.add(this._editor.onMouseLeave(e)),this._toUnhook.add(this._editor.onDidChangeModel(e)),this._toUnhook.add(this._editor.onDidScrollChange((e=>this._onEditorScrollChanged(e))))}_unhookEvents(){this._toUnhook.clear()}_onModelDecorationsChanged(){var e,t;null===(e=this._contentWidget)||void 0===e||e.onModelDecorationsChanged(),null===(t=this._glyphWidget)||void 0===t||t.onModelDecorationsChanged()}_onEditorScrollChanged(e){(e.scrollTopChanged||e.scrollLeftChanged)&&this._hideWidgets()}_onEditorMouseDown(e){this._isMouseDown=!0;const t=e.target.type;9!==t||e.target.detail!==pe.ID?12===t&&e.target.detail===fe.ID||(12!==t&&e.target.detail!==fe.ID&&(this._hoverClicked=!1),this._hideWidgets()):this._hoverClicked=!0}_onEditorMouseUp(e){this._isMouseDown=!1}_onEditorMouseMove(e){var t,i,o,n,r;let s=e.target.type;if(this._isMouseDown&&this._hoverClicked)return;if(this._isHoverSticky&&9===s&&e.target.detail===pe.ID)return;if(this._isHoverSticky&&!(null===(i=null===(t=e.event.browserEvent.view)||void 0===t?void 0:t.getSelection())||void 0===i?void 0:i.isCollapsed))return;if(!this._isHoverSticky&&9===s&&e.target.detail===pe.ID&&(null===(o=this._contentWidget)||void 0===o?void 0:o.isColorPickerVisible()))return;if(this._isHoverSticky&&12===s&&e.target.detail===fe.ID)return;if(!this._isHoverEnabled)return void this._hideWidgets();if(!this._getOrCreateContentWidget().maybeShowAt(e))return 2===s&&e.target.position?(null===(r=this._contentWidget)||void 0===r||r.hide(),this._glyphWidget||(this._glyphWidget=new fe(this._editor,this._modeService,this._openerService)),void this._glyphWidget.startShowingAt(e.target.position.lineNumber)):void this._hideWidgets();null===(n=this._glyphWidget)||void 0===n||n.hide()}_onKeyDown(e){5!==e.keyCode&&6!==e.keyCode&&57!==e.keyCode&&4!==e.keyCode&&this._hideWidgets()}_hideWidgets(){var e,t,i;this._isMouseDown&&this._hoverClicked&&(null===(e=this._contentWidget)||void 0===e?void 0:e.isColorPickerVisible())||(this._hoverClicked=!1,null===(t=this._glyphWidget)||void 0===t||t.hide(),null===(i=this._contentWidget)||void 0===i||i.hide())}_getOrCreateContentWidget(){return this._contentWidget||(this._contentWidget=this._instantiationService.createInstance(pe,this._editor,this._hoverVisibleKey)),this._contentWidget}isColorPickerVisible(){var e;return(null===(e=this._contentWidget)||void 0===e?void 0:e.isColorPickerVisible())||!1}showContentHover(e,t,i){this._getOrCreateContentWidget().startShowingAtRange(e,t,i)}dispose(){var e,t;this._unhookEvents(),this._toUnhook.dispose(),this._didChangeConfigurationHandler.dispose(),null===(e=this._glyphWidget)||void 0===e||e.dispose(),null===(t=this._contentWidget)||void 0===t||t.dispose()}};Ce.ID="editor.contrib.hover",Ce=ye([be(1,F.TG),be(2,k.v4),be(3,l.h),be(4,we.i6)],Ce);class ke extends s.R6{constructor(){super({id:"editor.action.showHover",label:o.N({key:"showHover",comment:["Label for action that will trigger the showing of a hover in the editor.","This allows for users to show the hover without using the mouse."]},"Show Hover"),alias:"Show Hover",precondition:void 0,kbOpts:{kbExpr:d.u.editorTextFocus,primary:(0,n.gx)(2089,2087),weight:100}})}run(e,t){if(!t.hasModel())return;let i=Ce.get(t);if(!i)return;const o=t.getPosition(),n=new a.e(o.lineNumber,o.column,o.lineNumber,o.column),r=2===t.getOption(2);i.showContentHover(n,1,r)}}class Me extends s.R6{constructor(){super({id:"editor.action.showDefinitionPreviewHover",label:o.N({key:"showDefinitionPreviewHover",comment:["Label for action that will trigger the showing of definition preview hover in the editor.","This allows for users to show the definition preview hover without using the mouse."]},"Show Definition Preview Hover"),alias:"Show Definition Preview Hover",precondition:void 0})}run(e,t){let i=Ce.get(t);if(!i)return;const o=t.getPosition();if(!o)return;const n=new a.e(o.lineNumber,o.column,o.lineNumber,o.column);ve.GotoDefinitionAtPositionEditorContribution.get(t).startFindDefinitionFromCursor(o).then((()=>{i.showContentHover(n,1,!0)}))}}(0,s._K)(Ce.ID,Ce),(0,s.Qr)(ke),(0,s.Qr)(Me),(0,x.Ic)(((e,t)=>{const i=e.getColor(P.pt);i&&t.addRule(`.monaco-editor .hoverHighlight { background-color: ${i}; }`);const o=e.getColor(P.yJ);o&&t.addRule(`.monaco-editor .monaco-hover { background-color: ${o}; }`);const n=e.getColor(P.CN);n&&(t.addRule(`.monaco-editor .monaco-hover { border: 1px solid ${n}; }`),t.addRule(`.monaco-editor .monaco-hover .hover-row:not(:first-child):not(:empty) { border-top: 1px solid ${n.transparent(.5)}; }`),t.addRule(`.monaco-editor .monaco-hover hr { border-top: 1px solid ${n.transparent(.5)}; }`),t.addRule(`.monaco-editor .monaco-hover hr { border-bottom: 0px solid ${n.transparent(.5)}; }`));const r=e.getColor(P.ur);r&&t.addRule(`.monaco-editor .monaco-hover a { color: ${r}; }`);const s=e.getColor(P.sg);s&&t.addRule(`.monaco-editor .monaco-hover a:hover { color: ${s}; }`);const a=e.getColor(P.Sb);a&&t.addRule(`.monaco-editor .monaco-hover { color: ${a}; }`);const d=e.getColor(P.Lo);d&&t.addRule(`.monaco-editor .monaco-hover .hover-row .actions { background-color: ${d}; }`);const l=e.getColor(P.Sw);l&&t.addRule(`.monaco-editor .monaco-hover code { background-color: ${l}; }`)}))},47411:function(e,t,i){i.d(t,{Q:function(){return o},Y:function(){return n}});class o{constructor(e,t){this.priority=e,this.range=t,this.type=1}equals(e){return 1===e.type&&this.range.equalsRange(e.range)}canAdoptVisibleHover(e,t){return 1===e.type&&t.lineNumber===this.range.startLineNumber}}class n{constructor(e,t,i){this.priority=e,this.owner=t,this.range=i,this.type=2}equals(e){return 2===e.type&&this.owner===e.owner}canAdoptVisibleHover(e,t){return 2===e.type&&this.owner===e.owner}}}}]);