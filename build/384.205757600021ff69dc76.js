"use strict";(self.webpackChunkcloud_builder=self.webpackChunkcloud_builder||[]).push([[384],{83554:function(e,t,i){i.r(t);var n=i(63580),o=i(24314),s=i(3860),r=i(29102),a=i(16830),l=i(90469);class d{constructor(e,t,i){this._editRange=e,this._originalSelection=t,this._text=i}getEditOperations(e,t){t.addTrackedEditOperation(this._editRange,this._text)}computeCursorState(e,t){const i=t.getInverseEditOperations()[0].range;return this._originalSelection.isEmpty()?new s.Y(i.endLineNumber,Math.min(this._originalSelection.positionColumn,i.endColumn),i.endLineNumber,Math.min(this._originalSelection.positionColumn,i.endColumn)):new s.Y(i.endLineNumber,i.endColumn-this._text.length,i.endLineNumber,i.endColumn)}}var c=i(39925),u=i(97781),h=i(27869),g=i(83103),p=i(15393),m=i(17301),f=function(e,t,i,n){var o,s=arguments.length,r=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(s<3?o(r):s>3?o(t,i,r):o(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},v=function(e,t){return function(i,n){t(i,n,e)}};let C=class e{constructor(e,t){this.decorationIds=[],this.editor=e,this.editorWorkerService=t}static get(t){return t.getContribution(e.ID)}dispose(){}run(t,i){this.currentRequest&&this.currentRequest.cancel();const n=this.editor.getSelection(),r=this.editor.getModel();if(!r||!n)return;let a=n;if(a.startLineNumber!==a.endLineNumber)return;const l=new c.yy(this.editor,5),u=r.uri;return this.editorWorkerService.canNavigateValueSet(u)?(this.currentRequest=(0,p.PG)((e=>this.editorWorkerService.navigateValueSet(u,a,i))),this.currentRequest.then((i=>{if(!i||!i.range||!i.value)return;if(!l.validate(this.editor))return;let n=o.e.lift(i.range),r=i.range,c=i.value.length-(a.endColumn-a.startColumn);r={startLineNumber:r.startLineNumber,startColumn:r.startColumn,endLineNumber:r.endLineNumber,endColumn:r.startColumn+i.value.length},c>1&&(a=new s.Y(a.startLineNumber,a.startColumn,a.endLineNumber,a.endColumn+c-1));const u=new d(n,a,i.value);this.editor.pushUndoStop(),this.editor.executeCommand(t,u),this.editor.pushUndoStop(),this.decorationIds=this.editor.deltaDecorations(this.decorationIds,[{range:r,options:e.DECORATION}]),this.decorationRemover&&this.decorationRemover.cancel(),this.decorationRemover=(0,p.Vs)(350),this.decorationRemover.then((()=>this.decorationIds=this.editor.deltaDecorations(this.decorationIds,[]))).catch(m.dL)})).catch(m.dL)):Promise.resolve(void 0)}};C.ID="editor.contrib.inPlaceReplaceController",C.DECORATION=g.qx.register({description:"in-place-replace",className:"valueSetReplacement"}),C=f([v(1,l.p)],C);class b extends a.R6{constructor(){super({id:"editor.action.inPlaceReplace.up",label:n.N("InPlaceReplaceAction.previous.label","Replace with Previous Value"),alias:"Replace with Previous Value",precondition:r.u.writable,kbOpts:{kbExpr:r.u.editorTextFocus,primary:3154,weight:100}})}run(e,t){const i=C.get(t);return i?i.run(this.id,!0):Promise.resolve(void 0)}}class S extends a.R6{constructor(){super({id:"editor.action.inPlaceReplace.down",label:n.N("InPlaceReplaceAction.next.label","Replace with Next Value"),alias:"Replace with Next Value",precondition:r.u.writable,kbOpts:{kbExpr:r.u.editorTextFocus,primary:3156,weight:100}})}run(e,t){const i=C.get(t);return i?i.run(this.id,!1):Promise.resolve(void 0)}}(0,a._K)(C.ID,C),(0,a.Qr)(b),(0,a.Qr)(S),(0,u.Ic)(((e,t)=>{const i=e.getColor(h.Dl);i&&t.addRule(`.monaco-editor.vs .valueSetReplacement { outline: solid 2px ${i}; }`)}))},51491:function(e,t,i){function n(e,t){let i=0;for(let n=0;n<e.length;n++)"\t"===e.charAt(n)?i+=t:i++;return i}function o(e,t,i){e=e<0?0:e;let n="";if(!i){let i=Math.floor(e/t);e%=t;for(let e=0;e<i;e++)n+="\t"}for(let t=0;t<e;t++)n+=" ";return n}i.d(t,{Y:function(){return n},J:function(){return o}})},80638:function(e,t,i){i.r(t),i.d(t,{getReindentEditOperations:function(){return v},IndentationToSpacesAction:function(){return C},IndentationToTabsAction:function(){return b},ChangeIndentationSizeAction:function(){return S},IndentUsingTabs:function(){return _},IndentUsingSpaces:function(){return L},DetectIndentation:function(){return w},ReindentLinesAction:function(){return x},ReindentSelectedLinesAction:function(){return I},AutoIndentOnPasteCommand:function(){return N},AutoIndentOnPaste:function(){return y},IndentationToSpacesCommand:function(){return D},IndentationToTabsCommand:function(){return T}});var n=i(63580),o=i(5976),s=i(97295),r=i(16830),a=i(10291),l=i(69386),d=i(24314),c=i(3860),u=i(29102),h=i(83103),g=i(83831),p=i(51200),m=i(51491),f=i(41157);function v(e,t,i,n){if(1===e.getLineCount()&&1===e.getLineMaxColumn(1))return[];let o=g.zu.getIndentationRules(e.getLanguageIdentifier().id);if(!o)return[];for(i=Math.min(i,e.getLineCount());t<=i&&o.unIndentedLinePattern;){let i=e.getLineContent(t);if(!o.unIndentedLinePattern.test(i))break;t++}if(t>i-1)return[];const{tabSize:r,indentSize:d,insertSpaces:u}=e.getOptions(),p=(e,t)=>(t=t||1,a.U.shiftIndent(e,e.length+t,r,d,u)),m=(e,t)=>(t=t||1,a.U.unshiftIndent(e,e.length+t,r,d,u));let f,v=[],C=e.getLineContent(t),b=C;if(null!=n){f=n;let e=s.V8(C);b=f+C.substring(e.length),o.decreaseIndentPattern&&o.decreaseIndentPattern.test(b)&&(f=m(f),b=f+C.substring(e.length)),C!==b&&v.push(l.h.replaceMove(new c.Y(t,1,t,e.length+1),h.yO.normalizeIndentation(f,d,u)))}else f=s.V8(C);let S=f;o.increaseIndentPattern&&o.increaseIndentPattern.test(b)?(S=p(S),f=p(f)):o.indentNextLinePattern&&o.indentNextLinePattern.test(b)&&(S=p(S));for(let n=++t;n<=i;n++){let t=e.getLineContent(n),i=s.V8(t),r=S+t.substring(i.length);o.decreaseIndentPattern&&o.decreaseIndentPattern.test(r)&&(S=m(S),f=m(f)),i!==S&&v.push(l.h.replaceMove(new c.Y(n,1,n,i.length+1),h.yO.normalizeIndentation(S,d,u))),o.unIndentedLinePattern&&o.unIndentedLinePattern.test(t)||(o.increaseIndentPattern&&o.increaseIndentPattern.test(r)?(f=p(f),S=f):S=o.indentNextLinePattern&&o.indentNextLinePattern.test(r)?p(S):f)}return v}class C extends r.R6{constructor(){super({id:C.ID,label:n.N("indentationToSpaces","Convert Indentation to Spaces"),alias:"Convert Indentation to Spaces",precondition:u.u.writable})}run(e,t){let i=t.getModel();if(!i)return;let n=i.getOptions(),o=t.getSelection();if(!o)return;const s=new D(o,n.tabSize);t.pushUndoStop(),t.executeCommands(this.id,[s]),t.pushUndoStop(),i.updateOptions({insertSpaces:!0})}}C.ID="editor.action.indentationToSpaces";class b extends r.R6{constructor(){super({id:b.ID,label:n.N("indentationToTabs","Convert Indentation to Tabs"),alias:"Convert Indentation to Tabs",precondition:u.u.writable})}run(e,t){let i=t.getModel();if(!i)return;let n=i.getOptions(),o=t.getSelection();if(!o)return;const s=new T(o,n.tabSize);t.pushUndoStop(),t.executeCommands(this.id,[s]),t.pushUndoStop(),i.updateOptions({insertSpaces:!1})}}b.ID="editor.action.indentationToTabs";class S extends r.R6{constructor(e,t){super(t),this.insertSpaces=e}run(e,t){const i=e.get(f.eJ),o=e.get(p.q);let s=t.getModel();if(!s)return;let r=o.getCreationOptions(s.getLanguageIdentifier().language,s.uri,s.isForSimpleWidget);const a=[1,2,3,4,5,6,7,8].map((e=>({id:e.toString(),label:e.toString(),description:e===r.tabSize?n.N("configuredTabSize","Configured Tab Size"):void 0}))),l=Math.min(s.getOptions().tabSize-1,7);setTimeout((()=>{i.pick(a,{placeHolder:n.N({key:"selectTabWidth",comment:["Tab corresponds to the tab key"]},"Select Tab Size for Current File"),activeItem:a[l]}).then((e=>{e&&s&&!s.isDisposed()&&s.updateOptions({tabSize:parseInt(e.label,10),insertSpaces:this.insertSpaces})}))}),50)}}class _ extends S{constructor(){super(!1,{id:_.ID,label:n.N("indentUsingTabs","Indent Using Tabs"),alias:"Indent Using Tabs",precondition:void 0})}}_.ID="editor.action.indentUsingTabs";class L extends S{constructor(){super(!0,{id:L.ID,label:n.N("indentUsingSpaces","Indent Using Spaces"),alias:"Indent Using Spaces",precondition:void 0})}}L.ID="editor.action.indentUsingSpaces";class w extends r.R6{constructor(){super({id:w.ID,label:n.N("detectIndentation","Detect Indentation from Content"),alias:"Detect Indentation from Content",precondition:void 0})}run(e,t){const i=e.get(p.q);let n=t.getModel();if(!n)return;let o=i.getCreationOptions(n.getLanguageIdentifier().language,n.uri,n.isForSimpleWidget);n.detectIndentation(o.insertSpaces,o.tabSize)}}w.ID="editor.action.detectIndentation";class x extends r.R6{constructor(){super({id:"editor.action.reindentlines",label:n.N("editor.reindentlines","Reindent Lines"),alias:"Reindent Lines",precondition:u.u.writable})}run(e,t){let i=t.getModel();if(!i)return;let n=v(i,1,i.getLineCount());n.length>0&&(t.pushUndoStop(),t.executeEdits(this.id,n),t.pushUndoStop())}}class I extends r.R6{constructor(){super({id:"editor.action.reindentselectedlines",label:n.N("editor.reindentselectedlines","Reindent Selected Lines"),alias:"Reindent Selected Lines",precondition:u.u.writable})}run(e,t){let i=t.getModel();if(!i)return;let n=t.getSelections();if(null===n)return;let o=[];for(let e of n){let t=e.startLineNumber,n=e.endLineNumber;if(t!==n&&1===e.endColumn&&n--,1===t){if(t===n)continue}else t--;let s=v(i,t,n);o.push(...s)}o.length>0&&(t.pushUndoStop(),t.executeEdits(this.id,o),t.pushUndoStop())}}class N{constructor(e,t){this._initialSelection=t,this._edits=[],this._selectionId=null;for(let t of e)t.range&&"string"==typeof t.text&&this._edits.push(t)}getEditOperations(e,t){for(let e of this._edits)t.addEditOperation(d.e.lift(e.range),e.text);let i=!1;Array.isArray(this._edits)&&1===this._edits.length&&this._initialSelection.isEmpty()&&(this._edits[0].range.startColumn===this._initialSelection.endColumn&&this._edits[0].range.startLineNumber===this._initialSelection.endLineNumber?(i=!0,this._selectionId=t.trackSelection(this._initialSelection,!0)):this._edits[0].range.endColumn===this._initialSelection.startColumn&&this._edits[0].range.endLineNumber===this._initialSelection.startLineNumber&&(i=!0,this._selectionId=t.trackSelection(this._initialSelection,!1))),i||(this._selectionId=t.trackSelection(this._initialSelection))}computeCursorState(e,t){return t.getTrackedSelection(this._selectionId)}}class y{constructor(e){this.callOnDispose=new o.SL,this.callOnModel=new o.SL,this.editor=e,this.callOnDispose.add(e.onDidChangeConfiguration((()=>this.update()))),this.callOnDispose.add(e.onDidChangeModel((()=>this.update()))),this.callOnDispose.add(e.onDidChangeModelLanguage((()=>this.update())))}update(){this.callOnModel.clear(),this.editor.getOption(9)<4||this.editor.getOption(45)||this.editor.hasModel()&&this.callOnModel.add(this.editor.onDidPaste((({range:e})=>{this.trigger(e)})))}trigger(e){let t=this.editor.getSelections();if(null===t||t.length>1)return;const i=this.editor.getModel();if(!i)return;if(!i.isCheapToTokenize(e.getStartPosition().lineNumber))return;const n=this.editor.getOption(9),{tabSize:o,indentSize:r,insertSpaces:l}=i.getOptions();let c=[],u={shiftIndent:e=>a.U.shiftIndent(e,e.length+1,o,r,l),unshiftIndent:e=>a.U.unshiftIndent(e,e.length+1,o,r,l)},h=e.startLineNumber;for(;h<=e.endLineNumber&&this.shouldIgnoreLine(i,h);)h++;if(h>e.endLineNumber)return;let p=i.getLineContent(h);if(!/\S/.test(p.substring(0,e.startColumn-1))){let e=g.zu.getGoodIndentForLine(n,i,i.getLanguageIdentifier().id,h,u);if(null!==e){let t=s.V8(p),n=m.Y(e,o);if(n!==m.Y(t,o)){let e=m.J(n,o,l);c.push({range:new d.e(h,1,h,t.length+1),text:e}),p=e+p.substr(t.length)}else{let e=g.zu.getIndentMetadata(i,h);if(0===e||8===e)return}}}const f=h;for(;h<e.endLineNumber&&!/\S/.test(i.getLineContent(h+1));)h++;if(h!==e.endLineNumber){let t={getLineTokens:e=>i.getLineTokens(e),getLanguageIdentifier:()=>i.getLanguageIdentifier(),getLanguageIdAtPosition:(e,t)=>i.getLanguageIdAtPosition(e,t),getLineContent:e=>e===f?p:i.getLineContent(e)},r=g.zu.getGoodIndentForLine(n,t,i.getLanguageIdentifier().id,h+1,u);if(null!==r){let t=m.Y(r,o),n=m.Y(s.V8(i.getLineContent(h+1)),o);if(t!==n){let r=t-n;for(let t=h+1;t<=e.endLineNumber;t++){let e=i.getLineContent(t),n=s.V8(e),a=m.Y(n,o)+r,u=m.J(a,o,l);u!==n&&c.push({range:new d.e(t,1,t,n.length+1),text:u})}}}}if(c.length>0){this.editor.pushUndoStop();let e=new N(c,this.editor.getSelection());this.editor.executeCommand("autoIndentOnPaste",e),this.editor.pushUndoStop()}}shouldIgnoreLine(e,t){e.forceTokenization(t);let i=e.getLineFirstNonWhitespaceColumn(t);if(0===i)return!0;let n=e.getLineTokens(t);if(n.getCount()>0){let e=n.findTokenIndexAtOffset(i);if(e>=0&&1===n.getStandardTokenType(e))return!0}return!1}dispose(){this.callOnDispose.dispose(),this.callOnModel.dispose()}}function M(e,t,i,n){if(1===e.getLineCount()&&1===e.getLineMaxColumn(1))return;let o="";for(let e=0;e<i;e++)o+=" ";let s=new RegExp(o,"gi");for(let i=1,r=e.getLineCount();i<=r;i++){let r=e.getLineFirstNonWhitespaceColumn(i);if(0===r&&(r=e.getLineMaxColumn(i)),1===r)continue;const a=new d.e(i,1,i,r),l=e.getValueInRange(a),c=n?l.replace(/\t/gi,o):l.replace(s,"\t");t.addEditOperation(a,c)}}y.ID="editor.contrib.autoIndentOnPaste";class D{constructor(e,t){this.selection=e,this.tabSize=t,this.selectionId=null}getEditOperations(e,t){this.selectionId=t.trackSelection(this.selection),M(e,t,this.tabSize,!0)}computeCursorState(e,t){return t.getTrackedSelection(this.selectionId)}}class T{constructor(e,t){this.selection=e,this.tabSize=t,this.selectionId=null}getEditOperations(e,t){this.selectionId=t.trackSelection(this.selection),M(e,t,this.tabSize,!1)}computeCursorState(e,t){return t.getTrackedSelection(this.selectionId)}}(0,r._K)(y.ID,y),(0,r.Qr)(C),(0,r.Qr)(b),(0,r.Qr)(_),(0,r.Qr)(L),(0,r.Qr)(w),(0,r.Qr)(x),(0,r.Qr)(I)},87586:function(e,t,i){i.r(t),i.d(t,{getInlayHints:function(){return I},InlayHintsController:function(){return N}});var n=i(15393),o=i(17301),s=i(89954),r=i(5976),a=i(16830),l=i(11640),d=i(44101),c=i(9488),u=i(73910),h=i(71050),g=i(97781),p=i(24314),m=i(21036),f=i(94565),v=i(70666),C=i(98401),b=i(88216),S=i(50187),_=i(33108),L=function(e,t,i,n){var o,s=arguments.length,r=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(s<3?o(r):s>3?o(t,i,r):o(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},w=function(e,t){return function(i,n){t(i,n,e)}},x=function(e,t,i,n){return new(i||(i=Promise))((function(o,s){function r(e){try{l(n.next(e))}catch(e){s(e)}}function a(e){try{l(n.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}l((n=n.apply(e,t||[])).next())}))};function I(e,t,i){return x(this,void 0,void 0,(function*(){const n=[],s=d.mX.ordered(e).reverse(),r=(0,c.xH)(s.map((s=>t.map((t=>Promise.resolve(s.provideInlayHints(e,t,i)).then((e=>{e&&n.push({list:e,provider:s})}),(e=>{(0,o.Cp)(e)})))))));return yield Promise.all(r),n}))}let N=class{constructor(e,t,i,n){this._editor=e,this._codeEditorService=t,this._themeService=i,this._configurationService=n,this._disposables=new r.SL,this._sessionDisposables=new r.SL,this._getInlayHintsDelays=new m.Y(d.mX,25,2500),this._decorationsTypeIds=[],this._decorationIds=[],this._disposables.add(d.mX.onDidChange((()=>this._update()))),this._disposables.add(i.onDidColorThemeChange((()=>this._update()))),this._disposables.add(e.onDidChangeModel((()=>this._update()))),this._disposables.add(e.onDidChangeModelLanguage((()=>this._update()))),this._disposables.add(e.onDidChangeConfiguration((e=>{e.hasChanged(125)&&this._update()}))),this._update()}dispose(){this._sessionDisposables.dispose(),this._removeAllDecorations(),this._disposables.dispose()}_update(){if(this._sessionDisposables.clear(),!this._editor.getOption(125).enabled)return void this._removeAllDecorations();const e=this._editor.getModel();if(!e||!d.mX.has(e))return void this._removeAllDecorations();const t=new n.pY((()=>x(this,void 0,void 0,(function*(){const i=Date.now(),n=new h.A;this._sessionDisposables.add((0,r.OF)((()=>n.dispose(!0))));const o=this._editor.getVisibleRangesPlusViewportAboveBelow(),s=yield I(e,o,n.token),a=this._getInlayHintsDelays.update(e,Date.now()-i);t.delay=a,this._updateHintsDecorators(s)}))),this._getInlayHintsDelays.get(e));this._sessionDisposables.add(t),this._sessionDisposables.add(this._editor.onDidChangeModelContent((()=>t.schedule()))),this._disposables.add(this._editor.onDidScrollChange((()=>t.schedule()))),t.schedule();const i=new r.SL;this._sessionDisposables.add(i);for(const n of d.mX.all(e))"function"==typeof n.onDidChangeInlayHints&&i.add(n.onDidChangeInlayHints((()=>t.schedule())))}_updateHintsDecorators(e){const{fontSize:t,fontFamily:i}=this._getLayoutInfo(),n=this._themeService.getColorTheme().getColor(u.Pp),o=this._themeService.getColorTheme().getColor(u.VV),r=[],a=[],l="--inlayHintsFontFamily";this._editor.getContainerDomNode().style.setProperty(l,i);const d=this._configurationService.getValue("editor.useInjectedText"),c=void 0===d||!!d;for(const{list:i}of e)for(let e=0;e<i.length&&a.length<500;e++){const{text:d,position:u,whitespaceBefore:h,whitespaceAfter:g}=i[e],m=h?t/3|0:0,f=g?t/3|0:0,v={contentText:y(d),backgroundColor:`${n}`,color:`${o}`,margin:`0px ${f}px 0px ${m}px`,fontSize:`${t}px`,fontFamily:`var(${l})`,padding:`0px ${t/4|0}px`,borderRadius:(t/4|0)+"px"},C="inlayHints-"+(0,s.vp)(v).toString(16);this._codeEditorService.registerDecorationType("inlay-hints-controller",C,c?{beforeInjectedText:Object.assign(Object.assign({},v),{affectsLetterSpacing:!0})}:{before:v},void 0,this._editor),r.push(C);const b=this._codeEditorService.resolveDecorationOptions(C,!0);a.push({range:p.e.fromPositions(u),options:b})}this._decorationsTypeIds.forEach(this._codeEditorService.removeDecorationType,this._codeEditorService),this._decorationsTypeIds=r,this._decorationIds=this._editor.deltaDecorations(this._decorationIds,a)}_getLayoutInfo(){const e=this._editor.getOption(125),t=this._editor.getOption(43);let i=e.fontSize;(!i||i<5||i>t)&&(i=.9*t|0);return{fontSize:i,fontFamily:e.fontFamily||this._editor.getOption(40)}}_removeAllDecorations(){this._decorationIds=this._editor.deltaDecorations(this._decorationIds,[]),this._decorationsTypeIds.forEach(this._codeEditorService.removeDecorationType,this._codeEditorService),this._decorationsTypeIds=[]}};function y(e){return e.replace(/[ \t]/g," ")}N.ID="editor.contrib.InlayHints",N=L([w(1,l.$),w(2,g.XE),w(3,_.Ui)],N),(0,a._K)(N.ID,N),f.P.registerCommand("_executeInlayHintProvider",((e,...t)=>x(void 0,void 0,void 0,(function*(){const[i,n]=t;(0,C.p_)(v.o.isUri(i)),(0,C.p_)(p.e.isIRange(n));const o=yield e.get(b.S).createModelReference(i);try{const e=yield I(o.object.textEditorModel,[p.e.lift(n)],h.T.None);return(0,c.xH)(e.map((e=>e.list))).sort(((e,t)=>S.L.compare(e.position,t.position)))}finally{o.dispose()}}))))},55339:function(e,t,i){i.r(t),i.d(t,{ActiveGhostTextController:function(){return fe},GhostTextController:function(){return pe},ShowNextInlineSuggestionAction:function(){return be},ShowPreviousInlineSuggestionAction:function(){return Se},TriggerInlineSuggestionAction:function(){return _e},commitInlineSuggestionAction:function(){return Ce}});var n,o=i(5976),s=i(16830),r=i(29102),a=i(65321),l=i(24314),d=i(11640),c=i(97295),u=i(77736),h=i(64141),g=i(50072),p=i(89052),m=i(78411),f=i(50187),v=i(97781),C=i(27869),b=i(41264),S=i(33181),_=i(92550),L=i(38819),w=i(72065),x=function(e,t,i,n){var o,s=arguments.length,r=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(s<3?o(r):s>3?o(t,i,r):o(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},I=function(e,t){return function(i,n){t(i,n,e)}};const N=null===(n=window.trustedTypes)||void 0===n?void 0:n.createPolicy("editorGhostText",{createHTML:e=>e});let y=class extends o.JT{constructor(e,t,i){super(),this.editor=e,this.model=t,this.instantiationService=i,this.disposed=!1,this.partsWidget=this._register(this.instantiationService.createInstance(M,this.editor)),this.additionalLinesWidget=this._register(new T(this.editor)),this.viewMoreContentWidget=void 0,this._register(this.editor.onDidChangeConfiguration((e=>{(e.hasChanged(27)||e.hasChanged(104)||e.hasChanged(87)||e.hasChanged(81)||e.hasChanged(42)||e.hasChanged(41)||e.hasChanged(57))&&this.update()}))),this._register((0,o.OF)((()=>{var e;this.disposed=!0,this.update(),null===(e=this.viewMoreContentWidget)||void 0===e||e.dispose(),this.viewMoreContentWidget=void 0}))),this._register(t.onDidChange((()=>{this.update()}))),this.update()}shouldShowHoverAtViewZone(e){return this.additionalLinesWidget.viewZoneId===e}update(){var e;const t=this.model.ghostText;if(!this.editor.hasModel()||!t||this.disposed)return this.partsWidget.clear(),void this.additionalLinesWidget.clear();const i=new Array,n=new Array;function o(e,t){if(n.length>0){const i=n[n.length-1];t&&i.decorations.push(new _.Kp(i.content.length+1,i.content.length+1+e[0].length,t,0)),i.content+=e[0],e=e.slice(1)}for(const i of e)n.push({content:i,decorations:t?[new _.Kp(1,i.length+1,t,0)]:[]})}const s=this.editor.getModel().getLineContent(t.lineNumber);let r;this.editor.getModel().getLineTokens(t.lineNumber);let a=0;for(const e of t.parts){let t=e.lines;void 0===r?(i.push({column:e.column,text:t[0]}),t=t.slice(1)):o([s.substring(a,e.column-1)],void 0),t.length>0&&(o(t,"ghost-text"),void 0===r&&e.column<=s.length&&(r=e.column)),a=e.column-1}void 0!==r&&o([s.substring(a)],void 0),this.partsWidget.setParts(t.lineNumber,i,void 0!==r?{column:r,length:s.length+1-r}:void 0),this.additionalLinesWidget.updateLines(t.lineNumber,n,t.additionalReservedLineCount),t.parts.some((e=>e.lines.length<0))?this.viewMoreContentWidget=this.renderViewMoreLines(new f.L(t.lineNumber,this.editor.getModel().getLineMaxColumn(t.lineNumber)),"",0):(null===(e=this.viewMoreContentWidget)||void 0===e||e.dispose(),this.viewMoreContentWidget=void 0)}renderViewMoreLines(e,t,i){const n=this.editor.getOption(41),s=document.createElement("div");s.className="suggest-preview-additional-widget",p.V.applyFontInfoSlow(s,n);const r=document.createElement("span");r.className="content-spacer",r.append(t),s.append(r);const l=document.createElement("span");l.className="content-newline suggest-preview-text",l.append("⏎  "),s.append(l);const d=new o.SL,c=document.createElement("div");return c.className="button suggest-preview-text",c.append(`+${i} lines…`),d.add(a.mu(c,"mousedown",(e=>{var t;null===(t=this.model)||void 0===t||t.setExpanded(!0),e.preventDefault(),this.editor.focus()}))),s.append(c),new R(this.editor,e,s,d)}};y=x([I(2,w.TG)],y);let M=class{constructor(e,t,i,n){this.editor=e,this.codeEditorService=t,this.themeService=i,this.contextKeyService=n,this.decorationIds=[],this.disposableStore=new o.SL}dispose(){this.clear(),this.disposableStore.dispose()}clear(){this.editor.deltaDecorations(this.decorationIds,[]),this.disposableStore.clear()}setParts(e,t,i){this.disposableStore.clear();const n=this.themeService.getColorTheme(),o=n.getColor(C.N5);let s,r;o&&(s=String(o.rgba.a),r=b.Il.Format.CSS.format(D(o)));const a=n.getColor(C.x3);let d;a&&(d=`2px dashed ${a}`);const c=this.editor.getModel();if(!c)return;const{tabSize:u}=c.getOptions(),h=c.getLineContent(e)||"";let g=0,p="";const m=new Array;i&&m.push({range:l.e.fromPositions(new f.L(e,i.column),new f.L(e,i.column+i.length)),options:{inlineClassName:"ghost-text-hidden",description:"ghost-text-hidden"}});const v=this.contextKeyService.getContextKeyValue("config.editor.useInjectedText"),S=void 0===v||!!v;this.decorationIds=this.editor.deltaDecorations(this.decorationIds,t.map((t=>{p+=h.substring(g,t.column-1),g=t.column-1;const i=S?t.text:this.renderSingleLineText(t.text,p,u,!1),n=this.disposableStore.add(function(e,t,i,n){const o=i+E++;return e.registerDecorationType(t,o,n),{dispose(){e.removeDecorationType(o)},resolve:()=>e.resolveDecorationOptions(o,!0)}}(this.codeEditorService,"ghost-text","0-ghost-text-",{after:{contentText:i,opacity:s,color:r,border:d}}));return{range:l.e.fromPositions(new f.L(e,t.column)),options:S?{description:"ghost-text",after:{content:i,inlineClassName:"ghost-text-decoration"}}:Object.assign({},n.resolve())}})).concat(m))}renderSingleLineText(e,t,i,n){const o=t+e,s=S.io.visibleColumnsByColumns(o,i);let r="",a=t.length+1;for(const t of e){if("\t"===t){const e=s[a+1]-s[a];if(n){r+="→";for(let t=1;t<e;t++)r+=" "}else for(let t=0;t<e;t++)r+=" "}else r+=" "===t?n?"·":" ":t;a+=1}return r}};function D(e){const{r:t,b:i,g:n}=e.rgba;return new b.Il(new b.VS(t,n,i,255))}M=x([I(1,d.$),I(2,v.XE),I(3,L.i6)],M);class T{constructor(e){this.editor=e,this._viewZoneId=void 0}get viewZoneId(){return this._viewZoneId}dispose(){this.clear()}clear(){this.editor.changeViewZones((e=>{this._viewZoneId&&(e.removeZone(this._viewZoneId),this._viewZoneId=void 0)}))}updateLines(e,t,i){const n=this.editor.getModel();if(!n)return;const{tabSize:o}=n.getOptions();this.editor.changeViewZones((n=>{this._viewZoneId&&(n.removeZone(this._viewZoneId),this._viewZoneId=void 0);const s=Math.max(t.length,i);if(s>0){const i=document.createElement("div");!function(e,t,i,n){const o=n.get(27),s=n.get(104),r="none",a=n.get(81),l=n.get(42),d=n.get(41),f=n.get(57),v=(0,g.l$)(1e4);v.appendASCIIString('<div class="suggest-preview-text">');for(let e=0,n=i.length;e<n;e++){const n=i[e],g=n.content;v.appendASCIIString('<div class="view-line'),v.appendASCIIString('" style="top:'),v.appendASCIIString(String(e*f)),v.appendASCIIString('px;width:1000000px;">');const p=c.$i(g),C=c.Ut(g),b=m.A.createEmpty(g);(0,u.d1)(new u.IJ(d.isMonospace&&!o,d.canUseHalfwidthRightwardsArrow,g,!1,p,C,0,b,n.decorations,t,0,d.spaceWidth,d.middotWidth,d.wsmiddotWidth,s,r,a,l!==h.n0.OFF,null),v),v.appendASCIIString("</div>")}v.appendASCIIString("</div>"),p.V.applyFontInfoSlow(e,d);const C=v.build(),b=N?N.createHTML(C):C;e.innerHTML=b}(i,o,t,this.editor.getOptions()),this._viewZoneId=n.addZone({afterLineNumber:e,heightInLines:s,domNode:i})}}))}}let E=0;class R extends o.JT{constructor(e,t,i,n){super(),this.editor=e,this.position=t,this.domNode=i,this.allowEditorOverflow=!1,this.suppressMouseDown=!1,this._register(n),this._register((0,o.OF)((()=>{this.editor.removeContentWidget(this)}))),this.editor.addContentWidget(this)}getId(){return"editor.widget.viewMoreLinesWidget"}getDomNode(){return this.domNode}getPosition(){return{position:this.position,preference:[0]}}}(0,v.Ic)(((e,t)=>{const i=e.getColor(C.N5);if(i){const e=String(i.rgba.a),n=b.Il.Format.CSS.format(D(i));t.addRule(`.monaco-editor .ghost-text-decoration { opacity: ${e}; color: ${n}; }`),t.addRule(`.monaco-editor .suggest-preview-text .ghost-text { opacity: ${e}; color: ${n}; }`)}const n=e.getColor(C.x3);n&&t.addRule(`.monaco-editor .suggest-preview-text .ghost-text { border: 2px dashed ${n}; }`)}));var O=i(63580),A=i(15393),P=i(71050),k=i(17301),F=i(4669),W=i(44101),H=i(69386),U=i(94565),V=i(71513),K=i(2484);class z{constructor(e,t,i=0){this.lineNumber=e,this.parts=t,this.additionalReservedLineCount=i}static equals(e,t){return e===t||!!e&&!!t&&e.equals(t)}equals(e){return this.lineNumber===e.lineNumber&&this.parts.length===e.parts.length&&this.parts.every(((t,i)=>t.equals(e.parts[i])))}}class j{constructor(e,t){this.column=e,this.lines=t}equals(e){return this.column===e.column&&this.lines.length===e.lines.length&&this.lines.every(((t,i)=>t===e.lines[i]))}}class $ extends o.JT{constructor(e){super(),this.editor=e,this._expanded=void 0,this.onDidChangeEmitter=new F.Q5,this.onDidChange=this.onDidChangeEmitter.event,this._register(e.onDidChangeConfiguration((e=>{e.hasChanged(105)&&void 0===this._expanded&&this.onDidChangeEmitter.fire()})))}get expanded(){return void 0===this._expanded||this._expanded}setExpanded(e){this._expanded=!0,this.onDidChangeEmitter.fire()}}var Y=function(e,t,i,n){var o,s=arguments.length,r=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(s<3?o(r):s>3?o(t,i,r):o(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},q=function(e,t){return function(i,n){t(i,n,e)}},G=function(e,t,i,n){return new(i||(i=Promise))((function(o,s){function r(e){try{l(n.next(e))}catch(e){s(e)}}function a(e){try{l(n.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}l((n=n.apply(e,t||[])).next())}))};let Q,B=class extends o.JT{constructor(e,t){super(),this.editor=e,this.commandService=t,this.onDidChangeEmitter=new F.Q5,this.onDidChange=this.onDidChangeEmitter.event,this.completionSession=this._register(new o.XK),this.active=!1,this._register(t.onDidExecuteCommand((t=>{new Set([s.n_.id,s.kz.id,V.CoreEditingCommands.Tab.id,V.CoreEditingCommands.DeleteLeft.id,V.CoreEditingCommands.DeleteRight.id]).has(t.commandId)&&e.hasTextFocus()&&this.handleUserInput()}))),this._register(this.editor.onDidType((e=>{this.handleUserInput()}))),this._register(this.editor.onDidChangeCursorPosition((e=>{this.session&&!this.session.isValid&&this.hide()})))}handleUserInput(){this.session&&!this.session.isValid&&this.hide(),setTimeout((()=>{this.startSessionIfTriggered()}),0)}get session(){return this.completionSession.value}get ghostText(){var e;return null===(e=this.session)||void 0===e?void 0:e.ghostText}get minReservedLineCount(){return this.session?this.session.minReservedLineCount:0}get expanded(){return!!this.session&&this.session.expanded}setExpanded(e){var t;null===(t=this.session)||void 0===t||t.setExpanded(e)}setActive(e){var t;this.active=e,e&&(null===(t=this.session)||void 0===t||t.scheduleAutomaticUpdate())}startSessionIfTriggered(){this.editor.getOption(53).enabled&&(this.session&&this.session.isValid||this.trigger())}trigger(){this.completionSession.value||(this.completionSession.value=new J(this.editor,this.editor.getPosition(),(()=>this.active),this.commandService),this.completionSession.value.takeOwnership(this.completionSession.value.onDidChange((()=>{this.onDidChangeEmitter.fire()}))))}hide(){this.completionSession.clear(),this.onDidChangeEmitter.fire()}commitCurrentSuggestion(){var e;null===(e=this.session)||void 0===e||e.commitCurrentCompletion()}showNext(){var e;null===(e=this.session)||void 0===e||e.showNextInlineCompletion()}showPrevious(){var e;null===(e=this.session)||void 0===e||e.showPreviousInlineCompletion()}hasMultipleInlineCompletions(){var e;return G(this,void 0,void 0,(function*(){const t=yield null===(e=this.session)||void 0===e?void 0:e.hasMultipleInlineCompletions();return void 0!==t&&t}))}};B=Y([q(1,U.H)],B);class J extends ${constructor(e,t,i,n){let s;super(e),this.triggerPosition=t,this.shouldUpdate=i,this.commandService=n,this.minReservedLineCount=0,this.updateOperation=this._register(new o.XK),this.cache=this._register(new o.XK),this.updateSoon=this._register(new A.pY((()=>this.update(W.bw.Automatic)),50)),this.textModel=this.editor.getModel(),this.currentlySelectedCompletionId=void 0,this._register(this.onDidChange((()=>{const e=this.currentCompletion;if(e&&e.sourceInlineCompletion!==s){s=e.sourceInlineCompletion;const t=e.sourceProvider;t.handleItemDidShow&&t.handleItemDidShow(e.sourceInlineCompletions,s)}}))),this._register(this.editor.onDidChangeCursorPosition((e=>{this.cache.value&&this.onDidChangeEmitter.fire()}))),this._register(this.editor.onDidChangeModelContent((e=>{if(this.cache.value){let e=!1;for(const t of this.cache.value.completions){const i=this.textModel.getDecorationRange(t.decorationId);i?t.synchronizedRange.equalsRange(i)||(e=!0,t.synchronizedRange=i):(0,k.dL)(new Error("Decoration has no range"))}e&&this.onDidChangeEmitter.fire()}this.scheduleAutomaticUpdate()}))),this._register(W.zu.onDidChange((()=>{this.updateSoon.schedule()}))),this.scheduleAutomaticUpdate()}fixAndGetIndexOfCurrentSelection(){if(!this.currentlySelectedCompletionId||!this.cache.value)return 0;if(0===this.cache.value.completions.length)return 0;const e=this.cache.value.completions.findIndex((e=>e.semanticId===this.currentlySelectedCompletionId));return-1===e?(this.currentlySelectedCompletionId=void 0,0):e}get currentCachedCompletion(){if(this.cache.value)return this.cache.value.completions[this.fixAndGetIndexOfCurrentSelection()]}showNextInlineCompletion(){var e;return G(this,void 0,void 0,(function*(){yield this.ensureUpdateWithExplicitContext();const t=(null===(e=this.cache.value)||void 0===e?void 0:e.completions)||[];if(t.length>0){const e=(this.fixAndGetIndexOfCurrentSelection()+1)%t.length;this.currentlySelectedCompletionId=t[e].semanticId}else this.currentlySelectedCompletionId=void 0;this.onDidChangeEmitter.fire()}))}showPreviousInlineCompletion(){var e;return G(this,void 0,void 0,(function*(){yield this.ensureUpdateWithExplicitContext();const t=(null===(e=this.cache.value)||void 0===e?void 0:e.completions)||[];if(t.length>0){const e=(this.fixAndGetIndexOfCurrentSelection()+t.length-1)%t.length;this.currentlySelectedCompletionId=t[e].semanticId}else this.currentlySelectedCompletionId=void 0;this.onDidChangeEmitter.fire()}))}ensureUpdateWithExplicitContext(){var e;return G(this,void 0,void 0,(function*(){this.updateOperation.value?this.updateOperation.value.triggerKind===W.bw.Explicit?yield this.updateOperation.value.promise:yield this.update(W.bw.Explicit):(null===(e=this.cache.value)||void 0===e?void 0:e.triggerKind)!==W.bw.Explicit&&(yield this.update(W.bw.Explicit))}))}hasMultipleInlineCompletions(){var e;return G(this,void 0,void 0,(function*(){return yield this.ensureUpdateWithExplicitContext(),((null===(e=this.cache.value)||void 0===e?void 0:e.completions.length)||0)>1}))}get ghostText(){const e=this.currentCompletion,t=this.editor.getOptions().get(53).mode;return e?te(e,this.editor.getModel(),t,this.editor.getPosition()):void 0}get currentCompletion(){const e=this.currentCachedCompletion;if(e)return{text:e.inlineCompletion.text,range:e.synchronizedRange,command:e.inlineCompletion.command,sourceProvider:e.inlineCompletion.sourceProvider,sourceInlineCompletions:e.inlineCompletion.sourceInlineCompletions,sourceInlineCompletion:e.inlineCompletion.sourceInlineCompletion}}get isValid(){return this.editor.getPosition().lineNumber===this.triggerPosition.lineNumber}scheduleAutomaticUpdate(){this.updateOperation.clear(),this.updateSoon.schedule()}update(e){return G(this,void 0,void 0,(function*(){if(!this.shouldUpdate())return;const t=this.editor.getPosition(),i=(0,A.PG)((i=>G(this,void 0,void 0,(function*(){let n;try{n=yield function(e,t,i,n=P.T.None){return G(this,void 0,void 0,(function*(){const o=function(e,t){const i=t.getWordAtPosition(e),n=t.getLineMaxColumn(e.lineNumber);return i?new l.e(e.lineNumber,i.startColumn,e.lineNumber,n):l.e.fromPositions(e,e.with(void 0,n))}(e,t),s=W.zu.all(t),r=yield Promise.all(s.map((o=>G(this,void 0,void 0,(function*(){const s=yield o.provideInlineCompletions(t,e,i,n);return{completions:s,provider:o,dispose:()=>{s&&o.freeInlineCompletions(s)}}}))))),a=new Map;for(const e of r){const t=e.completions;if(t)for(const i of t.items.map((i=>({text:i.text,range:i.range?l.e.lift(i.range):o,command:i.command,sourceProvider:e.provider,sourceInlineCompletions:t,sourceInlineCompletion:i}))))i.range.startLineNumber===i.range.endLineNumber&&a.set(JSON.stringify({text:i.text,range:i.range}),i)}return{items:[...a.values()],dispose:()=>{for(const e of r)e.dispose()}}}))}(t,this.editor.getModel(),{triggerKind:e},i)}catch(e){return void(0,k.dL)(e)}i.isCancellationRequested||(this.cache.value=new X(this.editor,n,(()=>this.onDidChangeEmitter.fire()),e),this.onDidChangeEmitter.fire())})))),n=new Z(i,e);this.updateOperation.value=n,yield i,this.updateOperation.value===n&&this.updateOperation.clear()}))}takeOwnership(e){this._register(e)}commitCurrentCompletion(){if(!this.ghostText)return;const e=this.currentCompletion;e&&this.commit(e)}commit(e){const t=this.cache.clearAndLeak();this.editor.executeEdits("inlineSuggestion.accept",[H.h.replaceMove(e.range,e.text)]),e.command?this.commandService.executeCommand(e.command.id,...e.command.arguments||[]).finally((()=>{null==t||t.dispose()})).then(void 0,k.Cp):null==t||t.dispose(),this.onDidChangeEmitter.fire()}}class Z{constructor(e,t){this.promise=e,this.triggerKind=t}dispose(){this.promise.cancel()}}class X extends o.JT{constructor(e,t,i,n){super(),this.triggerKind=n;const s=e.deltaDecorations([],t.items.map((e=>({range:e.range,options:{description:"inline-completion-tracking-range"}}))));this._register((0,o.OF)((()=>{e.deltaDecorations(s,[])}))),this.completions=t.items.map(((e,t)=>new ee(e,s[t]))),this._register(e.onDidChangeModelContent((()=>{let t=!1;const n=e.getModel();for(const e of this.completions){const i=n.getDecorationRange(e.decorationId);i?e.synchronizedRange.equalsRange(i)||(t=!0,e.synchronizedRange=i):(0,k.dL)(new Error("Decoration has no range"))}t&&i()}))),this._register(t)}}class ee{constructor(e,t){this.inlineCompletion=e,this.decorationId=t,this.semanticId=JSON.stringify({text:this.inlineCompletion.text,startLine:this.inlineCompletion.range.startLineNumber,startColumn:this.inlineCompletion.range.startColumn,command:this.inlineCompletion.command}),this.synchronizedRange=e.range}}function te(e,t,i,n){if(e.range.startLineNumber!==e.range.endLineNumber)return;const o=t.getValueInRange(e.range),s=function(e,t){if((null==Q?void 0:Q.originalValue)===e&&(null==Q?void 0:Q.newValue)===t)return null==Q?void 0:Q.changes;{const i=function(e,t){function i(e){let t=0;for(let i=0,n=e.length;i<n;i++){const n=e.charCodeAt(i);n>t&&(t=n)}return t}const n=Math.max(i(e),i(t));function o(e){if(e<0)throw new Error("unexpected");return n+e+1}function s(e){let t=0,i=0;const n=new Int32Array(e.length);for(let s=0,r=e.length;s<r;s++){const r=100*i+t;"("===e[s]?(n[s]=o(2*r),t++):")"===e[s]?(n[s]=o(2*r+1),1===t&&i++,t=Math.max(t-1,0)):n[s]=e.charCodeAt(s)}return n}const r=s(e),a=s(t);return new K.Hs({getElements:()=>r},{getElements:()=>a}).ComputeDiff(!1).changes}(e,t);return Q={originalValue:e,newValue:t,changes:i},i}}(o,e.text),r=e.range.startLineNumber,a=new Array;if("prefix"===i){const e=s.filter((e=>0===e.originalLength));if(e.length>1||1===e.length&&e[0].originalStart!==o.length)return}for(const l of s){const s=e.range.startColumn+l.originalStart+l.originalLength;if("subwordSmart"===i&&n&&n.lineNumber===e.range.startLineNumber&&s<n.column)return;if(l.originalLength>0){const e=o.substr(l.originalStart,l.originalLength),i=t.getLineFirstNonWhitespaceColumn(r);if(!/^(\t| )*$/.test(e)||!(0===i||s<=i))return}if(0===l.modifiedLength)continue;const d=e.text.substr(l.modifiedStart,l.modifiedLength),u=c.uq(d);a.push(new j(s,u))}return new z(r,a,0)}var ie=i(63472),ne=i(22470),oe=i(68261);class se extends ${constructor(e){super(e),this.isSuggestWidgetVisible=!1,this.currentGhostText=void 0,this._isActive=!1,this.isShiftKeyPressed=!1,this.minReservedLineCount=0,this.setInactiveDelayed=this._register(new A.pY((()=>{this.isSuggestWidgetVisible||this.isActive&&(this._isActive=!1,this.onDidChangeEmitter.fire())}),100));const t=oe.SuggestController.get(this.editor);if(t){let e=!1;const i=()=>{e||(e=!0,this._register(t.widget.value.onDidShow((()=>{this.isSuggestWidgetVisible=!0,this._isActive=!0,this.updateFromSuggestion()}))),this._register(t.widget.value.onDidHide((()=>{this.isSuggestWidgetVisible=!1,this.setInactiveDelayed.schedule(),this.minReservedLineCount=0,this.updateFromSuggestion()}))),this._register(t.widget.value.onDidFocus((()=>{this.isSuggestWidgetVisible=!0,this._isActive=!0,this.updateFromSuggestion()}))))};this._register(F.ju.once(t.model.onDidTrigger)((e=>{i()})))}this.updateFromSuggestion(),this._register(this.editor.onDidChangeCursorPosition((e=>{this.isSuggestionPreviewEnabled()&&this.update()}))),this._register((0,o.OF)((()=>{const e=oe.SuggestController.get(this.editor);e&&e.stopForceRenderingAbove()}))),this._register(e.onKeyDown((e=>{e.shiftKey&&!this.isShiftKeyPressed&&(this.isShiftKeyPressed=!0,this.updateFromSuggestion())}))),this._register(e.onKeyUp((e=>{e.shiftKey&&this.isShiftKeyPressed&&(this.isShiftKeyPressed=!1,this.updateFromSuggestion())})))}get isActive(){return this._isActive}setExpanded(e){super.setExpanded(e),this.updateFromSuggestion()}isSuggestionPreviewEnabled(){return this.editor.getOption(105).preview}updateFromSuggestion(){const e=oe.SuggestController.get(this.editor);if(!e)return void this.setCurrentInlineCompletion(void 0);if(!this.isSuggestWidgetVisible)return void this.setCurrentInlineCompletion(void 0);const t=e.widget.value.getFocusedItem();t?this.setCurrentInlineCompletion(function(e,t,i,n){const o=i.item;if(Array.isArray(o.completion.additionalTextEdits))return{text:"",range:l.e.fromPositions(t,t)};let{insertText:s}=o.completion;if(4&o.completion.insertTextRules){const i=(new ie.Yj).parse(s),n=e.editor.getModel();ne.l.adjustWhitespace(n,t,i,!0,!0),s=i.toString()}const r=e.getOverwriteInfo(o,n);return{text:s,range:l.e.fromPositions(t.delta(0,-r.overwriteBefore),t.delta(0,Math.max(r.overwriteAfter,0)))}}(e,this.editor.getPosition(),t,this.isShiftKeyPressed)):this.setCurrentInlineCompletion(void 0)}setCurrentInlineCompletion(e){this.currentCompletion=e,this.update()}update(){const e=this.currentCompletion,t=this.editor.getOptions().get(105).previewMode;this.setGhostText(e?te(e,this.editor.getModel(),t,this.editor.getPosition())||new z(e.range.endLineNumber,[],this.minReservedLineCount):void 0)}setGhostText(e){if(z.equals(this.currentGhostText,e))return;this.currentGhostText=e,this.currentGhostText&&this.expanded&&(this.minReservedLineCount=Math.max(this.minReservedLineCount,...this.currentGhostText.parts.map((e=>e.lines.length-1))));const t=oe.SuggestController.get(this.editor);t&&(this.minReservedLineCount>=1&&this.isSuggestionPreviewEnabled()?t.forceRenderingAbove():t.stopForceRenderingAbove()),this.onDidChangeEmitter.fire()}get ghostText(){return this.isSuggestionPreviewEnabled()?this.currentGhostText:void 0}}var re=function(e,t,i,n){var o,s=arguments.length,r=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(s<3?o(r):s>3?o(t,i,r):o(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},ae=function(e,t){return function(i,n){t(i,n,e)}},le=function(e,t,i,n){return new(i||(i=Promise))((function(o,s){function r(e){try{l(n.next(e))}catch(e){s(e)}}function a(e){try{l(n.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}l((n=n.apply(e,t||[])).next())}))};class de extends o.JT{constructor(){super(...arguments),this.onDidChangeEmitter=new F.Q5,this.onDidChange=this.onDidChangeEmitter.event,this.hasCachedGhostText=!1,this.currentModelRef=this._register(new o.XK)}get targetModel(){var e;return null===(e=this.currentModelRef.value)||void 0===e?void 0:e.object}setTargetModel(e){var t,i,n;(null===(t=this.currentModelRef.value)||void 0===t?void 0:t.object)!==e&&(this.currentModelRef.clear(),this.currentModelRef.value=e?(i=e,n=e.onDidChange((()=>{this.hasCachedGhostText=!1,this.onDidChangeEmitter.fire()})),{object:i,dispose:()=>null==n?void 0:n.dispose()}):void 0,this.hasCachedGhostText=!1,this.onDidChangeEmitter.fire())}get ghostText(){var e,t;return this.hasCachedGhostText||(this.cachedGhostText=null===(t=null===(e=this.currentModelRef.value)||void 0===e?void 0:e.object)||void 0===t?void 0:t.ghostText,this.hasCachedGhostText=!0),this.cachedGhostText}setExpanded(e){var t;null===(t=this.targetModel)||void 0===t||t.setExpanded(e)}get expanded(){return!!this.targetModel&&this.targetModel.expanded}get minReservedLineCount(){return this.targetModel?this.targetModel.minReservedLineCount:0}}let ce=class extends de{constructor(e,t){super(),this.editor=e,this.commandService=t,this.suggestWidgetAdapterModel=this._register(new se(this.editor)),this.inlineCompletionsModel=this._register(new B(this.editor,this.commandService)),this._register(this.suggestWidgetAdapterModel.onDidChange((()=>{this.updateModel()}))),this.updateModel()}get activeInlineCompletionsModel(){if(this.targetModel===this.inlineCompletionsModel)return this.inlineCompletionsModel}updateModel(){this.setTargetModel(this.suggestWidgetAdapterModel.isActive?this.suggestWidgetAdapterModel:this.inlineCompletionsModel),this.inlineCompletionsModel.setActive(this.targetModel===this.inlineCompletionsModel)}shouldShowHoverAt(e){var t;const i=null===(t=this.activeInlineCompletionsModel)||void 0===t?void 0:t.ghostText;return!!i&&i.parts.some((t=>e.containsPosition(new f.L(i.lineNumber,t.column))))}triggerInlineCompletion(){var e;null===(e=this.activeInlineCompletionsModel)||void 0===e||e.trigger()}commitInlineCompletion(){var e;null===(e=this.activeInlineCompletionsModel)||void 0===e||e.commitCurrentSuggestion()}hideInlineCompletion(){var e;null===(e=this.activeInlineCompletionsModel)||void 0===e||e.hide()}showNextInlineCompletion(){var e;null===(e=this.activeInlineCompletionsModel)||void 0===e||e.showNext()}showPreviousInlineCompletion(){var e;null===(e=this.activeInlineCompletionsModel)||void 0===e||e.showPrevious()}hasMultipleInlineCompletions(){var e;return le(this,void 0,void 0,(function*(){const t=yield null===(e=this.activeInlineCompletionsModel)||void 0===e?void 0:e.hasMultipleInlineCompletions();return void 0!==t&&t}))}};ce=re([ae(1,U.H)],ce);var ue=function(e,t,i,n){var o,s=arguments.length,r=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(s<3?o(r):s>3?o(t,i,r):o(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},he=function(e,t){return function(i,n){t(i,n,e)}},ge=function(e,t,i,n){return new(i||(i=Promise))((function(o,s){function r(e){try{l(n.next(e))}catch(e){s(e)}}function a(e){try{l(n.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}l((n=n.apply(e,t||[])).next())}))};let pe=class e extends o.JT{constructor(e,t){super(),this.editor=e,this.instantiationService=t,this.triggeredExplicitly=!1,this.activeController=this._register(new o.XK),this._register(this.editor.onDidChangeModel((()=>{this.updateModelController()}))),this._register(this.editor.onDidChangeConfiguration((e=>{e.hasChanged(105)&&this.updateModelController(),e.hasChanged(53)&&this.updateModelController()}))),this.updateModelController()}static get(t){return t.getContribution(e.ID)}get activeModel(){var e;return null===(e=this.activeController.value)||void 0===e?void 0:e.model}updateModelController(){const e=this.editor.getOption(105),t=this.editor.getOption(53);this.activeController.value=void 0,this.activeController.value=this.editor.hasModel()&&(e.preview||t.enabled||this.triggeredExplicitly)?this.instantiationService.createInstance(fe,this.editor):void 0}shouldShowHoverAt(e){var t;return(null===(t=this.activeModel)||void 0===t?void 0:t.shouldShowHoverAt(e))||!1}shouldShowHoverAtViewZone(e){var t,i;return(null===(i=null===(t=this.activeController.value)||void 0===t?void 0:t.widget)||void 0===i?void 0:i.shouldShowHoverAtViewZone(e))||!1}trigger(){var e;this.triggeredExplicitly=!0,this.activeController.value||this.updateModelController(),null===(e=this.activeModel)||void 0===e||e.triggerInlineCompletion()}commit(){var e;null===(e=this.activeModel)||void 0===e||e.commitInlineCompletion()}hide(){var e;null===(e=this.activeModel)||void 0===e||e.hideInlineCompletion()}showNextInlineCompletion(){var e;null===(e=this.activeModel)||void 0===e||e.showNextInlineCompletion()}showPreviousInlineCompletion(){var e;null===(e=this.activeModel)||void 0===e||e.showPreviousInlineCompletion()}hasMultipleInlineCompletions(){var e;return ge(this,void 0,void 0,(function*(){const t=yield null===(e=this.activeModel)||void 0===e?void 0:e.hasMultipleInlineCompletions();return void 0!==t&&t}))}};pe.inlineSuggestionVisible=new L.uy("inlineSuggestionVisible",!1,O.N("inlineSuggestionVisible","Whether an inline suggestion is visible")),pe.inlineSuggestionHasIndentation=new L.uy("inlineSuggestionHasIndentation",!1,O.N("inlineSuggestionHasIndentation","Whether the inline suggestion starts with whitespace")),pe.ID="editor.contrib.ghostTextController",pe=ue([he(1,w.TG)],pe);class me{constructor(e){this.contextKeyService=e,this.inlineCompletionVisible=pe.inlineSuggestionVisible.bindTo(this.contextKeyService),this.inlineCompletionSuggestsIndentation=pe.inlineSuggestionHasIndentation.bindTo(this.contextKeyService)}}let fe=class extends o.JT{constructor(e,t,i){super(),this.editor=e,this.instantiationService=t,this.contextKeyService=i,this.contextKeys=new me(this.contextKeyService),this.model=this._register(this.instantiationService.createInstance(ce,this.editor)),this.widget=this._register(this.instantiationService.createInstance(y,this.editor,this.model)),this._register((0,o.OF)((()=>{this.contextKeys.inlineCompletionVisible.set(!1),this.contextKeys.inlineCompletionSuggestsIndentation.set(!1)}))),this._register(this.model.onDidChange((()=>{this.updateContextKeys()}))),this.updateContextKeys()}updateContextKeys(){var e;this.contextKeys.inlineCompletionVisible.set(void 0!==(null===(e=this.model.activeInlineCompletionsModel)||void 0===e?void 0:e.ghostText));const t=this.model.inlineCompletionsModel.ghostText;if(t&&t.parts.length>0){const{column:e,lines:i}=t.parts[0],n=i[0].startsWith(" ")||i[0].startsWith("\t"),o=e<=this.editor.getModel().getLineIndentColumn(t.lineNumber);this.contextKeys.inlineCompletionSuggestsIndentation.set(!!this.model.activeInlineCompletionsModel&&n&&o)}else this.contextKeys.inlineCompletionSuggestsIndentation.set(!1)}};fe=ue([he(1,w.TG),he(2,L.i6)],fe);const ve=s._l.bindToContribution(pe.get),Ce=new ve({id:"editor.action.inlineSuggest.commit",precondition:L.Ao.and(pe.inlineSuggestionVisible,pe.inlineSuggestionHasIndentation.toNegated(),r.u.tabMovesFocus.toNegated()),kbOpts:{weight:200,primary:2},handler(e){e.commit(),e.editor.focus()}});(0,s.fK)(Ce),(0,s.fK)(new ve({id:"editor.action.inlineSuggest.hide",precondition:pe.inlineSuggestionVisible,kbOpts:{weight:100,primary:9},handler(e){e.hide()}}));class be extends s.R6{constructor(){super({id:be.ID,label:O.N("action.inlineSuggest.showNext","Show Next Inline Suggestion"),alias:"Show Next Inline Suggestion",precondition:L.Ao.and(r.u.writable,pe.inlineSuggestionVisible),kbOpts:{weight:100,primary:601}})}run(e,t){return ge(this,void 0,void 0,(function*(){const e=pe.get(t);e&&(e.showNextInlineCompletion(),t.focus())}))}}be.ID="editor.action.inlineSuggest.showNext";class Se extends s.R6{constructor(){super({id:Se.ID,label:O.N("action.inlineSuggest.showPrevious","Show Previous Inline Suggestion"),alias:"Show Previous Inline Suggestion",precondition:L.Ao.and(r.u.writable,pe.inlineSuggestionVisible),kbOpts:{weight:100,primary:599}})}run(e,t){return ge(this,void 0,void 0,(function*(){const e=pe.get(t);e&&(e.showPreviousInlineCompletion(),t.focus())}))}}Se.ID="editor.action.inlineSuggest.showPrevious";class _e extends s.R6{constructor(){super({id:"editor.action.inlineSuggest.trigger",label:O.N("action.inlineSuggest.trigger","Trigger Inline Suggestion"),alias:"Trigger Inline Suggestion",precondition:r.u.writable})}run(e,t){return ge(this,void 0,void 0,(function*(){const e=pe.get(t);e&&e.trigger()}))}}(0,s._K)(pe.ID,pe),(0,s.Qr)(_e),(0,s.Qr)(be),(0,s.Qr)(Se)},96073:function(e,t,i){i.d(t,{l:function(){return p}});var n=i(63580),o=i(47411),s=i(24314),r=i(5976),a=i(55339),l=i(94565),d=i(84144),c=i(38819),u=function(e,t,i,n){var o,s=arguments.length,r=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(s<3?o(r):s>3?o(t,i,r):o(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},h=function(e,t){return function(i,n){t(i,n,e)}};class g{constructor(e,t,i){this.owner=e,this.range=t,this.controller=i}isValidForHoverAnchor(e){return 1===e.type&&this.range.startColumn<=e.range.startColumn&&this.range.endColumn>=e.range.endColumn}hasMultipleSuggestions(){return this.controller.hasMultipleInlineCompletions()}}let p=class{constructor(e,t,i,n,o){this._editor=e,this._commandService=i,this._menuService=n,this._contextKeyService=o}suggestHoverAnchor(e){const t=a.GhostTextController.get(this._editor);if(!t)return null;if(8===e.target.type){const i=e.target.detail;if(t.shouldShowHoverAtViewZone(i.viewZoneId))return new o.Y(1e3,this,s.e.fromPositions(i.positionBefore||i.position,i.positionBefore||i.position))}if(7===e.target.type&&e.target.range&&t.shouldShowHoverAt(e.target.range))return new o.Y(1e3,this,e.target.range);if(6===e.target.type&&e.target.range&&e.target.detail){if(e.target.detail.mightBeForeignElement&&t.shouldShowHoverAt(e.target.range))return new o.Y(1e3,this,e.target.range)}return null}computeSync(e,t){const i=a.GhostTextController.get(this._editor);return i&&i.shouldShowHoverAt(e.range)?[new g(this,e.range,i)]:[]}renderHoverParts(e,t,i){const o=new r.SL,s=o.add(this._menuService.createMenu(d.eH.InlineCompletionsActions,this._contextKeyService)),l=i.addAction({label:n.N("showNextInlineSuggestion","Next"),commandId:a.ShowNextInlineSuggestionAction.ID,run:()=>this._commandService.executeCommand(a.ShowNextInlineSuggestionAction.ID)}),c=i.addAction({label:n.N("showPreviousInlineSuggestion","Previous"),commandId:a.ShowPreviousInlineSuggestionAction.ID,run:()=>this._commandService.executeCommand(a.ShowPreviousInlineSuggestionAction.ID)});i.addAction({label:n.N("acceptInlineSuggestion","Accept"),commandId:a.commitInlineSuggestionAction.id,run:()=>this._commandService.executeCommand(a.commitInlineSuggestionAction.id)});const u=[l,c];for(const e of u)e.setEnabled(!1);e[0].hasMultipleSuggestions().then((e=>{for(const t of u)t.setEnabled(e)}));for(const[e,t]of s.getActions())for(const e of t)e instanceof d.U8&&i.addAction({label:e.label,commandId:e.item.id,run:()=>this._commandService.executeCommand(e.item.id)});return o}};p=u([h(2,l.H),h(3,d.co),h(4,c.i6)],p)},89959:function(e,t,i){i.r(t),i.d(t,{AbstractCaseAction:function(){return K},AbstractDeleteAllToBoundaryAction:function(){return F},AbstractSortLinesAction:function(){return M},DeleteAllLeftAction:function(){return W},DeleteAllRightAction:function(){return H},DeleteLinesAction:function(){return R},DuplicateSelectionAction:function(){return N},IndentLinesAction:function(){return O},InsertLineAfterAction:function(){return k},InsertLineBeforeAction:function(){return P},JoinLinesAction:function(){return U},LowerCaseAction:function(){return j},SnakeCaseAction:function(){return q},SortLinesAscendingAction:function(){return D},SortLinesDescendingAction:function(){return T},TitleCaseAction:function(){return $},TransposeAction:function(){return V},TrimTrailingWhitespaceAction:function(){return E},UpperCaseAction:function(){return z}});var n=i(63580),o=i(22258),s=i(71513),r=i(16830),a=i(61329),l=i(60631),d=i(28536),c=i(69386),u=i(50187),h=i(24314),g=i(3860),p=i(29102);class m{constructor(e,t,i){this._selection=e,this._isCopyingDown=t,this._noop=i||!1,this._selectionDirection=0,this._selectionId=null,this._startLineNumberDelta=0,this._endLineNumberDelta=0}getEditOperations(e,t){let i=this._selection;this._startLineNumberDelta=0,this._endLineNumberDelta=0,i.startLineNumber<i.endLineNumber&&1===i.endColumn&&(this._endLineNumberDelta=1,i=i.setEndPosition(i.endLineNumber-1,e.getLineMaxColumn(i.endLineNumber-1)));let n=[];for(let t=i.startLineNumber;t<=i.endLineNumber;t++)n.push(e.getLineContent(t));const o=n.join("\n");""===o&&this._isCopyingDown&&(this._startLineNumberDelta++,this._endLineNumberDelta++),this._noop?t.addEditOperation(new h.e(i.endLineNumber,e.getLineMaxColumn(i.endLineNumber),i.endLineNumber+1,1),i.endLineNumber===e.getLineCount()?"":"\n"):this._isCopyingDown?t.addEditOperation(new h.e(i.startLineNumber,1,i.startLineNumber,1),o+"\n"):t.addEditOperation(new h.e(i.endLineNumber,e.getLineMaxColumn(i.endLineNumber),i.endLineNumber,e.getLineMaxColumn(i.endLineNumber)),"\n"+o),this._selectionId=t.trackSelection(i),this._selectionDirection=this._selection.getDirection()}computeCursorState(e,t){let i=t.getTrackedSelection(this._selectionId);if(0!==this._startLineNumberDelta||0!==this._endLineNumberDelta){let e=i.startLineNumber,t=i.startColumn,n=i.endLineNumber,o=i.endColumn;0!==this._startLineNumberDelta&&(e+=this._startLineNumberDelta,t=1),0!==this._endLineNumberDelta&&(n+=this._endLineNumberDelta,o=1),i=g.Y.createWithDirection(e,t,n,o,this._selectionDirection)}return i}}var f=i(97295),v=i(10291),C=i(97354),b=i(83831),S=i(51491);class _{constructor(e,t,i){this._selection=e,this._isMovingDown=t,this._autoIndent=i,this._selectionId=null,this._moveEndLineSelectionShrink=!1}getEditOperations(e,t){let i=e.getLineCount();if(this._isMovingDown&&this._selection.endLineNumber===i)return void(this._selectionId=t.trackSelection(this._selection));if(!this._isMovingDown&&1===this._selection.startLineNumber)return void(this._selectionId=t.trackSelection(this._selection));this._moveEndPositionDown=!1;let n=this._selection;n.startLineNumber<n.endLineNumber&&1===n.endColumn&&(this._moveEndPositionDown=!0,n=n.setEndPosition(n.endLineNumber-1,e.getLineMaxColumn(n.endLineNumber-1)));const{tabSize:o,indentSize:s,insertSpaces:r}=e.getOptions();let a=this.buildIndentConverter(o,s,r),l={getLineTokens:t=>e.getLineTokens(t),getLanguageIdentifier:()=>e.getLanguageIdentifier(),getLanguageIdAtPosition:(t,i)=>e.getLanguageIdAtPosition(t,i),getLineContent:null};if(n.startLineNumber===n.endLineNumber&&1===e.getLineMaxColumn(n.startLineNumber)){let i=n.startLineNumber,o=this._isMovingDown?i+1:i-1;1===e.getLineMaxColumn(o)?t.addEditOperation(new h.e(1,1,1,1),null):(t.addEditOperation(new h.e(i,1,i,1),e.getLineContent(o)),t.addEditOperation(new h.e(o,1,o,e.getLineMaxColumn(o)),null)),n=new g.Y(o,1,o,1)}else{let i,s;if(this._isMovingDown){i=n.endLineNumber+1,s=e.getLineContent(i),t.addEditOperation(new h.e(i-1,e.getLineMaxColumn(i-1),i,e.getLineMaxColumn(i)),null);let d=s;if(this.shouldAutoIndent(e,n)){let c=this.matchEnterRule(e,a,o,i,n.startLineNumber-1);if(null!==c){let t=f.V8(e.getLineContent(i)),n=c+S.Y(t,o),a=S.J(n,o,r);d=a+this.trimLeft(s)}else{l.getLineContent=t=>t===n.startLineNumber?e.getLineContent(i):e.getLineContent(t);let t=b.zu.getGoodIndentForLine(this._autoIndent,l,e.getLanguageIdAtPosition(i,1),n.startLineNumber,a);if(null!==t){let n=f.V8(e.getLineContent(i)),a=S.Y(t,o);if(a!==S.Y(n,o)){let e=S.J(a,o,r);d=e+this.trimLeft(s)}}}t.addEditOperation(new h.e(n.startLineNumber,1,n.startLineNumber,1),d+"\n");let u=this.matchEnterRuleMovingDown(e,a,o,n.startLineNumber,i,d);if(null!==u)0!==u&&this.getIndentEditsOfMovingBlock(e,t,n,o,r,u);else{l.getLineContent=t=>t===n.startLineNumber?d:t>=n.startLineNumber+1&&t<=n.endLineNumber+1?e.getLineContent(t-1):e.getLineContent(t);let s=b.zu.getGoodIndentForLine(this._autoIndent,l,e.getLanguageIdAtPosition(i,1),n.startLineNumber+1,a);if(null!==s){const i=f.V8(e.getLineContent(n.startLineNumber)),a=S.Y(s,o),l=S.Y(i,o);if(a!==l){const i=a-l;this.getIndentEditsOfMovingBlock(e,t,n,o,r,i)}}}}else t.addEditOperation(new h.e(n.startLineNumber,1,n.startLineNumber,1),d+"\n")}else if(i=n.startLineNumber-1,s=e.getLineContent(i),t.addEditOperation(new h.e(i,1,i+1,1),null),t.addEditOperation(new h.e(n.endLineNumber,e.getLineMaxColumn(n.endLineNumber),n.endLineNumber,e.getLineMaxColumn(n.endLineNumber)),"\n"+s),this.shouldAutoIndent(e,n)){l.getLineContent=t=>t===i?e.getLineContent(n.startLineNumber):e.getLineContent(t);let s=this.matchEnterRule(e,a,o,n.startLineNumber,n.startLineNumber-2);if(null!==s)0!==s&&this.getIndentEditsOfMovingBlock(e,t,n,o,r,s);else{let s=b.zu.getGoodIndentForLine(this._autoIndent,l,e.getLanguageIdAtPosition(n.startLineNumber,1),i,a);if(null!==s){let i=f.V8(e.getLineContent(n.startLineNumber)),a=S.Y(s,o),l=S.Y(i,o);if(a!==l){let i=a-l;this.getIndentEditsOfMovingBlock(e,t,n,o,r,i)}}}}}this._selectionId=t.trackSelection(n)}buildIndentConverter(e,t,i){return{shiftIndent:n=>v.U.shiftIndent(n,n.length+1,e,t,i),unshiftIndent:n=>v.U.unshiftIndent(n,n.length+1,e,t,i)}}parseEnterResult(e,t,i,n,o){if(o){let s=o.indentation;o.indentAction===C.wU.None||o.indentAction===C.wU.Indent?s=o.indentation+o.appendText:o.indentAction===C.wU.IndentOutdent?s=o.indentation:o.indentAction===C.wU.Outdent&&(s=t.unshiftIndent(o.indentation)+o.appendText);let r=e.getLineContent(n);if(this.trimLeft(r).indexOf(this.trimLeft(s))>=0){let o=f.V8(e.getLineContent(n)),r=f.V8(s),a=b.zu.getIndentMetadata(e,n);return null!==a&&2&a&&(r=t.unshiftIndent(r)),S.Y(r,i)-S.Y(o,i)}}return null}matchEnterRuleMovingDown(e,t,i,n,o,s){if(f.ow(s)>=0){let s=e.getLineMaxColumn(o),r=b.zu.getEnterAction(this._autoIndent,e,new h.e(o,s,o,s));return this.parseEnterResult(e,t,i,n,r)}{let o=n-1;for(;o>=1;){let t=e.getLineContent(o);if(f.ow(t)>=0)break;o--}if(o<1||n>e.getLineCount())return null;let s=e.getLineMaxColumn(o),r=b.zu.getEnterAction(this._autoIndent,e,new h.e(o,s,o,s));return this.parseEnterResult(e,t,i,n,r)}}matchEnterRule(e,t,i,n,o,s){let r=o;for(;r>=1;){let t;if(t=r===o&&void 0!==s?s:e.getLineContent(r),f.ow(t)>=0)break;r--}if(r<1||n>e.getLineCount())return null;let a=e.getLineMaxColumn(r),l=b.zu.getEnterAction(this._autoIndent,e,new h.e(r,a,r,a));return this.parseEnterResult(e,t,i,n,l)}trimLeft(e){return e.replace(/^\s+/,"")}shouldAutoIndent(e,t){if(this._autoIndent<4)return!1;if(!e.isCheapToTokenize(t.startLineNumber))return!1;let i=e.getLanguageIdAtPosition(t.startLineNumber,1);return i===e.getLanguageIdAtPosition(t.endLineNumber,1)&&null!==b.zu.getIndentRulesSupport(i)}getIndentEditsOfMovingBlock(e,t,i,n,o,s){for(let r=i.startLineNumber;r<=i.endLineNumber;r++){let a=e.getLineContent(r),l=f.V8(a),d=S.Y(l,n)+s,c=S.J(d,n,o);c!==l&&(t.addEditOperation(new h.e(r,1,r,l.length+1),c),r===i.endLineNumber&&i.endColumn<=l.length+1&&""===c&&(this._moveEndLineSelectionShrink=!0))}}computeCursorState(e,t){let i=t.getTrackedSelection(this._selectionId);return this._moveEndPositionDown&&(i=i.setEndPosition(i.endLineNumber+1,1)),this._moveEndLineSelectionShrink&&i.startLineNumber<i.endLineNumber&&(i=i.setEndPosition(i.endLineNumber,2)),i}}class L{constructor(e,t){this.selection=e,this.descending=t,this.selectionId=null}static getCollator(){return L._COLLATOR||(L._COLLATOR=new Intl.Collator),L._COLLATOR}getEditOperations(e,t){let i=function(e,t,i){let n=w(e,t,i);if(!n)return null;return c.h.replace(new h.e(n.startLineNumber,1,n.endLineNumber,e.getLineMaxColumn(n.endLineNumber)),n.after.join("\n"))}(e,this.selection,this.descending);i&&t.addEditOperation(i.range,i.text),this.selectionId=t.trackSelection(this.selection)}computeCursorState(e,t){return t.getTrackedSelection(this.selectionId)}static canRun(e,t,i){if(null===e)return!1;let n=w(e,t,i);if(!n)return!1;for(let e=0,t=n.before.length;e<t;e++)if(n.before[e]!==n.after[e])return!0;return!1}}function w(e,t,i){let n=t.startLineNumber,o=t.endLineNumber;if(1===t.endColumn&&o--,n>=o)return null;let s=[];for(let t=n;t<=o;t++)s.push(e.getLineContent(t));let r=s.slice(0);return r.sort(L.getCollator().compare),!0===i&&(r=r.reverse()),{startLineNumber:n,endLineNumber:o,before:s,after:r}}L._COLLATOR=null;var x=i(84144);class I extends r.R6{constructor(e,t){super(t),this.down=e}run(e,t){if(!t.hasModel())return;const i=t.getSelections().map(((e,t)=>({selection:e,index:t,ignore:!1})));i.sort(((e,t)=>h.e.compareRangesUsingStarts(e.selection,t.selection)));let n=i[0];for(let e=1;e<i.length;e++){const t=i[e];n.selection.endLineNumber===t.selection.startLineNumber&&(n.index<t.index?t.ignore=!0:(n.ignore=!0,n=t))}const o=[];for(const e of i)o.push(new m(e.selection,this.down,e.ignore));t.pushUndoStop(),t.executeCommands(this.id,o),t.pushUndoStop()}}class N extends r.R6{constructor(){super({id:"editor.action.duplicateSelection",label:n.N("duplicateSelection","Duplicate Selection"),alias:"Duplicate Selection",precondition:p.u.writable,menuOpts:{menuId:x.eH.MenubarSelectionMenu,group:"2_line",title:n.N({key:"miDuplicateSelection",comment:["&& denotes a mnemonic"]},"&&Duplicate Selection"),order:5}})}run(e,t,i){if(!t.hasModel())return;const n=[],o=t.getSelections(),s=t.getModel();for(const e of o)if(e.isEmpty())n.push(new m(e,!0));else{const t=new g.Y(e.endLineNumber,e.endColumn,e.endLineNumber,e.endColumn);n.push(new a.OY(t,s.getValueInRange(e)))}t.pushUndoStop(),t.executeCommands(this.id,n),t.pushUndoStop()}}class y extends r.R6{constructor(e,t){super(t),this.down=e}run(e,t){let i=[],n=t.getSelections()||[];const o=t.getOption(9);for(const e of n)i.push(new _(e,this.down,o));t.pushUndoStop(),t.executeCommands(this.id,i),t.pushUndoStop()}}class M extends r.R6{constructor(e,t){super(t),this.descending=e}run(e,t){const i=t.getSelections()||[];for(const e of i)if(!L.canRun(t.getModel(),e,this.descending))return;let n=[];for(let e=0,t=i.length;e<t;e++)n[e]=new L(i[e],this.descending);t.pushUndoStop(),t.executeCommands(this.id,n),t.pushUndoStop()}}class D extends M{constructor(){super(!1,{id:"editor.action.sortLinesAscending",label:n.N("lines.sortAscending","Sort Lines Ascending"),alias:"Sort Lines Ascending",precondition:p.u.writable})}}class T extends M{constructor(){super(!0,{id:"editor.action.sortLinesDescending",label:n.N("lines.sortDescending","Sort Lines Descending"),alias:"Sort Lines Descending",precondition:p.u.writable})}}class E extends r.R6{constructor(){super({id:E.ID,label:n.N("lines.trimTrailingWhitespace","Trim Trailing Whitespace"),alias:"Trim Trailing Whitespace",precondition:p.u.writable,kbOpts:{kbExpr:p.u.editorTextFocus,primary:(0,o.gx)(2089,2102),weight:100}})}run(e,t,i){let n=[];"auto-save"===i.reason&&(n=(t.getSelections()||[]).map((e=>new u.L(e.positionLineNumber,e.positionColumn))));let o=t.getSelection();if(null===o)return;let s=new l.V(o,n);t.pushUndoStop(),t.executeCommands(this.id,[s]),t.pushUndoStop()}}E.ID="editor.action.trimTrailingWhitespace";class R extends r.R6{constructor(){super({id:"editor.action.deleteLines",label:n.N("lines.delete","Delete Line"),alias:"Delete Line",precondition:p.u.writable,kbOpts:{kbExpr:p.u.textInputFocus,primary:3113,weight:100}})}run(e,t){if(!t.hasModel())return;let i=this._getLinesToRemove(t),n=t.getModel();if(1===n.getLineCount()&&1===n.getLineMaxColumn(1))return;let o=0,s=[],r=[];for(let e=0,t=i.length;e<t;e++){const t=i[e];let a=t.startLineNumber,l=t.endLineNumber,d=1,u=n.getLineMaxColumn(l);l<n.getLineCount()?(l+=1,u=1):a>1&&(a-=1,d=n.getLineMaxColumn(a)),s.push(c.h.replace(new g.Y(a,d,l,u),"")),r.push(new g.Y(a-o,t.positionColumn,a-o,t.positionColumn)),o+=t.endLineNumber-t.startLineNumber+1}t.pushUndoStop(),t.executeEdits(this.id,s,r),t.pushUndoStop()}_getLinesToRemove(e){let t=e.getSelections().map((e=>{let t=e.endLineNumber;return e.startLineNumber<e.endLineNumber&&1===e.endColumn&&(t-=1),{startLineNumber:e.startLineNumber,selectionStartColumn:e.selectionStartColumn,endLineNumber:t,positionColumn:e.positionColumn}}));t.sort(((e,t)=>e.startLineNumber===t.startLineNumber?e.endLineNumber-t.endLineNumber:e.startLineNumber-t.startLineNumber));let i=[],n=t[0];for(let e=1;e<t.length;e++)n.endLineNumber+1>=t[e].startLineNumber?n.endLineNumber=t[e].endLineNumber:(i.push(n),n=t[e]);return i.push(n),i}}class O extends r.R6{constructor(){super({id:"editor.action.indentLines",label:n.N("lines.indent","Indent Line"),alias:"Indent Line",precondition:p.u.writable,kbOpts:{kbExpr:p.u.editorTextFocus,primary:2137,weight:100}})}run(e,t){const i=t._getViewModel();i&&(t.pushUndoStop(),t.executeCommands(this.id,d.u.indent(i.cursorConfig,t.getModel(),t.getSelections())),t.pushUndoStop())}}class A extends r.R6{constructor(){super({id:"editor.action.outdentLines",label:n.N("lines.outdent","Outdent Line"),alias:"Outdent Line",precondition:p.u.writable,kbOpts:{kbExpr:p.u.editorTextFocus,primary:2135,weight:100}})}run(e,t){s.CoreEditingCommands.Outdent.runEditorCommand(e,t,null)}}class P extends r.R6{constructor(){super({id:"editor.action.insertLineBefore",label:n.N("lines.insertBefore","Insert Line Above"),alias:"Insert Line Above",precondition:p.u.writable,kbOpts:{kbExpr:p.u.editorTextFocus,primary:3075,weight:100}})}run(e,t){const i=t._getViewModel();i&&(t.pushUndoStop(),t.executeCommands(this.id,d.u.lineInsertBefore(i.cursorConfig,t.getModel(),t.getSelections())))}}class k extends r.R6{constructor(){super({id:"editor.action.insertLineAfter",label:n.N("lines.insertAfter","Insert Line Below"),alias:"Insert Line Below",precondition:p.u.writable,kbOpts:{kbExpr:p.u.editorTextFocus,primary:2051,weight:100}})}run(e,t){const i=t._getViewModel();i&&(t.pushUndoStop(),t.executeCommands(this.id,d.u.lineInsertAfter(i.cursorConfig,t.getModel(),t.getSelections())))}}class F extends r.R6{run(e,t){if(!t.hasModel())return;const i=t.getSelection();let n=this._getRangesToDelete(t),o=[];for(let e=0,t=n.length-1;e<t;e++){let t=n[e],i=n[e+1];null===h.e.intersectRanges(t,i)?o.push(t):n[e+1]=h.e.plusRange(t,i)}o.push(n[n.length-1]);let s=this._getEndCursorState(i,o),r=o.map((e=>c.h.replace(e,"")));t.pushUndoStop(),t.executeEdits(this.id,r,s),t.pushUndoStop()}}class W extends F{constructor(){super({id:"deleteAllLeft",label:n.N("lines.deleteAllLeft","Delete All Left"),alias:"Delete All Left",precondition:p.u.writable,kbOpts:{kbExpr:p.u.textInputFocus,primary:0,mac:{primary:2049},weight:100}})}_getEndCursorState(e,t){let i=null,n=[],o=0;return t.forEach((t=>{let s;if(1===t.endColumn&&o>0){let e=t.startLineNumber-o;s=new g.Y(e,t.startColumn,e,t.startColumn)}else s=new g.Y(t.startLineNumber,t.startColumn,t.startLineNumber,t.startColumn);o+=t.endLineNumber-t.startLineNumber,t.intersectRanges(e)?i=s:n.push(s)})),i&&n.unshift(i),n}_getRangesToDelete(e){let t=e.getSelections();if(null===t)return[];let i=t,n=e.getModel();return null===n?[]:(i.sort(h.e.compareRangesUsingStarts),i=i.map((e=>{if(e.isEmpty()){if(1===e.startColumn){let t=Math.max(1,e.startLineNumber-1),i=1===e.startLineNumber?1:n.getLineContent(t).length+1;return new h.e(t,i,e.startLineNumber,1)}return new h.e(e.startLineNumber,1,e.startLineNumber,e.startColumn)}return new h.e(e.startLineNumber,1,e.endLineNumber,e.endColumn)})),i)}}class H extends F{constructor(){super({id:"deleteAllRight",label:n.N("lines.deleteAllRight","Delete All Right"),alias:"Delete All Right",precondition:p.u.writable,kbOpts:{kbExpr:p.u.textInputFocus,primary:0,mac:{primary:297,secondary:[2068]},weight:100}})}_getEndCursorState(e,t){let i=null,n=[];for(let o=0,s=t.length,r=0;o<s;o++){let s=t[o],a=new g.Y(s.startLineNumber-r,s.startColumn,s.startLineNumber-r,s.startColumn);s.intersectRanges(e)?i=a:n.push(a)}return i&&n.unshift(i),n}_getRangesToDelete(e){let t=e.getModel();if(null===t)return[];let i=e.getSelections();if(null===i)return[];let n=i.map((e=>{if(e.isEmpty()){const i=t.getLineMaxColumn(e.startLineNumber);return e.startColumn===i?new h.e(e.startLineNumber,e.startColumn,e.startLineNumber+1,1):new h.e(e.startLineNumber,e.startColumn,e.startLineNumber,i)}return e}));return n.sort(h.e.compareRangesUsingStarts),n}}class U extends r.R6{constructor(){super({id:"editor.action.joinLines",label:n.N("lines.joinLines","Join Lines"),alias:"Join Lines",precondition:p.u.writable,kbOpts:{kbExpr:p.u.editorTextFocus,primary:0,mac:{primary:296},weight:100}})}run(e,t){let i=t.getSelections();if(null===i)return;let n=t.getSelection();if(null===n)return;i.sort(h.e.compareRangesUsingStarts);let o=[],s=i.reduce(((e,t)=>e.isEmpty()?e.endLineNumber===t.startLineNumber?(n.equalsSelection(e)&&(n=t),t):t.startLineNumber>e.endLineNumber+1?(o.push(e),t):new g.Y(e.startLineNumber,e.startColumn,t.endLineNumber,t.endColumn):t.startLineNumber>e.endLineNumber?(o.push(e),t):new g.Y(e.startLineNumber,e.startColumn,t.endLineNumber,t.endColumn)));o.push(s);let r=t.getModel();if(null===r)return;let a=[],l=[],d=n,u=0;for(let e=0,t=o.length;e<t;e++){let t,i,s=o[e],p=s.startLineNumber,m=1,f=0,v=r.getLineContent(s.endLineNumber).length-s.endColumn;if(s.isEmpty()||s.startLineNumber===s.endLineNumber){let e=s.getStartPosition();e.lineNumber<r.getLineCount()?(t=p+1,i=r.getLineMaxColumn(t)):(t=e.lineNumber,i=r.getLineMaxColumn(e.lineNumber))}else t=s.endLineNumber,i=r.getLineMaxColumn(t);let C=r.getLineContent(p);for(let e=p+1;e<=t;e++){let t=r.getLineContent(e),i=r.getLineFirstNonWhitespaceColumn(e);if(i>=1){let e=!0;""===C&&(e=!1),!e||" "!==C.charAt(C.length-1)&&"\t"!==C.charAt(C.length-1)||(e=!1,C=C.replace(/[\s\uFEFF\xA0]+$/g," "));let n=t.substr(i-1);C+=(e?" ":"")+n,f=e?n.length+1:n.length}else f=0}let b=new h.e(p,m,t,i);if(!b.isEmpty()){let e;s.isEmpty()?(a.push(c.h.replace(b,C)),e=new g.Y(b.startLineNumber-u,C.length-f+1,p-u,C.length-f+1)):s.startLineNumber===s.endLineNumber?(a.push(c.h.replace(b,C)),e=new g.Y(s.startLineNumber-u,s.startColumn,s.endLineNumber-u,s.endColumn)):(a.push(c.h.replace(b,C)),e=new g.Y(s.startLineNumber-u,s.startColumn,s.startLineNumber-u,C.length-v)),null!==h.e.intersectRanges(b,n)?d=e:l.push(e)}u+=b.endLineNumber-b.startLineNumber}l.unshift(d),t.pushUndoStop(),t.executeEdits(this.id,a,l),t.pushUndoStop()}}class V extends r.R6{constructor(){super({id:"editor.action.transpose",label:n.N("editor.transpose","Transpose characters around the cursor"),alias:"Transpose characters around the cursor",precondition:p.u.writable})}run(e,t){let i=t.getSelections();if(null===i)return;let n=t.getModel();if(null===n)return;let o=[];for(let e=0,t=i.length;e<t;e++){let t=i[e];if(!t.isEmpty())continue;let s=t.getStartPosition(),r=n.getLineMaxColumn(s.lineNumber);if(s.column>=r){if(s.lineNumber===n.getLineCount())continue;let e=new h.e(s.lineNumber,Math.max(1,s.column-1),s.lineNumber+1,1),t=n.getValueInRange(e).split("").reverse().join("");o.push(new a.T4(new g.Y(s.lineNumber,Math.max(1,s.column-1),s.lineNumber+1,1),t))}else{let e=new h.e(s.lineNumber,Math.max(1,s.column-1),s.lineNumber,s.column+1),t=n.getValueInRange(e).split("").reverse().join("");o.push(new a.hP(e,t,new g.Y(s.lineNumber,s.column+1,s.lineNumber,s.column+1)))}}t.pushUndoStop(),t.executeCommands(this.id,o),t.pushUndoStop()}}class K extends r.R6{run(e,t){const i=t.getSelections();if(null===i)return;const n=t.getModel();if(null===n)return;const o=t.getOption(115),s=[];for(const e of i)if(e.isEmpty()){const i=e.getStartPosition(),r=t.getConfiguredWordAtPosition(i);if(!r)continue;const a=new h.e(i.lineNumber,r.startColumn,i.lineNumber,r.endColumn),l=n.getValueInRange(a);s.push(c.h.replace(a,this._modifyText(l,o)))}else{const t=n.getValueInRange(e);s.push(c.h.replace(e,this._modifyText(t,o)))}t.pushUndoStop(),t.executeEdits(this.id,s),t.pushUndoStop()}}class z extends K{constructor(){super({id:"editor.action.transformToUppercase",label:n.N("editor.transformToUppercase","Transform to Uppercase"),alias:"Transform to Uppercase",precondition:p.u.writable})}_modifyText(e,t){return e.toLocaleUpperCase()}}class j extends K{constructor(){super({id:"editor.action.transformToLowercase",label:n.N("editor.transformToLowercase","Transform to Lowercase"),alias:"Transform to Lowercase",precondition:p.u.writable})}_modifyText(e,t){return e.toLocaleLowerCase()}}class $ extends K{constructor(){super({id:"editor.action.transformToTitlecase",label:n.N("editor.transformToTitlecase","Transform to Title Case"),alias:"Transform to Title Case",precondition:p.u.writable})}_modifyText(e,t){const i=("\r\n\t "+t).split("");let n="",o=!0;for(let t=0;t<e.length;t++){let s=e[t];i.indexOf(s)>=0?(o=!0,n+=s):o?(o=!1,n+=s.toLocaleUpperCase()):n+=s.toLocaleLowerCase()}return n}}class Y{constructor(e,t){this._pattern=e,this._flags=t,this._actual=null,this._evaluated=!1}get(){if(!this._evaluated){this._evaluated=!0;try{this._actual=new RegExp(this._pattern,this._flags)}catch(e){}}return this._actual}isSupported(){return null!==this.get()}}class q extends K{constructor(){super({id:"editor.action.transformToSnakecase",label:n.N("editor.transformToSnakecase","Transform to Snake Case"),alias:"Transform to Snake Case",precondition:p.u.writable})}_modifyText(e,t){const i=q.regExp1.get(),n=q.regExp2.get();return i&&n?e.replace(i,"$1_$2").replace(n,"$1_$2$3").toLocaleLowerCase():e}}q.regExp1=new Y("(\\p{Ll})(\\p{Lu})","gmu"),q.regExp2=new Y("(\\p{Lu}|\\p{N})(\\p{Lu})(\\p{Ll})","gmu"),(0,r.Qr)(class extends I{constructor(){super(!1,{id:"editor.action.copyLinesUpAction",label:n.N("lines.copyUp","Copy Line Up"),alias:"Copy Line Up",precondition:p.u.writable,kbOpts:{kbExpr:p.u.editorTextFocus,primary:1552,linux:{primary:3600},weight:100},menuOpts:{menuId:x.eH.MenubarSelectionMenu,group:"2_line",title:n.N({key:"miCopyLinesUp",comment:["&& denotes a mnemonic"]},"&&Copy Line Up"),order:1}})}}),(0,r.Qr)(class extends I{constructor(){super(!0,{id:"editor.action.copyLinesDownAction",label:n.N("lines.copyDown","Copy Line Down"),alias:"Copy Line Down",precondition:p.u.writable,kbOpts:{kbExpr:p.u.editorTextFocus,primary:1554,linux:{primary:3602},weight:100},menuOpts:{menuId:x.eH.MenubarSelectionMenu,group:"2_line",title:n.N({key:"miCopyLinesDown",comment:["&& denotes a mnemonic"]},"Co&&py Line Down"),order:2}})}}),(0,r.Qr)(N),(0,r.Qr)(class extends y{constructor(){super(!1,{id:"editor.action.moveLinesUpAction",label:n.N("lines.moveUp","Move Line Up"),alias:"Move Line Up",precondition:p.u.writable,kbOpts:{kbExpr:p.u.editorTextFocus,primary:528,linux:{primary:528},weight:100},menuOpts:{menuId:x.eH.MenubarSelectionMenu,group:"2_line",title:n.N({key:"miMoveLinesUp",comment:["&& denotes a mnemonic"]},"Mo&&ve Line Up"),order:3}})}}),(0,r.Qr)(class extends y{constructor(){super(!0,{id:"editor.action.moveLinesDownAction",label:n.N("lines.moveDown","Move Line Down"),alias:"Move Line Down",precondition:p.u.writable,kbOpts:{kbExpr:p.u.editorTextFocus,primary:530,linux:{primary:530},weight:100},menuOpts:{menuId:x.eH.MenubarSelectionMenu,group:"2_line",title:n.N({key:"miMoveLinesDown",comment:["&& denotes a mnemonic"]},"Move &&Line Down"),order:4}})}}),(0,r.Qr)(D),(0,r.Qr)(T),(0,r.Qr)(E),(0,r.Qr)(R),(0,r.Qr)(O),(0,r.Qr)(A),(0,r.Qr)(P),(0,r.Qr)(k),(0,r.Qr)(W),(0,r.Qr)(H),(0,r.Qr)(U),(0,r.Qr)(V),(0,r.Qr)(z),(0,r.Qr)(j),(0,r.Qr)($),q.regExp1.isSupported()&&q.regExp2.isSupported()&&(0,r.Qr)(q)},80674:function(e,t,i){i.r(t),i.d(t,{CONTEXT_ONTYPE_RENAME_INPUT_VISIBLE:function(){return N},LinkedEditingContribution:function(){return M},LinkedEditingAction:function(){return D},editorLinkedEditingBackground:function(){return R}});var n=i(63580),o=i(16830),s=i(9488),r=i(5976),a=i(50187),l=i(71050),d=i(24314),c=i(44101),u=i(15393),h=i(83103),g=i(38819),p=i(29102),m=i(70666),f=i(11640),v=i(17301),C=i(97295),b=i(73910),S=i(97781),_=i(41264),L=i(83831),w=function(e,t,i,n){var o,s=arguments.length,r=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(s<3?o(r):s>3?o(t,i,r):o(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},x=function(e,t){return function(i,n){t(i,n,e)}},I=function(e,t,i,n){return new(i||(i=Promise))((function(o,s){function r(e){try{l(n.next(e))}catch(e){s(e)}}function a(e){try{l(n.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}l((n=n.apply(e,t||[])).next())}))};const N=new g.uy("LinkedEditingInputVisible",!1),y="linked-editing-decoration";let M=class e extends r.JT{constructor(e,t){super(),this._debounceDuration=200,this._localToDispose=this._register(new r.SL),this._editor=e,this._enabled=!1,this._visibleContextKey=N.bindTo(t),this._currentDecorations=[],this._languageWordPattern=null,this._currentWordPattern=null,this._ignoreChangeEvent=!1,this._localToDispose=this._register(new r.SL),this._rangeUpdateTriggerPromise=null,this._rangeSyncTriggerPromise=null,this._currentRequest=null,this._currentRequestPosition=null,this._currentRequestModelVersion=null,this._register(this._editor.onDidChangeModel((()=>this.reinitialize(!0)))),this._register(this._editor.onDidChangeConfiguration((e=>{(e.hasChanged(60)||e.hasChanged(80))&&this.reinitialize(!1)}))),this._register(c.id.onDidChange((()=>this.reinitialize(!1)))),this._register(this._editor.onDidChangeModelLanguage((()=>this.reinitialize(!0)))),this.reinitialize(!0)}static get(t){return t.getContribution(e.ID)}reinitialize(e){const t=this._editor.getModel(),i=null!==t&&(this._editor.getOption(60)||this._editor.getOption(80))&&c.id.has(t);if(i===this._enabled&&!e)return;if(this._enabled=i,this.clearRanges(),this._localToDispose.clear(),!i||null===t)return;this._languageWordPattern=L.zu.getWordDefinition(t.getLanguageIdentifier().id),this._localToDispose.add(t.onDidChangeLanguageConfiguration((()=>{this._languageWordPattern=L.zu.getWordDefinition(t.getLanguageIdentifier().id)})));const n=new u.vp(this._debounceDuration),o=()=>{this._rangeUpdateTriggerPromise=n.trigger((()=>this.updateRanges()),this._debounceDuration)},s=new u.vp(0),r=e=>{this._rangeSyncTriggerPromise=s.trigger((()=>this._syncRanges(e)))};this._localToDispose.add(this._editor.onDidChangeCursorPosition((()=>{o()}))),this._localToDispose.add(this._editor.onDidChangeModelContent((e=>{if(!this._ignoreChangeEvent&&this._currentDecorations.length>0){const i=t.getDecorationRange(this._currentDecorations[0]);if(i&&e.changes.every((e=>i.intersectRanges(e.range))))return void r(this._currentDecorations)}o()}))),this._localToDispose.add({dispose:()=>{n.cancel(),s.cancel()}}),this.updateRanges()}_syncRanges(e){if(!this._editor.hasModel()||e!==this._currentDecorations||0===e.length)return;const t=this._editor.getModel(),i=t.getDecorationRange(e[0]);if(!i||i.startLineNumber!==i.endLineNumber)return this.clearRanges();const n=t.getValueInRange(i);if(this._currentWordPattern){const e=n.match(this._currentWordPattern);if((e?e[0].length:0)!==n.length)return this.clearRanges()}let o=[];for(let i=1,s=e.length;i<s;i++){const s=t.getDecorationRange(e[i]);if(s)if(s.startLineNumber!==s.endLineNumber)o.push({range:s,text:n});else{let e=t.getValueInRange(s),i=n,r=s.startColumn,a=s.endColumn;const l=C.Mh(e,i);r+=l,e=e.substr(l),i=i.substr(l);const c=C.P1(e,i);a-=c,e=e.substr(0,e.length-c),i=i.substr(0,i.length-c),r===a&&0===i.length||o.push({range:new d.e(s.startLineNumber,r,s.endLineNumber,a),text:i})}}if(0!==o.length)try{this._editor.popUndoStop(),this._ignoreChangeEvent=!0;const e=this._editor._getViewModel().getPrevEditOperationType();this._editor.executeEdits("linkedEditing",o),this._editor._getViewModel().setPrevEditOperationType(e)}finally{this._ignoreChangeEvent=!1}}dispose(){this.clearRanges(),super.dispose()}clearRanges(){this._visibleContextKey.set(!1),this._currentDecorations=this._editor.deltaDecorations(this._currentDecorations,[]),this._currentRequest&&(this._currentRequest.cancel(),this._currentRequest=null,this._currentRequestPosition=null)}updateRanges(t=!1){return I(this,void 0,void 0,(function*(){if(!this._editor.hasModel())return void this.clearRanges();const i=this._editor.getPosition();if(!this._enabled&&!t||this._editor.getSelections().length>1)return void this.clearRanges();const n=this._editor.getModel(),o=n.getVersionId();if(this._currentRequestPosition&&this._currentRequestModelVersion===o){if(i.equals(this._currentRequestPosition))return;if(this._currentDecorations&&this._currentDecorations.length>0){const e=n.getDecorationRange(this._currentDecorations[0]);if(e&&e.containsPosition(i))return}}this._currentRequestPosition=i,this._currentRequestModelVersion=o;const s=(0,u.PG)((t=>I(this,void 0,void 0,(function*(){try{const r=yield E(n,i,t);if(s!==this._currentRequest)return;if(this._currentRequest=null,o!==n.getVersionId())return;let a=[];(null==r?void 0:r.ranges)&&(a=r.ranges),this._currentWordPattern=(null==r?void 0:r.wordPattern)||this._languageWordPattern;let l=!1;for(let e=0,t=a.length;e<t;e++)if(d.e.containsPosition(a[e],i)){if(l=!0,0!==e){const t=a[e];a.splice(e,1),a.unshift(t)}break}if(!l)return void this.clearRanges();const c=a.map((t=>({range:t,options:e.DECORATION})));this._visibleContextKey.set(!0),this._currentDecorations=this._editor.deltaDecorations(this._currentDecorations,c)}catch(e){(0,v.VV)(e)||(0,v.dL)(e),this._currentRequest!==s&&this._currentRequest||this.clearRanges()}}))));return this._currentRequest=s,s}))}};M.ID="editor.contrib.linkedEditing",M.DECORATION=h.qx.register({description:"linked-editing",stickiness:0,className:y}),M=w([x(1,g.i6)],M);class D extends o.R6{constructor(){super({id:"editor.action.linkedEditing",label:n.N("linkedEditing.label","Start Linked Editing"),alias:"Start Linked Editing",precondition:g.Ao.and(p.u.writable,p.u.hasRenameProvider),kbOpts:{kbExpr:p.u.editorTextFocus,primary:3132,weight:100}})}runCommand(e,t){const i=e.get(f.$),[n,o]=Array.isArray(t)&&t||[void 0,void 0];return m.o.isUri(n)&&a.L.isIPosition(o)?i.openCodeEditor({resource:n},i.getActiveCodeEditor()).then((e=>{e&&(e.setPosition(o),e.invokeWithinContext((t=>(this.reportTelemetry(t,e),this.run(t,e)))))}),v.dL):super.runCommand(e,t)}run(e,t){const i=M.get(t);return i?Promise.resolve(i.updateRanges(!0)):Promise.resolve()}}const T=o._l.bindToContribution(M.get);function E(e,t,i){const n=c.id.ordered(e);return(0,u.Ps)(n.map((n=>()=>I(this,void 0,void 0,(function*(){try{return yield n.provideLinkedEditingRanges(e,t,i)}catch(e){return void(0,v.Cp)(e)}})))),(e=>!!e&&s.Of(null==e?void 0:e.ranges)))}(0,o.fK)(new T({id:"cancelLinkedEditingInput",precondition:N,handler:e=>e.clearRanges(),kbOpts:{kbExpr:p.u.editorTextFocus,weight:199,primary:9,secondary:[1033]}}));const R=(0,b.P6)("editor.linkedEditingBackground",{dark:_.Il.fromHex("#f00").transparent(.3),light:_.Il.fromHex("#f00").transparent(.3),hc:_.Il.fromHex("#f00").transparent(.3)},n.N("editorLinkedEditingBackground","Background color when the editor auto renames on type."));(0,S.Ic)(((e,t)=>{const i=e.getColor(R);i&&t.addRule(`.monaco-editor .${y} { background: ${i}; border-left-color: ${i}; }`)})),(0,o.sb)("_executeLinkedEditingProvider",((e,t)=>E(e,t,l.T.None))),(0,o._K)(M.ID,M),(0,o.Qr)(D)},34800:function(e,t,i){i.r(t),i.d(t,{LinkDetector:function(){return P}});var n=i(63580),o=i(15393),s=i(71050),r=i(17301),a=i(59365),l=i(5976),d=i(1432),c=i(16830),u=i(83103),h=i(44101),g=i(69241),p=i(70666),m=i(24314),f=i(51200),v=i(94565),C=i(9488),b=i(98401),S=function(e,t,i,n){return new(i||(i=Promise))((function(o,s){function r(e){try{l(n.next(e))}catch(e){s(e)}}function a(e){try{l(n.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}l((n=n.apply(e,t||[])).next())}))};class _{constructor(e,t){this._link=e,this._provider=t}toJSON(){return{range:this.range,url:this.url,tooltip:this.tooltip}}get range(){return this._link.range}get url(){return this._link.url}get tooltip(){return this._link.tooltip}resolve(e){return S(this,void 0,void 0,(function*(){return this._link.url?this._link.url:"function"==typeof this._provider.resolveLink?Promise.resolve(this._provider.resolveLink(this._link,e)).then((t=>(this._link=t||this._link,this._link.url?this.resolve(e):Promise.reject(new Error("missing"))))):Promise.reject(new Error("missing"))}))}}class L{constructor(e){this._disposables=new l.SL;let t=[];for(const[i,n]of e){const e=i.links.map((e=>new _(e,n)));t=L._union(t,e),(0,l.Wf)(i)&&this._disposables.add(i)}this.links=t}dispose(){this._disposables.dispose(),this.links.length=0}static _union(e,t){let i,n,o,s,r=[];for(i=0,o=0,n=e.length,s=t.length;i<n&&o<s;){const n=e[i],s=t[o];if(m.e.areIntersectingOrTouching(n.range,s.range)){i++;continue}m.e.compareRangesUsingStarts(n.range,s.range)<0?(r.push(n),i++):(r.push(s),o++)}for(;i<n;i++)r.push(e[i]);for(;o<s;o++)r.push(t[o]);return r}}function w(e,t){const i=[],n=h.pM.ordered(e).reverse().map(((n,o)=>Promise.resolve(n.provideLinks(e,t)).then((e=>{e&&(i[o]=[e,n])}),r.Cp)));return Promise.all(n).then((()=>{const e=new L((0,C.kX)(i));return t.isCancellationRequested?(e.dispose(),new L([])):e}))}v.P.registerCommand("_executeLinkProvider",((e,...t)=>S(void 0,void 0,void 0,(function*(){let[i,n]=t;(0,b.p_)(i instanceof p.o),"number"!=typeof n&&(n=0);const o=e.get(f.q).getModel(i);if(!o)return[];const r=yield w(o,s.T.None);if(!r)return[];for(let e=0;e<Math.min(n,r.links.length);e++)yield r.links[e].resolve(s.T.None);const a=r.links.slice(0);return r.dispose(),a}))));var x=i(59422),I=i(50988),N=i(73910),y=i(97781),M=i(66663),D=i(95935),T=function(e,t,i,n){var o,s=arguments.length,r=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(s<3?o(r):s>3?o(t,i,r):o(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},E=function(e,t){return function(i,n){t(i,n,e)}},R=function(e,t,i,n){return new(i||(i=Promise))((function(o,s){function r(e){try{l(n.next(e))}catch(e){s(e)}}function a(e){try{l(n.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}l((n=n.apply(e,t||[])).next())}))};const O={general:u.qx.register({description:"detected-link",stickiness:1,collapseOnReplaceEdit:!0,inlineClassName:"detected-link"}),active:u.qx.register({description:"detected-link-active",stickiness:1,collapseOnReplaceEdit:!0,inlineClassName:"detected-link-active"})};class A{constructor(e,t){this.link=e,this.decorationId=t}static decoration(e,t){return{range:e.range,options:A._getOptions(e,t,!1)}}static _getOptions(e,t,i){const o=Object.assign({},i?O.active:O.general);return o.hoverMessage=function(e,t){const i=e.url&&/^command:/i.test(e.url.toString()),o=e.tooltip?e.tooltip:i?n.N("links.navigate.executeCmd","Execute command"):n.N("links.navigate.follow","Follow link"),s=t?d.dz?n.N("links.navigate.kb.meta.mac","cmd + click"):n.N("links.navigate.kb.meta","ctrl + click"):d.dz?n.N("links.navigate.kb.alt.mac","option + click"):n.N("links.navigate.kb.alt","alt + click");if(e.url){let t="";if(/^command:/i.test(e.url.toString())){const i=e.url.toString().match(/^command:([^?#]+)/);if(i){const e=i[1];t=` "${n.N("tooltip.explanation","Execute command {0}",e)}"`}}return new a.W5("",!0).appendMarkdown(`[${o}](${e.url.toString(!0)}${t}) (${s})`)}return(new a.W5).appendText(`${o} (${s})`)}(e,t),o}activate(e,t){e.changeDecorationOptions(this.decorationId,A._getOptions(this.link,t,!0))}deactivate(e,t){e.changeDecorationOptions(this.decorationId,A._getOptions(this.link,t,!1))}}let P=class e{constructor(e,t,i){this.listenersToRemove=new l.SL,this.editor=e,this.openerService=t,this.notificationService=i;let n=new g.yN(e);this.listenersToRemove.add(n),this.listenersToRemove.add(n.onMouseMoveOrRelevantKeyDown((([e,t])=>{this._onEditorMouseMove(e,t)}))),this.listenersToRemove.add(n.onExecute((e=>{this.onEditorMouseUp(e)}))),this.listenersToRemove.add(n.onCancel((e=>{this.cleanUpActiveLinkDecoration()}))),this.enabled=e.getOption(61),this.listenersToRemove.add(e.onDidChangeConfiguration((t=>{const i=e.getOption(61);this.enabled!==i&&(this.enabled=i,this.updateDecorations([]),this.stop(),this.beginCompute())}))),this.listenersToRemove.add(e.onDidChangeModelContent((e=>this.onChange()))),this.listenersToRemove.add(e.onDidChangeModel((e=>this.onModelChanged()))),this.listenersToRemove.add(e.onDidChangeModelLanguage((e=>this.onModelModeChanged()))),this.listenersToRemove.add(h.pM.onDidChange((e=>this.onModelModeChanged()))),this.timeout=new o._F,this.computePromise=null,this.activeLinksList=null,this.currentOccurrences={},this.activeLinkDecorationId=null,this.beginCompute()}static get(t){return t.getContribution(e.ID)}onModelChanged(){this.currentOccurrences={},this.activeLinkDecorationId=null,this.stop(),this.beginCompute()}onModelModeChanged(){this.stop(),this.beginCompute()}onChange(){this.timeout.setIfNotSet((()=>this.beginCompute()),e.RECOMPUTE_TIME)}beginCompute(){return R(this,void 0,void 0,(function*(){if(!this.editor.hasModel()||!this.enabled)return;const e=this.editor.getModel();if(h.pM.has(e)){this.activeLinksList&&(this.activeLinksList.dispose(),this.activeLinksList=null),this.computePromise=o.PG((t=>w(e,t)));try{this.activeLinksList=yield this.computePromise,this.updateDecorations(this.activeLinksList.links)}catch(e){(0,r.dL)(e)}finally{this.computePromise=null}}}))}updateDecorations(e){const t="altKey"===this.editor.getOption(68);let i=[],n=Object.keys(this.currentOccurrences);for(let e=0,t=n.length;e<t;e++){let t=n[e],o=this.currentOccurrences[t];i.push(o.decorationId)}let o=[];if(e)for(const i of e)o.push(A.decoration(i,t));let s=this.editor.deltaDecorations(i,o);this.currentOccurrences={},this.activeLinkDecorationId=null;for(let t=0,i=s.length;t<i;t++){let i=new A(e[t],s[t]);this.currentOccurrences[i.decorationId]=i}}_onEditorMouseMove(e,t){const i="altKey"===this.editor.getOption(68);if(this.isEnabled(e,t)){this.cleanUpActiveLinkDecoration();const t=this.getLinkOccurrence(e.target.position);t&&this.editor.changeDecorations((e=>{t.activate(e,i),this.activeLinkDecorationId=t.decorationId}))}else this.cleanUpActiveLinkDecoration()}cleanUpActiveLinkDecoration(){const e="altKey"===this.editor.getOption(68);if(this.activeLinkDecorationId){const t=this.currentOccurrences[this.activeLinkDecorationId];t&&this.editor.changeDecorations((i=>{t.deactivate(i,e)})),this.activeLinkDecorationId=null}}onEditorMouseUp(e){if(!this.isEnabled(e))return;const t=this.getLinkOccurrence(e.target.position);t&&this.openLinkOccurrence(t,e.hasSideBySideModifier,!0)}openLinkOccurrence(e,t,i=!1){if(!this.openerService)return;const{link:o}=e;o.resolve(s.T.None).then((e=>{if("string"==typeof e&&this.editor.hasModel()){const t=this.editor.getModel().uri;if(t.scheme===M.lg.file&&e.startsWith(`${M.lg.file}:`)){const i=p.o.parse(e);if(i.scheme===M.lg.file){const n=D.z_(i);let o=null;n.startsWith("/./")?o=`.${n.substr(1)}`:n.startsWith("//./")&&(o=`.${n.substr(2)}`),o&&(e=D.Vo(t,o))}}}return this.openerService.open(e,{openToSide:t,fromUserGesture:i,allowContributedOpeners:!0,allowCommands:!0})}),(e=>{const t=e instanceof Error?e.message:e;"invalid"===t?this.notificationService.warn(n.N("invalid.url","Failed to open this link because it is not well-formed: {0}",o.url.toString())):"missing"===t?this.notificationService.warn(n.N("missing.url","Failed to open this link because its target is missing.")):(0,r.dL)(e)}))}getLinkOccurrence(e){if(!this.editor.hasModel()||!e)return null;const t=this.editor.getModel().getDecorationsInRange({startLineNumber:e.lineNumber,startColumn:e.column,endLineNumber:e.lineNumber,endColumn:e.column},0,!0);for(const e of t){const t=this.currentOccurrences[e.id];if(t)return t}return null}isEnabled(e,t){return Boolean(6===e.target.type&&(e.hasTriggerModifier||t&&t.keyCodeIsTriggerKey))}stop(){var e;this.timeout.cancel(),this.activeLinksList&&(null===(e=this.activeLinksList)||void 0===e||e.dispose(),this.activeLinksList=null),this.computePromise&&(this.computePromise.cancel(),this.computePromise=null)}dispose(){this.listenersToRemove.dispose(),this.stop(),this.timeout.dispose()}};P.ID="editor.linkDetector",P.RECOMPUTE_TIME=1e3,P=T([E(1,I.v4),E(2,x.lT)],P);class k extends c.R6{constructor(){super({id:"editor.action.openLink",label:n.N("label","Open Link"),alias:"Open Link",precondition:void 0})}run(e,t){let i=P.get(t);if(!i)return;if(!t.hasModel())return;let n=t.getSelections();for(let e of n){let t=i.getLinkOccurrence(e.getEndPosition());t&&i.openLinkOccurrence(t,!1)}}}(0,c._K)(P.ID,P),(0,c.Qr)(k),(0,y.Ic)(((e,t)=>{const i=e.getColor(N._Y);i&&t.addRule(`.monaco-editor .detected-link-active { color: ${i} !important; }`)}))},82276:function(e,t,i){i.d(t,{O:function(){return m}});var n=i(63580),o=i(15393),s=i(5976),r=i(85152),a=i(24314),l=i(16830),d=i(38819),c=i(97781),u=i(73910),h=i(92321),g=function(e,t,i,n){var o,s=arguments.length,r=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(s<3?o(r):s>3?o(t,i,r):o(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},p=function(e,t){return function(i,n){t(i,n,e)}};let m=class e{constructor(t,i){this._messageWidget=new s.XK,this._messageListeners=new s.SL,this._editor=t,this._visible=e.MESSAGE_VISIBLE.bindTo(i),this._editorListener=this._editor.onDidAttemptReadOnlyEdit((()=>this._onDidAttemptReadOnlyEdit()))}static get(t){return t.getContribution(e.ID)}dispose(){this._editorListener.dispose(),this._messageListeners.dispose(),this._messageWidget.dispose(),this._visible.reset()}showMessage(e,t){let i;(0,r.Z9)(e),this._visible.set(!0),this._messageWidget.clear(),this._messageListeners.clear(),this._messageWidget.value=new v(this._editor,t,e),this._messageListeners.add(this._editor.onDidBlurEditorText((()=>this.closeMessage()))),this._messageListeners.add(this._editor.onDidChangeCursorPosition((()=>this.closeMessage()))),this._messageListeners.add(this._editor.onDidDispose((()=>this.closeMessage()))),this._messageListeners.add(this._editor.onDidChangeModel((()=>this.closeMessage()))),this._messageListeners.add(new o._F((()=>this.closeMessage()),3e3)),this._messageListeners.add(this._editor.onMouseMove((e=>{e.target.position&&(i?i.containsPosition(e.target.position)||this.closeMessage():i=new a.e(t.lineNumber-3,1,e.target.position.lineNumber+3,1))})))}closeMessage(){this._visible.reset(),this._messageListeners.clear(),this._messageWidget.value&&this._messageListeners.add(v.fadeOut(this._messageWidget.value))}_onDidAttemptReadOnlyEdit(){this._editor.hasModel()&&this.showMessage(n.N("editor.readonly","Cannot edit in read-only editor"),this._editor.getPosition())}};m.ID="editor.contrib.messageController",m.MESSAGE_VISIBLE=new d.uy("messageVisible",!1,n.N("messageVisible","Whether the editor is currently showing an inline message")),m=g([p(1,d.i6)],m);const f=l._l.bindToContribution(m.get);(0,l.fK)(new f({id:"leaveEditorMessage",precondition:m.MESSAGE_VISIBLE,handler:e=>e.closeMessage(),kbOpts:{weight:130,primary:9}}));class v{constructor(e,{lineNumber:t,column:i},n){this.allowEditorOverflow=!0,this.suppressMouseDown=!1,this._editor=e,this._editor.revealLinesInCenterIfOutsideViewport(t,t,0),this._position={lineNumber:t,column:i-1},this._domNode=document.createElement("div"),this._domNode.classList.add("monaco-editor-overlaymessage");const o=document.createElement("div");o.classList.add("anchor","top"),this._domNode.appendChild(o);const s=document.createElement("div");s.classList.add("message"),s.textContent=n,this._domNode.appendChild(s);const r=document.createElement("div");r.classList.add("anchor","below"),this._domNode.appendChild(r),this._editor.addContentWidget(this),this._domNode.classList.add("fadeIn")}static fadeOut(e){let t;const i=()=>{e.dispose(),clearTimeout(t),e.getDomNode().removeEventListener("animationend",i)};return t=setTimeout(i,110),e.getDomNode().addEventListener("animationend",i),e.getDomNode().classList.add("fadeOut"),{dispose:i}}dispose(){this._editor.removeContentWidget(this)}getId(){return"messageoverlay"}getDomNode(){return this._domNode}getPosition(){return{position:this._position,preference:[1,2]}}afterRender(e){this._domNode.classList.toggle("below",2===e)}}(0,l._K)(m.ID,m),(0,c.Ic)(((e,t)=>{const i=e.getColor(u.EP);if(i){let n=e.type===h.e.HIGH_CONTRAST?2:1;t.addRule(`.monaco-editor .monaco-editor-overlaymessage .anchor.below { border-top-color: ${i}; }`),t.addRule(`.monaco-editor .monaco-editor-overlaymessage .anchor.top { border-bottom-color: ${i}; }`),t.addRule(`.monaco-editor .monaco-editor-overlaymessage .message { border: ${n}px solid ${i}; }`)}const n=e.getColor(u._l);n&&t.addRule(`.monaco-editor .monaco-editor-overlaymessage .message { background-color: ${n}; }`);const o=e.getColor(u.YI);o&&t.addRule(`.monaco-editor .monaco-editor-overlaymessage .message { color: ${o}; }`)}))},38486:function(e,t,i){i.r(t),i.d(t,{InsertCursorAbove:function(){return L},InsertCursorBelow:function(){return w},MultiCursorSessionResult:function(){return y},MultiCursorSession:function(){return M},MultiCursorSelectionController:function(){return D},MultiCursorSelectionControllerAction:function(){return T},AddSelectionToNextFindMatchAction:function(){return E},AddSelectionToPreviousFindMatchAction:function(){return R},MoveSelectionToNextFindMatchAction:function(){return O},MoveSelectionToPreviousFindMatchAction:function(){return A},SelectHighlightsAction:function(){return P},CompatChangeAll:function(){return k},SelectionHighlighter:function(){return W}});var n=i(63580),o=i(15393),s=i(22258),r=i(5976),a=i(85152),l=i(16830),d=i(83814),c=i(24314),u=i(3860),h=i(29102),g=i(84973),p=i(83103),m=i(44101),f=i(61838),v=i(84144),C=i(73910),b=i(97781),S=i(38819);function _(e,t){const i=t.filter((t=>!e.find((e=>e.equals(t)))));if(i.length>=1){const e=i.map((e=>`line ${e.viewState.position.lineNumber} column ${e.viewState.position.column}`)).join(", "),t=1===i.length?n.N("cursorAdded","Cursor added: {0}",e):n.N("cursorsAdded","Cursors added: {0}",e);(0,a.i7)(t)}}class L extends l.R6{constructor(){super({id:"editor.action.insertCursorAbove",label:n.N("mutlicursor.insertAbove","Add Cursor Above"),alias:"Add Cursor Above",precondition:void 0,kbOpts:{kbExpr:h.u.editorTextFocus,primary:2576,linux:{primary:1552,secondary:[3088]},weight:100},menuOpts:{menuId:v.eH.MenubarSelectionMenu,group:"3_multi",title:n.N({key:"miInsertCursorAbove",comment:["&& denotes a mnemonic"]},"&&Add Cursor Above"),order:2}})}run(e,t,i){if(!t.hasModel())return;const n=i&&!0===i.logicalLine,o=t._getViewModel();if(o.cursorConfig.readOnly)return;o.pushStackElement();const s=o.getCursorStates();o.setCursorStates(i.source,3,d.P.addCursorUp(o,s,n)),o.revealTopMostCursor(i.source),_(s,o.getCursorStates())}}class w extends l.R6{constructor(){super({id:"editor.action.insertCursorBelow",label:n.N("mutlicursor.insertBelow","Add Cursor Below"),alias:"Add Cursor Below",precondition:void 0,kbOpts:{kbExpr:h.u.editorTextFocus,primary:2578,linux:{primary:1554,secondary:[3090]},weight:100},menuOpts:{menuId:v.eH.MenubarSelectionMenu,group:"3_multi",title:n.N({key:"miInsertCursorBelow",comment:["&& denotes a mnemonic"]},"A&&dd Cursor Below"),order:3}})}run(e,t,i){if(!t.hasModel())return;const n=i&&!0===i.logicalLine,o=t._getViewModel();if(o.cursorConfig.readOnly)return;o.pushStackElement();const s=o.getCursorStates();o.setCursorStates(i.source,3,d.P.addCursorDown(o,s,n)),o.revealBottomMostCursor(i.source),_(s,o.getCursorStates())}}class x extends l.R6{constructor(){super({id:"editor.action.insertCursorAtEndOfEachLineSelected",label:n.N("mutlicursor.insertAtEndOfEachLineSelected","Add Cursors to Line Ends"),alias:"Add Cursors to Line Ends",precondition:void 0,kbOpts:{kbExpr:h.u.editorTextFocus,primary:1575,weight:100},menuOpts:{menuId:v.eH.MenubarSelectionMenu,group:"3_multi",title:n.N({key:"miInsertCursorAtEndOfEachLineSelected",comment:["&& denotes a mnemonic"]},"Add C&&ursors to Line Ends"),order:4}})}getCursorsForSelection(e,t,i){if(!e.isEmpty()){for(let n=e.startLineNumber;n<e.endLineNumber;n++){let e=t.getLineMaxColumn(n);i.push(new u.Y(n,e,n,e))}e.endColumn>1&&i.push(new u.Y(e.endLineNumber,e.endColumn,e.endLineNumber,e.endColumn))}}run(e,t){if(!t.hasModel())return;const i=t.getModel(),n=t.getSelections(),o=t._getViewModel(),s=o.getCursorStates();let r=[];n.forEach((e=>this.getCursorsForSelection(e,i,r))),r.length>0&&t.setSelections(r),_(s,o.getCursorStates())}}class I extends l.R6{constructor(){super({id:"editor.action.addCursorsToBottom",label:n.N("mutlicursor.addCursorsToBottom","Add Cursors To Bottom"),alias:"Add Cursors To Bottom",precondition:void 0})}run(e,t){if(!t.hasModel())return;const i=t.getSelections(),n=t.getModel().getLineCount();let o=[];for(let e=i[0].startLineNumber;e<=n;e++)o.push(new u.Y(e,i[0].startColumn,e,i[0].endColumn));const s=t._getViewModel(),r=s.getCursorStates();o.length>0&&t.setSelections(o),_(r,s.getCursorStates())}}class N extends l.R6{constructor(){super({id:"editor.action.addCursorsToTop",label:n.N("mutlicursor.addCursorsToTop","Add Cursors To Top"),alias:"Add Cursors To Top",precondition:void 0})}run(e,t){if(!t.hasModel())return;const i=t.getSelections();let n=[];for(let e=i[0].startLineNumber;e>=1;e--)n.push(new u.Y(e,i[0].startColumn,e,i[0].endColumn));const o=t._getViewModel(),s=o.getCursorStates();n.length>0&&t.setSelections(n),_(s,o.getCursorStates())}}class y{constructor(e,t,i){this.selections=e,this.revealRange=t,this.revealScrollType=i}}class M{constructor(e,t,i,n,o,s,r){this._editor=e,this.findController=t,this.isDisconnectedFromFindController=i,this.searchText=n,this.wholeWord=o,this.matchCase=s,this.currentMatch=r}static create(e,t){if(!e.hasModel())return null;const i=t.getState();if(!e.hasTextFocus()&&i.isRevealed&&i.searchString.length>0)return new M(e,t,!1,i.searchString,i.wholeWord,i.matchCase,null);let n,o,s=!1;const r=e.getSelections();1===r.length&&r[0].isEmpty()?(s=!0,n=!0,o=!0):(n=i.wholeWord,o=i.matchCase);const a=e.getSelection();let l,d=null;if(a.isEmpty()){const t=e.getConfiguredWordAtPosition(a.getStartPosition());if(!t)return null;l=t.word,d=new u.Y(a.startLineNumber,t.startColumn,a.startLineNumber,t.endColumn)}else l=e.getModel().getValueInRange(a).replace(/\r\n/g,"\n");return new M(e,t,s,l,n,o,d)}addSelectionToNextFindMatch(){if(!this._editor.hasModel())return null;const e=this._getNextMatch();if(!e)return null;const t=this._editor.getSelections();return new y(t.concat(e),e,0)}moveSelectionToNextFindMatch(){if(!this._editor.hasModel())return null;const e=this._getNextMatch();if(!e)return null;const t=this._editor.getSelections();return new y(t.slice(0,t.length-1).concat(e),e,0)}_getNextMatch(){if(!this._editor.hasModel())return null;if(this.currentMatch){const e=this.currentMatch;return this.currentMatch=null,e}this.findController.highlightFindOptions();const e=this._editor.getSelections(),t=e[e.length-1],i=this._editor.getModel().findNextMatch(this.searchText,t.getEndPosition(),!1,this.matchCase,this.wholeWord?this._editor.getOption(115):null,!1);return i?new u.Y(i.range.startLineNumber,i.range.startColumn,i.range.endLineNumber,i.range.endColumn):null}addSelectionToPreviousFindMatch(){if(!this._editor.hasModel())return null;const e=this._getPreviousMatch();if(!e)return null;const t=this._editor.getSelections();return new y(t.concat(e),e,0)}moveSelectionToPreviousFindMatch(){if(!this._editor.hasModel())return null;const e=this._getPreviousMatch();if(!e)return null;const t=this._editor.getSelections();return new y(t.slice(0,t.length-1).concat(e),e,0)}_getPreviousMatch(){if(!this._editor.hasModel())return null;if(this.currentMatch){const e=this.currentMatch;return this.currentMatch=null,e}this.findController.highlightFindOptions();const e=this._editor.getSelections(),t=e[e.length-1],i=this._editor.getModel().findPreviousMatch(this.searchText,t.getStartPosition(),!1,this.matchCase,this.wholeWord?this._editor.getOption(115):null,!1);return i?new u.Y(i.range.startLineNumber,i.range.startColumn,i.range.endLineNumber,i.range.endColumn):null}selectAll(){return this._editor.hasModel()?(this.findController.highlightFindOptions(),this._editor.getModel().findMatches(this.searchText,!0,!1,this.matchCase,this.wholeWord?this._editor.getOption(115):null,!1,1073741824)):[]}}class D extends r.JT{constructor(e){super(),this._sessionDispose=this._register(new r.SL),this._editor=e,this._ignoreSelectionChange=!1,this._session=null}static get(e){return e.getContribution(D.ID)}dispose(){this._endSession(),super.dispose()}_beginSessionIfNeeded(e){if(!this._session){const t=M.create(this._editor,e);if(!t)return;this._session=t;const i={searchString:this._session.searchText};this._session.isDisconnectedFromFindController&&(i.wholeWordOverride=1,i.matchCaseOverride=1,i.isRegexOverride=2),e.getState().change(i,!1),this._sessionDispose.add(this._editor.onDidChangeCursorSelection((e=>{this._ignoreSelectionChange||this._endSession()}))),this._sessionDispose.add(this._editor.onDidBlurEditorText((()=>{this._endSession()}))),this._sessionDispose.add(e.getState().onFindReplaceStateChange((e=>{(e.matchCase||e.wholeWord)&&this._endSession()})))}}_endSession(){if(this._sessionDispose.clear(),this._session&&this._session.isDisconnectedFromFindController){const e={wholeWordOverride:0,matchCaseOverride:0,isRegexOverride:0};this._session.findController.getState().change(e,!1)}this._session=null}_setSelections(e){this._ignoreSelectionChange=!0,this._editor.setSelections(e),this._ignoreSelectionChange=!1}_expandEmptyToWord(e,t){if(!t.isEmpty())return t;const i=this._editor.getConfiguredWordAtPosition(t.getStartPosition());return i?new u.Y(t.startLineNumber,i.startColumn,t.startLineNumber,i.endColumn):t}_applySessionResult(e){e&&(this._setSelections(e.selections),e.revealRange&&this._editor.revealRangeInCenterIfOutsideViewport(e.revealRange,e.revealScrollType))}getSession(e){return this._session}addSelectionToNextFindMatch(e){if(this._editor.hasModel()){if(!this._session){const t=this._editor.getSelections();if(t.length>1){const i=e.getState().matchCase;if(!H(this._editor.getModel(),t,i)){const e=this._editor.getModel();let i=[];for(let n=0,o=t.length;n<o;n++)i[n]=this._expandEmptyToWord(e,t[n]);return void this._editor.setSelections(i)}}}this._beginSessionIfNeeded(e),this._session&&this._applySessionResult(this._session.addSelectionToNextFindMatch())}}addSelectionToPreviousFindMatch(e){this._beginSessionIfNeeded(e),this._session&&this._applySessionResult(this._session.addSelectionToPreviousFindMatch())}moveSelectionToNextFindMatch(e){this._beginSessionIfNeeded(e),this._session&&this._applySessionResult(this._session.moveSelectionToNextFindMatch())}moveSelectionToPreviousFindMatch(e){this._beginSessionIfNeeded(e),this._session&&this._applySessionResult(this._session.moveSelectionToPreviousFindMatch())}selectAll(e){if(!this._editor.hasModel())return;let t=null;const i=e.getState();if(i.isRevealed&&i.searchString.length>0&&i.isRegex)t=this._editor.getModel().findMatches(i.searchString,!0,i.isRegex,i.matchCase,i.wholeWord?this._editor.getOption(115):null,!1,1073741824);else{if(this._beginSessionIfNeeded(e),!this._session)return;t=this._session.selectAll()}if(i.searchScope){const e=i.searchScope;let n=[];t.forEach((t=>{e.forEach((e=>{t.range.endLineNumber<=e.endLineNumber&&t.range.startLineNumber>=e.startLineNumber&&n.push(t)}))})),t=n}if(t.length>0){const e=this._editor.getSelection();for(let i=0,n=t.length;i<n;i++){const n=t[i];if(n.range.intersectRanges(e)){t[i]=t[0],t[0]=n;break}}this._setSelections(t.map((e=>new u.Y(e.range.startLineNumber,e.range.startColumn,e.range.endLineNumber,e.range.endColumn))))}}}D.ID="editor.contrib.multiCursorController";class T extends l.R6{run(e,t){const i=D.get(t);if(!i)return;const n=f.CommonFindController.get(t);if(!n)return;const o=t._getViewModel();if(o){const e=o.getCursorStates();this._run(i,n),_(e,o.getCursorStates())}}}class E extends T{constructor(){super({id:"editor.action.addSelectionToNextFindMatch",label:n.N("addSelectionToNextFindMatch","Add Selection To Next Find Match"),alias:"Add Selection To Next Find Match",precondition:void 0,kbOpts:{kbExpr:h.u.focus,primary:2082,weight:100},menuOpts:{menuId:v.eH.MenubarSelectionMenu,group:"3_multi",title:n.N({key:"miAddSelectionToNextFindMatch",comment:["&& denotes a mnemonic"]},"Add &&Next Occurrence"),order:5}})}_run(e,t){e.addSelectionToNextFindMatch(t)}}class R extends T{constructor(){super({id:"editor.action.addSelectionToPreviousFindMatch",label:n.N("addSelectionToPreviousFindMatch","Add Selection To Previous Find Match"),alias:"Add Selection To Previous Find Match",precondition:void 0,menuOpts:{menuId:v.eH.MenubarSelectionMenu,group:"3_multi",title:n.N({key:"miAddSelectionToPreviousFindMatch",comment:["&& denotes a mnemonic"]},"Add P&&revious Occurrence"),order:6}})}_run(e,t){e.addSelectionToPreviousFindMatch(t)}}class O extends T{constructor(){super({id:"editor.action.moveSelectionToNextFindMatch",label:n.N("moveSelectionToNextFindMatch","Move Last Selection To Next Find Match"),alias:"Move Last Selection To Next Find Match",precondition:void 0,kbOpts:{kbExpr:h.u.focus,primary:(0,s.gx)(2089,2082),weight:100}})}_run(e,t){e.moveSelectionToNextFindMatch(t)}}class A extends T{constructor(){super({id:"editor.action.moveSelectionToPreviousFindMatch",label:n.N("moveSelectionToPreviousFindMatch","Move Last Selection To Previous Find Match"),alias:"Move Last Selection To Previous Find Match",precondition:void 0})}_run(e,t){e.moveSelectionToPreviousFindMatch(t)}}class P extends T{constructor(){super({id:"editor.action.selectHighlights",label:n.N("selectAllOccurrencesOfFindMatch","Select All Occurrences of Find Match"),alias:"Select All Occurrences of Find Match",precondition:void 0,kbOpts:{kbExpr:h.u.focus,primary:3114,weight:100},menuOpts:{menuId:v.eH.MenubarSelectionMenu,group:"3_multi",title:n.N({key:"miSelectHighlights",comment:["&& denotes a mnemonic"]},"Select All &&Occurrences"),order:7}})}_run(e,t){e.selectAll(t)}}class k extends T{constructor(){super({id:"editor.action.changeAll",label:n.N("changeAll.label","Change All Occurrences"),alias:"Change All Occurrences",precondition:S.Ao.and(h.u.writable,h.u.editorTextFocus),kbOpts:{kbExpr:h.u.editorTextFocus,primary:2108,weight:100},contextMenuOpts:{group:"1_modification",order:1.2}})}_run(e,t){e.selectAll(t)}}class F{constructor(e,t,i,n){this.searchText=e,this.matchCase=t,this.wordSeparators=i,this.modelVersionId=n}static softEquals(e,t){return!e&&!t||!(!e||!t)&&(e.searchText===t.searchText&&e.matchCase===t.matchCase&&e.wordSeparators===t.wordSeparators&&e.modelVersionId===t.modelVersionId)}}class W extends r.JT{constructor(e){super(),this.editor=e,this._isEnabled=e.getOption(96),this.decorations=[],this.updateSoon=this._register(new o.pY((()=>this._update()),300)),this.state=null,this._register(e.onDidChangeConfiguration((t=>{this._isEnabled=e.getOption(96)}))),this._register(e.onDidChangeCursorSelection((e=>{this._isEnabled&&(e.selection.isEmpty()?3===e.reason?(this.state&&this._setState(null),this.updateSoon.schedule()):this._setState(null):this._update())}))),this._register(e.onDidChangeModel((e=>{this._setState(null)}))),this._register(e.onDidChangeModelContent((e=>{this._isEnabled&&this.updateSoon.schedule()}))),this._register(f.CommonFindController.get(e).getState().onFindReplaceStateChange((e=>{this._update()})))}_update(){this._setState(W._createState(this._isEnabled,this.editor))}static _createState(e,t){if(!e)return null;if(!t.hasModel())return null;const i=t.getSelection();if(i.startLineNumber!==i.endLineNumber)return null;const n=D.get(t);if(!n)return null;const o=f.CommonFindController.get(t);if(!o)return null;let s=n.getSession(o);if(!s){const e=t.getSelections();if(e.length>1){const i=o.getState().matchCase;if(!H(t.getModel(),e,i))return null}s=M.create(t,o)}if(!s)return null;if(s.currentMatch)return null;if(/^[ \t]+$/.test(s.searchText))return null;if(s.searchText.length>200)return null;const r=o.getState(),a=r.matchCase;if(r.isRevealed){let e=r.searchString;a||(e=e.toLowerCase());let t=s.searchText;if(a||(t=t.toLowerCase()),e===t&&s.matchCase===r.matchCase&&s.wholeWord===r.wholeWord&&!r.isRegex)return null}return new F(s.searchText,s.matchCase,s.wholeWord?t.getOption(115):null,t.getModel().getVersionId())}_setState(e){if(F.softEquals(this.state,e))return void(this.state=e);if(this.state=e,!this.state)return void(this.decorations=this.editor.deltaDecorations(this.decorations,[]));if(!this.editor.hasModel())return;const t=this.editor.getModel();if(t.isTooLargeForTokenization())return;const i=m.vH.has(t)&&this.editor.getOption(70);let n=t.findMatches(this.state.searchText,!0,!1,this.state.matchCase,this.state.wordSeparators,!1).map((e=>e.range));n.sort(c.e.compareRangesUsingStarts);let o=this.editor.getSelections();o.sort(c.e.compareRangesUsingStarts);let s=[];for(let e=0,t=0,i=n.length,r=o.length;e<i;){const i=n[e];if(t>=r)s.push(i),e++;else{const n=c.e.compareRangesUsingStarts(i,o[t]);n<0?(!o[t].isEmpty()&&c.e.areIntersecting(i,o[t])||s.push(i),e++):(n>0||e++,t++)}}const r=s.map((e=>({range:e,options:i?W._SELECTION_HIGHLIGHT:W._SELECTION_HIGHLIGHT_OVERVIEW})));this.decorations=this.editor.deltaDecorations(this.decorations,r)}dispose(){this._setState(null),super.dispose()}}function H(e,t,i){const n=U(e,t[0],!i);for(let o=1,s=t.length;o<s;o++){const s=t[o];if(s.isEmpty())return!1;if(n!==U(e,s,!i))return!1}return!0}function U(e,t,i){const n=e.getValueInRange(t);return i?n.toLowerCase():n}W.ID="editor.contrib.selectionHighlighter",W._SELECTION_HIGHLIGHT_OVERVIEW=p.qx.register({description:"selection-highlight-overview",stickiness:1,className:"selectionHighlight",overviewRuler:{color:(0,b.EN)(C.SP),position:g.sh.Center}}),W._SELECTION_HIGHLIGHT=p.qx.register({description:"selection-highlight",stickiness:1,className:"selectionHighlight"}),(0,l._K)(D.ID,D),(0,l._K)(W.ID,W),(0,l.Qr)(L),(0,l.Qr)(w),(0,l.Qr)(x),(0,l.Qr)(E),(0,l.Qr)(R),(0,l.Qr)(O),(0,l.Qr)(A),(0,l.Qr)(P),(0,l.Qr)(k),(0,l.Qr)(I),(0,l.Qr)(N)},40517:function(e,t,i){i.r(t),i.d(t,{TriggerParameterHintsAction:function(){return G}});var n=i(63580),o=i(5976),s=i(72065),r=i(29102),a=i(38819),l=i(16830),d=i(65321),c=i(85152),u=i(65388),h=i(4669),g=i(71531),p=i(88527),m=i(17301),f=i(50187),v=i(44101),C=i(71050),b=i(94565),S=i(70666),_=i(98401),L=i(88216),w=function(e,t,i,n){return new(i||(i=Promise))((function(o,s){function r(e){try{l(n.next(e))}catch(e){s(e)}}function a(e){try{l(n.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}l((n=n.apply(e,t||[])).next())}))};const x={Visible:new a.uy("parameterHintsVisible",!1),MultipleSignatures:new a.uy("parameterHintsMultipleSignatures",!1)};function I(e,t,i,n){return w(this,void 0,void 0,(function*(){const o=v.nD.ordered(e);for(const s of o)try{const o=yield s.provideSignatureHelp(e,t,n,i);if(o)return o}catch(e){(0,m.Cp)(e)}}))}b.P.registerCommand("_executeSignatureHelpProvider",((e,...t)=>w(void 0,void 0,void 0,(function*(){const[i,n,o]=t;(0,_.p_)(S.o.isUri(i)),(0,_.p_)(f.L.isIPosition(n)),(0,_.p_)("string"==typeof o||!o);const s=yield e.get(L.S).createModelReference(i);try{const e=yield I(s.object.textEditorModel,f.L.lift(n),{triggerKind:v.WW.Invoke,isRetrigger:!1,triggerCharacter:o},C.T.None);if(!e)return;return setTimeout((()=>e.dispose()),0),e.value}finally{s.dispose()}}))));var N,y=i(50988),M=i(73910),D=i(97781),T=i(15393),E=i(44906),R=function(e,t,i,n){return new(i||(i=Promise))((function(o,s){function r(e){try{l(n.next(e))}catch(e){s(e)}}function a(e){try{l(n.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}l((n=n.apply(e,t||[])).next())}))};!function(e){e.Default={type:0};e.Pending=class{constructor(e,t){this.request=e,this.previouslyActiveHints=t,this.type=2}};e.Active=class{constructor(e){this.hints=e,this.type=1}}}(N||(N={}));class O extends o.JT{constructor(e,t=O.DEFAULT_DELAY){super(),this._onChangedHints=this._register(new h.Q5),this.onChangedHints=this._onChangedHints.event,this.triggerOnType=!1,this._state=N.Default,this._pendingTriggers=[],this._lastSignatureHelpResult=this._register(new o.XK),this.triggerChars=new E.q,this.retriggerChars=new E.q,this.triggerId=0,this.editor=e,this.throttledDelayer=new T.vp(t),this._register(this.editor.onDidBlurEditorWidget((()=>this.cancel()))),this._register(this.editor.onDidChangeConfiguration((()=>this.onEditorConfigurationChange()))),this._register(this.editor.onDidChangeModel((e=>this.onModelChanged()))),this._register(this.editor.onDidChangeModelLanguage((e=>this.onModelChanged()))),this._register(this.editor.onDidChangeCursorSelection((e=>this.onCursorChange(e)))),this._register(this.editor.onDidChangeModelContent((e=>this.onModelContentChange()))),this._register(v.nD.onDidChange(this.onModelChanged,this)),this._register(this.editor.onDidType((e=>this.onDidType(e)))),this.onEditorConfigurationChange(),this.onModelChanged()}get state(){return this._state}set state(e){2===this._state.type&&this._state.request.cancel(),this._state=e}cancel(e=!1){this.state=N.Default,this.throttledDelayer.cancel(),e||this._onChangedHints.fire(void 0)}trigger(e,t){const i=this.editor.getModel();if(!i||!v.nD.has(i))return;const n=++this.triggerId;this._pendingTriggers.push(e),this.throttledDelayer.trigger((()=>this.doTrigger(n)),t).catch(m.dL)}next(){if(1!==this.state.type)return;const e=this.state.hints.signatures.length,t=this.state.hints.activeSignature,i=t%e==e-1,n=this.editor.getOption(74).cycle;!(e<2||i)||n?this.updateActiveSignature(i&&n?0:t+1):this.cancel()}previous(){if(1!==this.state.type)return;const e=this.state.hints.signatures.length,t=this.state.hints.activeSignature,i=0===t,n=this.editor.getOption(74).cycle;!(e<2||i)||n?this.updateActiveSignature(i&&n?e-1:t-1):this.cancel()}updateActiveSignature(e){1===this.state.type&&(this.state=new N.Active(Object.assign(Object.assign({},this.state.hints),{activeSignature:e})),this._onChangedHints.fire(this.state.hints))}doTrigger(e){return R(this,void 0,void 0,(function*(){const t=1===this.state.type||2===this.state.type,i=this.getLastActiveHints();if(this.cancel(!0),0===this._pendingTriggers.length)return!1;const n=this._pendingTriggers.reduce(A);this._pendingTriggers=[];const o={triggerKind:n.triggerKind,triggerCharacter:n.triggerCharacter,isRetrigger:t,activeSignatureHelp:i};if(!this.editor.hasModel())return!1;const s=this.editor.getModel(),r=this.editor.getPosition();this.state=new N.Pending((0,T.PG)((e=>I(s,r,o,e))),i);try{const t=yield this.state.request;return e!==this.triggerId?(null==t||t.dispose(),!1):t&&t.value.signatures&&0!==t.value.signatures.length?(this.state=new N.Active(t.value),this._lastSignatureHelpResult.value=t,this._onChangedHints.fire(this.state.hints),!0):(null==t||t.dispose(),this._lastSignatureHelpResult.clear(),this.cancel(),!1)}catch(t){return e===this.triggerId&&(this.state=N.Default),(0,m.dL)(t),!1}}))}getLastActiveHints(){switch(this.state.type){case 1:return this.state.hints;case 2:return this.state.previouslyActiveHints;default:return}}get isTriggered(){return 1===this.state.type||2===this.state.type||this.throttledDelayer.isTriggered()}onModelChanged(){this.cancel(),this.triggerChars=new E.q,this.retriggerChars=new E.q;const e=this.editor.getModel();if(e)for(const t of v.nD.ordered(e)){for(const e of t.signatureHelpTriggerCharacters||[])this.triggerChars.add(e.charCodeAt(0)),this.retriggerChars.add(e.charCodeAt(0));for(const e of t.signatureHelpRetriggerCharacters||[])this.retriggerChars.add(e.charCodeAt(0))}}onDidType(e){if(!this.triggerOnType)return;const t=e.length-1,i=e.charCodeAt(t);(this.triggerChars.has(i)||this.isTriggered&&this.retriggerChars.has(i))&&this.trigger({triggerKind:v.WW.TriggerCharacter,triggerCharacter:e.charAt(t)})}onCursorChange(e){"mouse"===e.source?this.cancel():this.isTriggered&&this.trigger({triggerKind:v.WW.ContentChange})}onModelContentChange(){this.isTriggered&&this.trigger({triggerKind:v.WW.ContentChange})}onEditorConfigurationChange(){this.triggerOnType=this.editor.getOption(74).enabled,this.triggerOnType||this.cancel()}dispose(){this.cancel(!0),super.dispose()}}function A(e,t){switch(t.triggerKind){case v.WW.Invoke:return t;case v.WW.ContentChange:return e;case v.WW.TriggerCharacter:default:return t}}O.DEFAULT_DELAY=120;var P=i(97295),k=i(73046),F=i(92321),W=i(59554),H=function(e,t,i,n){var o,s=arguments.length,r=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(s<3?o(r):s>3?o(t,i,r):o(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},U=function(e,t){return function(i,n){t(i,n,e)}};const V=d.$,K=(0,W.q5)("parameter-hints-next",k.lA.chevronDown,n.N("parameterHintsNextIcon","Icon for show next parameter hint.")),z=(0,W.q5)("parameter-hints-previous",k.lA.chevronUp,n.N("parameterHintsPreviousIcon","Icon for show previous parameter hint."));let j=class e extends o.JT{constructor(e,t,i,n){super(),this.editor=e,this.renderDisposeables=this._register(new o.SL),this.visible=!1,this.announcedLabel=null,this.allowEditorOverflow=!0,this.markdownRenderer=this._register(new p.$({editor:e},n,i)),this.model=this._register(new O(e)),this.keyVisible=x.Visible.bindTo(t),this.keyMultipleSignatures=x.MultipleSignatures.bindTo(t),this._register(this.model.onChangedHints((e=>{e?(this.show(),this.render(e)):this.hide()})))}createParameterHintDOMNodes(){const e=V(".editor-widget.parameter-hints-widget"),t=d.R3(e,V(".phwrapper"));t.tabIndex=-1;const i=d.R3(t,V(".controls")),n=d.R3(i,V(".button"+D.kS.asCSSSelector(z))),o=d.R3(i,V(".overloads")),s=d.R3(i,V(".button"+D.kS.asCSSSelector(K)));this._register(d.nm(n,"click",(e=>{d.zB.stop(e),this.previous()}))),this._register(d.nm(s,"click",(e=>{d.zB.stop(e),this.next()})));const r=V(".body"),a=new u.s$(r,{});this._register(a),t.appendChild(a.getDomNode());const l=d.R3(r,V(".signature")),c=d.R3(r,V(".docs"));e.style.userSelect="text",this.domNodes={element:e,signature:l,overloads:o,docs:c,scrollbar:a},this.editor.addContentWidget(this),this.hide(),this._register(this.editor.onDidChangeCursorSelection((e=>{this.visible&&this.editor.layoutContentWidget(this)})));const g=()=>{if(!this.domNodes)return;const e=this.editor.getOption(41);this.domNodes.element.style.fontSize=`${e.fontSize}px`};g(),this._register(h.ju.chain(this.editor.onDidChangeConfiguration.bind(this.editor)).filter((e=>e.hasChanged(41))).on(g,null)),this._register(this.editor.onDidLayoutChange((e=>this.updateMaxHeight()))),this.updateMaxHeight()}show(){this.visible||(this.domNodes||this.createParameterHintDOMNodes(),this.keyVisible.set(!0),this.visible=!0,setTimeout((()=>{this.domNodes&&this.domNodes.element.classList.add("visible")}),100),this.editor.layoutContentWidget(this))}hide(){this.renderDisposeables.clear(),this.visible&&(this.keyVisible.reset(),this.visible=!1,this.announcedLabel=null,this.domNodes&&this.domNodes.element.classList.remove("visible"),this.editor.layoutContentWidget(this))}getPosition(){return this.visible?{position:this.editor.getPosition(),preference:[1,2]}:null}render(e){var t;if(this.renderDisposeables.clear(),!this.domNodes)return;const i=e.signatures.length>1;this.domNodes.element.classList.toggle("multiple",i),this.keyMultipleSignatures.set(i),this.domNodes.signature.innerText="",this.domNodes.docs.innerText="";const o=e.signatures[e.activeSignature];if(!o)return;const s=d.R3(this.domNodes.signature,V(".code")),r=this.editor.getOption(41);s.style.fontSize=`${r.fontSize}px`,s.style.fontFamily=r.fontFamily;const a=o.parameters.length>0,l=null!==(t=o.activeParameter)&&void 0!==t?t:e.activeParameter;if(a)this.renderParameters(s,o,l);else{d.R3(s,V("span")).textContent=o.label}const u=o.parameters[l];if(null==u?void 0:u.documentation){const e=V("span.documentation");if("string"==typeof u.documentation)e.textContent=u.documentation;else{const t=this.renderMarkdownDocs(u.documentation);e.appendChild(t.element)}d.R3(this.domNodes.docs,V("p",{},e))}if(void 0===o.documentation);else if("string"==typeof o.documentation)d.R3(this.domNodes.docs,V("p",{},o.documentation));else{const e=this.renderMarkdownDocs(o.documentation);d.R3(this.domNodes.docs,e.element)}const h=this.hasDocs(o,u);if(this.domNodes.signature.classList.toggle("has-docs",h),this.domNodes.docs.classList.toggle("empty",!h),this.domNodes.overloads.textContent=String(e.activeSignature+1).padStart(e.signatures.length.toString().length,"0")+"/"+e.signatures.length,u){const e=this.getParameterLabel(o,l);this.announcedLabel!==e&&(c.Z9(n.N("hint","{0}, hint",e)),this.announcedLabel=e)}this.editor.layoutContentWidget(this),this.domNodes.scrollbar.scanDomNode()}renderMarkdownDocs(e){const t=this.renderDisposeables.add(this.markdownRenderer.render(e,{asyncRenderCallback:()=>{var e;null===(e=this.domNodes)||void 0===e||e.scrollbar.scanDomNode()}}));return t.element.classList.add("markdown-docs"),t}hasDocs(e,t){return!!(t&&"string"==typeof t.documentation&&(0,_.cW)(t.documentation).length>0)||(!!(t&&"object"==typeof t.documentation&&(0,_.cW)(t.documentation).value.length>0)||(!!(e.documentation&&"string"==typeof e.documentation&&(0,_.cW)(e.documentation).length>0)||!!(e.documentation&&"object"==typeof e.documentation&&(0,_.cW)(e.documentation.value).length>0)))}renderParameters(e,t,i){const[n,o]=this.getParameterLabelOffsets(t,i),s=document.createElement("span");s.textContent=t.label.substring(0,n);const r=document.createElement("span");r.textContent=t.label.substring(n,o),r.className="parameter active";const a=document.createElement("span");a.textContent=t.label.substring(o),d.R3(e,s,r,a)}getParameterLabel(e,t){const i=e.parameters[t];return Array.isArray(i.label)?e.label.substring(i.label[0],i.label[1]):i.label}getParameterLabelOffsets(e,t){const i=e.parameters[t];if(i){if(Array.isArray(i.label))return i.label;if(i.label.length){const t=new RegExp(`(\\W|^)${(0,P.ec)(i.label)}(?=\\W|$)`,"g");t.test(e.label);const n=t.lastIndex-i.label.length;return n>=0?[n,t.lastIndex]:[0,0]}return[0,0]}return[0,0]}next(){this.editor.focus(),this.model.next()}previous(){this.editor.focus(),this.model.previous()}cancel(){this.model.cancel()}getDomNode(){return this.domNodes||this.createParameterHintDOMNodes(),this.domNodes.element}getId(){return e.ID}trigger(e){this.model.trigger(e,0)}updateMaxHeight(){if(!this.domNodes)return;const e=`${Math.max(this.editor.getLayoutInfo().height/4,250)}px`;this.domNodes.element.style.maxHeight=e;const t=this.domNodes.element.getElementsByClassName("phwrapper");t.length&&(t[0].style.maxHeight=e)}};j.ID="editor.widget.parameterHintsWidget",j=H([U(1,a.i6),U(2,y.v4),U(3,g.h)],j),(0,D.Ic)(((e,t)=>{const i=e.getColor(M.CN);if(i){const n=e.type===F.e.HIGH_CONTRAST?2:1;t.addRule(`.monaco-editor .parameter-hints-widget { border: ${n}px solid ${i}; }`),t.addRule(`.monaco-editor .parameter-hints-widget.multiple .body { border-left: 1px solid ${i.transparent(.5)}; }`),t.addRule(`.monaco-editor .parameter-hints-widget .signature.has-docs { border-bottom: 1px solid ${i.transparent(.5)}; }`)}const n=e.getColor(M.yJ);n&&t.addRule(`.monaco-editor .parameter-hints-widget { background-color: ${n}; }`);const o=e.getColor(M.ur);o&&t.addRule(`.monaco-editor .parameter-hints-widget a { color: ${o}; }`);const s=e.getColor(M.Sb);s&&t.addRule(`.monaco-editor .parameter-hints-widget { color: ${s}; }`);const r=e.getColor(M.Sw);r&&t.addRule(`.monaco-editor .parameter-hints-widget code { background-color: ${r}; }`)}));var $=function(e,t,i,n){var o,s=arguments.length,r=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(s<3?o(r):s>3?o(t,i,r):o(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},Y=function(e,t){return function(i,n){t(i,n,e)}};let q=class e extends o.JT{constructor(e,t){super(),this.editor=e,this.widget=this._register(t.createInstance(j,this.editor))}static get(t){return t.getContribution(e.ID)}cancel(){this.widget.cancel()}previous(){this.widget.previous()}next(){this.widget.next()}trigger(e){this.widget.trigger(e)}};q.ID="editor.controller.parameterHints",q=$([Y(1,s.TG)],q);class G extends l.R6{constructor(){super({id:"editor.action.triggerParameterHints",label:n.N("parameterHints.trigger.label","Trigger Parameter Hints"),alias:"Trigger Parameter Hints",precondition:r.u.hasSignatureHelpProvider,kbOpts:{kbExpr:r.u.editorTextFocus,primary:3082,weight:100}})}run(e,t){const i=q.get(t);i&&i.trigger({triggerKind:v.WW.Invoke})}}(0,l._K)(q.ID,q),(0,l.Qr)(G);const Q=l._l.bindToContribution(q.get);(0,l.fK)(new Q({id:"closeParameterHints",precondition:x.Visible,handler:e=>e.cancel(),kbOpts:{weight:175,kbExpr:r.u.focus,primary:9,secondary:[1033]}})),(0,l.fK)(new Q({id:"showPrevParameterHint",precondition:a.Ao.and(x.Visible,x.MultipleSignatures),handler:e=>e.previous(),kbOpts:{weight:175,kbExpr:r.u.focus,primary:16,secondary:[528],mac:{primary:16,secondary:[528,302]}}})),(0,l.fK)(new Q({id:"showNextParameterHint",precondition:a.Ao.and(x.Visible,x.MultipleSignatures),handler:e=>e.next(),kbOpts:{weight:175,kbExpr:r.u.focus,primary:18,secondary:[530],mac:{primary:18,secondary:[530,300]}}}))}}]);