"use strict";(self.webpackChunkcloud_builder=self.webpackChunkcloud_builder||[]).push([[3963],{17355:function(e,t,o){o.r(t),o.d(t,{SelectionAnchorSet:function(){return p}});var i=o(16830),n=o(63580),s=o(29102),r=o(3860),a=o(22258),c=o(38819),d=o(59365),l=o(85152),h=function(e,t,o,i){var n,s=arguments.length,r=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,o,r):n(t,o))||r);return s>3&&r&&Object.defineProperty(t,o,r),r},u=function(e,t){return function(o,i){t(o,i,e)}},g=function(e,t,o,i){return new(o||(o=Promise))((function(n,s){function r(e){try{c(i.next(e))}catch(e){s(e)}}function a(e){try{c(i.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,a)}c((i=i.apply(e,t||[])).next())}))};const p=new c.uy("selectionAnchorSet",!1);let m=class e{constructor(e,t){this.editor=e,this.selectionAnchorSetContextKey=p.bindTo(t),this.modelChangeListener=e.onDidChangeModel((()=>this.selectionAnchorSetContextKey.reset()))}static get(t){return t.getContribution(e.ID)}setSelectionAnchor(){if(this.editor.hasModel()){const e=this.editor.getPosition(),t=this.decorationId?[this.decorationId]:[],o=this.editor.deltaDecorations(t,[{range:r.Y.fromPositions(e,e),options:{description:"selection-anchor",stickiness:1,hoverMessage:(new d.W5).appendText((0,n.N)("selectionAnchor","Selection Anchor")),className:"selection-anchor"}}]);this.decorationId=o[0],this.selectionAnchorSetContextKey.set(!!this.decorationId),(0,l.Z9)((0,n.N)("anchorSet","Anchor set at {0}:{1}",e.lineNumber,e.column))}}goToSelectionAnchor(){if(this.editor.hasModel()&&this.decorationId){const e=this.editor.getModel().getDecorationRange(this.decorationId);e&&this.editor.setPosition(e.getStartPosition())}}selectFromAnchorToCursor(){if(this.editor.hasModel()&&this.decorationId){const e=this.editor.getModel().getDecorationRange(this.decorationId);if(e){const t=this.editor.getPosition();this.editor.setSelection(r.Y.fromPositions(e.getStartPosition(),t)),this.cancelSelectionAnchor()}}}cancelSelectionAnchor(){this.decorationId&&(this.editor.deltaDecorations([this.decorationId],[]),this.decorationId=void 0,this.selectionAnchorSetContextKey.set(!1))}dispose(){this.cancelSelectionAnchor(),this.modelChangeListener.dispose()}};m.ID="editor.contrib.selectionAnchorController",m=h([u(1,c.i6)],m);class _ extends i.R6{constructor(){super({id:"editor.action.setSelectionAnchor",label:(0,n.N)("setSelectionAnchor","Set Selection Anchor"),alias:"Set Selection Anchor",precondition:void 0,kbOpts:{kbExpr:s.u.editorTextFocus,primary:(0,a.gx)(2089,2080),weight:100}})}run(e,t){return g(this,void 0,void 0,(function*(){m.get(t).setSelectionAnchor()}))}}class f extends i.R6{constructor(){super({id:"editor.action.goToSelectionAnchor",label:(0,n.N)("goToSelectionAnchor","Go to Selection Anchor"),alias:"Go to Selection Anchor",precondition:p})}run(e,t){return g(this,void 0,void 0,(function*(){m.get(t).goToSelectionAnchor()}))}}class C extends i.R6{constructor(){super({id:"editor.action.selectFromAnchorToCursor",label:(0,n.N)("selectFromAnchorToCursor","Select from Anchor to Cursor"),alias:"Select from Anchor to Cursor",precondition:p,kbOpts:{kbExpr:s.u.editorTextFocus,primary:(0,a.gx)(2089,2089),weight:100}})}run(e,t){return g(this,void 0,void 0,(function*(){m.get(t).selectFromAnchorToCursor()}))}}class v extends i.R6{constructor(){super({id:"editor.action.cancelSelectionAnchor",label:(0,n.N)("cancelSelectionAnchor","Cancel Selection Anchor"),alias:"Cancel Selection Anchor",precondition:p,kbOpts:{kbExpr:s.u.editorTextFocus,primary:9,weight:100}})}run(e,t){return g(this,void 0,void 0,(function*(){m.get(t).cancelSelectionAnchor()}))}}(0,i._K)(m.ID,m),(0,i.Qr)(_),(0,i.Qr)(f),(0,i.Qr)(C),(0,i.Qr)(v)},17084:function(e,t,o){o.r(t),o.d(t,{BracketMatchingController:function(){return y}});var i=o(63580),n=o(15393),s=o(5976),r=o(16830),a=o(50187),c=o(24314),d=o(3860),l=o(29102),h=o(84973),u=o(83103),g=o(27869),p=o(73910),m=o(97781),_=o(84144);const f=(0,p.P6)("editorOverviewRuler.bracketMatchForeground",{dark:"#A0A0A0",light:"#A0A0A0",hc:"#A0A0A0"},i.N("overviewRulerBracketMatchForeground","Overview ruler marker color for matching brackets."));class C extends r.R6{constructor(){super({id:"editor.action.jumpToBracket",label:i.N("smartSelect.jumpBracket","Go to Bracket"),alias:"Go to Bracket",precondition:void 0,kbOpts:{kbExpr:l.u.editorTextFocus,primary:3160,weight:100}})}run(e,t){let o=y.get(t);o&&o.jumpToBracket()}}class v extends r.R6{constructor(){super({id:"editor.action.selectToBracket",label:i.N("smartSelect.selectToBracket","Select to Bracket"),alias:"Select to Bracket",precondition:void 0,description:{description:"Select to Bracket",args:[{name:"args",schema:{type:"object",properties:{selectBrackets:{type:"boolean",default:!0}}}}]}})}run(e,t,o){const i=y.get(t);if(!i)return;let n=!0;o&&!1===o.selectBrackets&&(n=!1),i.selectToBracket(n)}}class b{constructor(e,t,o){this.position=e,this.brackets=t,this.options=o}}class y extends s.JT{constructor(e){super(),this._editor=e,this._lastBracketsData=[],this._lastVersionId=0,this._decorations=[],this._updateBracketsSoon=this._register(new n.pY((()=>this._updateBrackets()),50)),this._matchBrackets=this._editor.getOption(62),this._updateBracketsSoon.schedule(),this._register(e.onDidChangeCursorPosition((e=>{"never"!==this._matchBrackets&&this._updateBracketsSoon.schedule()}))),this._register(e.onDidChangeModelContent((e=>{this._updateBracketsSoon.schedule()}))),this._register(e.onDidChangeModel((e=>{this._lastBracketsData=[],this._decorations=[],this._updateBracketsSoon.schedule()}))),this._register(e.onDidChangeModelLanguageConfiguration((e=>{this._lastBracketsData=[],this._updateBracketsSoon.schedule()}))),this._register(e.onDidChangeConfiguration((e=>{e.hasChanged(62)&&(this._matchBrackets=this._editor.getOption(62),this._decorations=this._editor.deltaDecorations(this._decorations,[]),this._lastBracketsData=[],this._lastVersionId=0,this._updateBracketsSoon.schedule())})))}static get(e){return e.getContribution(y.ID)}jumpToBracket(){if(!this._editor.hasModel())return;const e=this._editor.getModel(),t=this._editor.getSelections().map((t=>{const o=t.getStartPosition(),i=e.matchBracket(o);let n=null;if(i)i[0].containsPosition(o)?n=i[1].getStartPosition():i[1].containsPosition(o)&&(n=i[0].getStartPosition());else{const t=e.findEnclosingBrackets(o);if(t)n=t[0].getStartPosition();else{const t=e.findNextBracket(o);t&&t.range&&(n=t.range.getStartPosition())}}return n?new d.Y(n.lineNumber,n.column,n.lineNumber,n.column):new d.Y(o.lineNumber,o.column,o.lineNumber,o.column)}));this._editor.setSelections(t),this._editor.revealRange(t[0])}selectToBracket(e){if(!this._editor.hasModel())return;const t=this._editor.getModel(),o=[];this._editor.getSelections().forEach((i=>{const n=i.getStartPosition();let s=t.matchBracket(n);if(!s&&(s=t.findEnclosingBrackets(n),!s)){const e=t.findNextBracket(n);e&&e.range&&(s=t.matchBracket(e.range.getStartPosition()))}let r=null,a=null;if(s){s.sort(c.e.compareRangesUsingStarts);const[t,o]=s;r=e?t.getStartPosition():t.getEndPosition(),a=e?o.getEndPosition():o.getStartPosition()}r&&a&&o.push(new d.Y(r.lineNumber,r.column,a.lineNumber,a.column))})),o.length>0&&(this._editor.setSelections(o),this._editor.revealRange(o[0]))}_updateBrackets(){if("never"===this._matchBrackets)return;this._recomputeBrackets();let e=[],t=0;for(const o of this._lastBracketsData){let i=o.brackets;i&&(e[t++]={range:i[0],options:o.options},e[t++]={range:i[1],options:o.options})}this._decorations=this._editor.deltaDecorations(this._decorations,e)}_recomputeBrackets(){if(!this._editor.hasModel())return this._lastBracketsData=[],void(this._lastVersionId=0);const e=this._editor.getSelections();if(e.length>100)return this._lastBracketsData=[],void(this._lastVersionId=0);const t=this._editor.getModel(),o=t.getVersionId();let i=[];this._lastVersionId===o&&(i=this._lastBracketsData);let n=[],s=0;for(let t=0,o=e.length;t<o;t++){let o=e[t];o.isEmpty()&&(n[s++]=o.getStartPosition())}n.length>1&&n.sort(a.L.compare);let r=[],c=0,d=0,l=i.length;for(let e=0,o=n.length;e<o;e++){let o=n[e];for(;d<l&&i[d].position.isBefore(o);)d++;if(d<l&&i[d].position.equals(o))r[c++]=i[d];else{let e=t.matchBracket(o),i=y._DECORATION_OPTIONS_WITH_OVERVIEW_RULER;e||"always"!==this._matchBrackets||(e=t.findEnclosingBrackets(o,20),i=y._DECORATION_OPTIONS_WITHOUT_OVERVIEW_RULER),r[c++]=new b(o,e,i)}}this._lastBracketsData=r,this._lastVersionId=o}}y.ID="editor.contrib.bracketMatchingController",y._DECORATION_OPTIONS_WITH_OVERVIEW_RULER=u.qx.register({description:"bracket-match-overview",stickiness:1,className:"bracket-match",overviewRuler:{color:(0,m.EN)(f),position:h.sh.Center}}),y._DECORATION_OPTIONS_WITHOUT_OVERVIEW_RULER=u.qx.register({description:"bracket-match-no-overview",stickiness:1,className:"bracket-match"}),(0,r._K)(y.ID,y),(0,r.Qr)(v),(0,r.Qr)(C),(0,m.Ic)(((e,t)=>{const o=e.getColor(g.TC);o&&t.addRule(`.monaco-editor .bracket-match { background-color: ${o}; }`);const i=e.getColor(g.Dl);i&&t.addRule(`.monaco-editor .bracket-match { border: 1px solid ${i}; }`)})),_.BH.appendMenuItem(_.eH.MenubarGoMenu,{group:"5_infile_nav",command:{id:"editor.action.jumpToBracket",title:i.N({key:"miGoToBracket",comment:["&& denotes a mnemonic"]},"Go to &&Bracket")},order:2})},84594:function(e,t,o){o.r(t);var i=o(63580),n=o(16830),s=o(29102),r=o(24314),a=o(3860);class c{constructor(e,t){this._selection=e,this._isMovingLeft=t}getEditOperations(e,t){if(this._selection.startLineNumber!==this._selection.endLineNumber||this._selection.isEmpty())return;const o=this._selection.startLineNumber,i=this._selection.startColumn,n=this._selection.endColumn;if((!this._isMovingLeft||1!==i)&&(this._isMovingLeft||n!==e.getLineMaxColumn(o)))if(this._isMovingLeft){const s=new r.e(o,i-1,o,i),a=e.getValueInRange(s);t.addEditOperation(s,null),t.addEditOperation(new r.e(o,n,o,n),a)}else{const s=new r.e(o,n,o,n+1),a=e.getValueInRange(s);t.addEditOperation(s,null),t.addEditOperation(new r.e(o,i,o,i),a)}}computeCursorState(e,t){return this._isMovingLeft?new a.Y(this._selection.startLineNumber,this._selection.startColumn-1,this._selection.endLineNumber,this._selection.endColumn-1):new a.Y(this._selection.startLineNumber,this._selection.startColumn+1,this._selection.endLineNumber,this._selection.endColumn+1)}}class d extends n.R6{constructor(e,t){super(t),this.left=e}run(e,t){if(!t.hasModel())return;let o=[],i=t.getSelections();for(const e of i)o.push(new c(e,this.left));t.pushUndoStop(),t.executeCommands(this.id,o),t.pushUndoStop()}}(0,n.Qr)(class extends d{constructor(){super(!0,{id:"editor.action.moveCarretLeftAction",label:i.N("caret.moveLeft","Move Selected Text Left"),alias:"Move Selected Text Left",precondition:s.u.writable})}}),(0,n.Qr)(class extends d{constructor(){super(!1,{id:"editor.action.moveCarretRightAction",label:i.N("caret.moveRight","Move Selected Text Right"),alias:"Move Selected Text Right",precondition:s.u.writable})}})},77847:function(e,t,o){o.r(t);var i=o(63580),n=o(16830),s=o(61329),r=o(24314),a=o(29102),c=o(88784);class d extends n.R6{constructor(){super({id:"editor.action.transposeLetters",label:i.N("transposeLetters.label","Transpose Letters"),alias:"Transpose Letters",precondition:a.u.writable,kbOpts:{kbExpr:a.u.textInputFocus,primary:0,mac:{primary:306},weight:100}})}run(e,t){if(!t.hasModel())return;let o=t.getModel(),i=[],n=t.getSelections();for(let e of n){if(!e.isEmpty())continue;let t=e.startLineNumber,n=e.startColumn,a=o.getLineMaxColumn(t);if(1===t&&(1===n||2===n&&2===a))continue;let d=n===a?e.getPosition():c.o.rightPosition(o,e.getPosition().lineNumber,e.getPosition().column),l=c.o.leftPosition(o,d),h=c.o.leftPosition(o,l),u=o.getValueInRange(r.e.fromPositions(h,l)),g=o.getValueInRange(r.e.fromPositions(l,d)),p=r.e.fromPositions(h,d);i.push(new s.T4(p,g+u))}i.length>0&&(t.pushUndoStop(),t.executeCommands(this.id,i),t.pushUndoStop())}}(0,n.Qr)(d)},62015:function(e,t,o){o.r(t),o.d(t,{CutAction:function(){return C},CopyAction:function(){return v},PasteAction:function(){return b}});var i=o(63580),n=o(16268),s=o(1432),r=o(35715),a=o(16830),c=o(11640),d=o(29102),l=o(84144),h=o(84972),u=function(e,t,o,i){return new(o||(o=Promise))((function(n,s){function r(e){try{c(i.next(e))}catch(e){s(e)}}function a(e){try{c(i.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,a)}c((i=i.apply(e,t||[])).next())}))};const g="9_cutcopypaste",p=s.tY||document.queryCommandSupported("cut"),m=s.tY||document.queryCommandSupported("copy"),_=void 0!==navigator.clipboard&&!n.vU||document.queryCommandSupported("paste");function f(e){return e.register(),e}const C=p?f(new a.AJ({id:"editor.action.clipboardCutAction",precondition:void 0,kbOpts:s.tY?{primary:2102,win:{primary:2102,secondary:[1044]},weight:100}:void 0,menuOpts:[{menuId:l.eH.MenubarEditMenu,group:"2_ccp",title:i.N({key:"miCut",comment:["&& denotes a mnemonic"]},"Cu&&t"),order:1},{menuId:l.eH.EditorContext,group:g,title:i.N("actions.clipboard.cutLabel","Cut"),when:d.u.writable,order:1},{menuId:l.eH.CommandPalette,group:"",title:i.N("actions.clipboard.cutLabel","Cut"),order:1},{menuId:l.eH.SimpleEditorContext,group:g,title:i.N("actions.clipboard.cutLabel","Cut"),when:d.u.writable,order:1}]})):void 0,v=m?f(new a.AJ({id:"editor.action.clipboardCopyAction",precondition:void 0,kbOpts:s.tY?{primary:2081,win:{primary:2081,secondary:[2067]},weight:100}:void 0,menuOpts:[{menuId:l.eH.MenubarEditMenu,group:"2_ccp",title:i.N({key:"miCopy",comment:["&& denotes a mnemonic"]},"&&Copy"),order:2},{menuId:l.eH.EditorContext,group:g,title:i.N("actions.clipboard.copyLabel","Copy"),order:2},{menuId:l.eH.CommandPalette,group:"",title:i.N("actions.clipboard.copyLabel","Copy"),order:1},{menuId:l.eH.SimpleEditorContext,group:g,title:i.N("actions.clipboard.copyLabel","Copy"),order:2}]})):void 0;l.BH.appendMenuItem(l.eH.MenubarEditMenu,{submenu:l.eH.MenubarCopy,title:{value:i.N("copy as","Copy As"),original:"Copy As"},group:"2_ccp",order:3}),l.BH.appendMenuItem(l.eH.EditorContext,{submenu:l.eH.EditorContextCopy,title:{value:i.N("copy as","Copy As"),original:"Copy As"},group:g,order:3});const b=_?f(new a.AJ({id:"editor.action.clipboardPasteAction",precondition:void 0,kbOpts:s.tY?{primary:2100,win:{primary:2100,secondary:[1043]},linux:{primary:2100,secondary:[1043]},weight:100}:void 0,menuOpts:[{menuId:l.eH.MenubarEditMenu,group:"2_ccp",title:i.N({key:"miPaste",comment:["&& denotes a mnemonic"]},"&&Paste"),order:4},{menuId:l.eH.EditorContext,group:g,title:i.N("actions.clipboard.pasteLabel","Paste"),when:d.u.writable,order:4},{menuId:l.eH.CommandPalette,group:"",title:i.N("actions.clipboard.pasteLabel","Paste"),order:1},{menuId:l.eH.SimpleEditorContext,group:g,title:i.N("actions.clipboard.pasteLabel","Paste"),when:d.u.writable,order:4}]})):void 0;class y extends a.R6{constructor(){super({id:"editor.action.clipboardCopyWithSyntaxHighlightingAction",label:i.N("actions.clipboard.copyWithSyntaxHighlightingLabel","Copy With Syntax Highlighting"),alias:"Copy With Syntax Highlighting",precondition:void 0,kbOpts:{kbExpr:d.u.textInputFocus,primary:0,weight:100}})}run(e,t){if(!t.hasModel())return;!t.getOption(30)&&t.getSelection().isEmpty()||(r.RA.forceCopyWithSyntaxHighlighting=!0,t.focus(),document.execCommand("copy"),r.RA.forceCopyWithSyntaxHighlighting=!1)}}function w(e,t){e&&(e.addImplementation(1e4,"code-editor",((e,o)=>{const i=e.get(c.$).getFocusedCodeEditor();if(i&&i.hasTextFocus()){const e=i.getOption(30),o=i.getSelection();return o&&o.isEmpty()&&!e||document.execCommand(t),!0}return!1})),e.addImplementation(0,"generic-dom",((e,o)=>(document.execCommand(t),!0))))}w(C,"cut"),w(v,"copy"),b&&(b.addImplementation(1e4,"code-editor",((e,t)=>{const o=e.get(c.$),i=e.get(h.p),n=o.getFocusedCodeEditor();if(n&&n.hasTextFocus()){return!(!document.execCommand("paste")&&s.$L)||(u(void 0,void 0,void 0,(function*(){const e=yield i.readText();if(""!==e){const t=r.Nl.INSTANCE.get(e);let o=!1,i=null,s=null;t&&(o=n.getOption(30)&&!!t.isFromEmptySelection,i=void 0!==t.multicursorText?t.multicursorText:null,s=t.mode),n.trigger("keyboard","paste",{text:e,pasteOnNewLine:o,multicursorText:i,mode:s})}})),!0)}return!1})),b.addImplementation(0,"generic-dom",((e,t)=>(document.execCommand("paste"),!0)))),m&&(0,a.Qr)(y)},31907:function(e,t,o){o.d(t,{RB:function(){return f},Bb:function(){return C},MN:function(){return v},uH:function(){return b},TM:function(){return y},bA:function(){return w},aI:function(){return L}});var i=o(9488),n=o(71050),s=o(17301),r=o(5976),a=o(70666),c=o(39925),d=o(24314),l=o(3860),h=o(44101),u=o(51200),g=o(89532),p=o(90535),m=o(94565),_=function(e,t,o,i){return new(o||(o=Promise))((function(n,s){function r(e){try{c(i.next(e))}catch(e){s(e)}}function a(e){try{c(i.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,a)}c((i=i.apply(e,t||[])).next())}))};const f="editor.action.codeAction",C="editor.action.refactor",v="editor.action.sourceAction",b="editor.action.organizeImports",y="editor.action.fixAll";class w{constructor(e,t){this.action=e,this.provider=t}resolve(e){var t;return _(this,void 0,void 0,(function*(){if((null===(t=this.provider)||void 0===t?void 0:t.resolveCodeAction)&&!this.action.edit){let t;try{t=yield this.provider.resolveCodeAction(this.action,e)}catch(e){(0,s.Cp)(e)}t&&(this.action.edit=t.edit)}return this}))}}class S extends r.JT{constructor(e,t,o){super(),this.documentation=t,this._register(o),this.allActions=[...e].sort(S.codeActionsComparator),this.validActions=this.allActions.filter((({action:e})=>!e.disabled))}static codeActionsComparator({action:e},{action:t}){return e.isPreferred&&!t.isPreferred?-1:!e.isPreferred&&t.isPreferred?1:(0,i.Of)(e.diagnostics)?(0,i.Of)(t.diagnostics)?e.diagnostics[0].message.localeCompare(t.diagnostics[0].message):-1:(0,i.Of)(t.diagnostics)?1:0}get hasAutoFix(){return this.validActions.some((({action:e})=>!!e.kind&&g.yN.QuickFix.contains(new g.yN(e.kind))&&!!e.isPreferred))}}const N={actions:[],documentation:void 0};function L(e,t,o,n,a){var d;const l=o.filter||{},u={only:null===(d=l.include)||void 0===d?void 0:d.value,trigger:o.type},p=new c.YQ(e,a),m=function(e,t){return h.H9.all(e).filter((e=>!e.providedCodeActionKinds||e.providedCodeActionKinds.some((e=>(0,g.EU)(t,new g.yN(e))))))}(e,l),f=new r.SL,C=m.map((o=>_(this,void 0,void 0,(function*(){try{n.report(o);const i=yield o.provideCodeActions(e,t,u,p.token);if(i&&f.add(i),p.token.isCancellationRequested)return N;const s=((null==i?void 0:i.actions)||[]).filter((e=>e&&(0,g.Yl)(l,e))),r=function(e,t,o){if(!e.documentation)return;const i=e.documentation.map((e=>({kind:new g.yN(e.kind),command:e.command})));if(o){let e;for(const t of i)t.kind.contains(o)&&(e?e.kind.contains(t.kind)&&(e=t):e=t);if(e)return null==e?void 0:e.command}for(const e of t)if(e.kind)for(const t of i)if(t.kind.contains(new g.yN(e.kind)))return t.command;return}(o,s,l.include);return{actions:s.map((e=>new w(e,o))),documentation:r}}catch(e){if((0,s.VV)(e))throw e;return(0,s.Cp)(e),N}})))),v=h.H9.onDidChange((()=>{const t=h.H9.all(e);(0,i.fS)(t,m)||p.cancel()}));return Promise.all(C).then((e=>{const t=(0,i.xH)(e.map((e=>e.actions))),o=(0,i.kX)(e.map((e=>e.documentation)));return new S(t,o,f)})).finally((()=>{v.dispose(),p.dispose()}))}m.P.registerCommand("_executeCodeActionProvider",(function(e,t,o,i,r){return _(this,void 0,void 0,(function*(){if(!(t instanceof a.o))throw(0,s.b1)();const c=e.get(u.q).getModel(t);if(!c)throw(0,s.b1)();const h=l.Y.isISelection(o)?l.Y.liftSelection(o):d.e.isIRange(o)?c.validateRange(o):void 0;if(!h)throw(0,s.b1)();const m="string"==typeof i?new g.yN(i):void 0,_=yield L(c,h,{type:1,filter:{includeSourceActions:!0,include:m}},p.E.None,n.T.None),f=[],C=Math.min(_.validActions.length,"number"==typeof r?r:0);for(let e=0;e<C;e++)f.push(_.validActions[e].resolve(n.T.None));try{return yield Promise.all(f),_.validActions.map((e=>e.action))}finally{setTimeout((()=>_.dispose()),100)}}))}))},59471:function(e,t,o){o.d(t,{S5:function(){return Se},dW:function(){return Ce},Hv:function(){return we},o$:function(){return ye},E7:function(){return fe},pY:function(){return pe},Eb:function(){return ve},VQ:function(){return be}});var i=o(71050),n=o(79579),s=o(5976),r=o(97295),a=o(16830),c=o(66007),d=o(29102),l=o(31907),h=o(17301),u=o(82276),g=o(72065),p=o(65321),m=o(74741),_=o(50187),f=o(44101),C=o(89532),v=o(5606),b=o(91847),y=function(e,t,o,i){var n,s=arguments.length,r=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,o,r):n(t,o))||r);return s>3&&r&&Object.defineProperty(t,o,r),r},w=function(e,t){return function(o,i){t(o,i,e)}},S=function(e,t,o,i){return new(o||(o=Promise))((function(n,s){function r(e){try{c(i.next(e))}catch(e){s(e)}}function a(e){try{c(i.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,a)}c((i=i.apply(e,t||[])).next())}))};class N extends m.aU{constructor(e,t){super(e.command?e.command.id:e.title,e.title.replace(/\r\n|\r|\n/g," "),void 0,!e.disabled,t),this.action=e}}let L=class extends s.JT{constructor(e,t,o,i){super(),this._editor=e,this._delegate=t,this._contextMenuService=o,this._visible=!1,this._showingActions=this._register(new s.XK),this._keybindingResolver=new x({getKeybindings:()=>i.getKeybindings()})}get isVisible(){return this._visible}show(e,t,o,i){return S(this,void 0,void 0,(function*(){const n=i.includeDisabledActions?t.allActions:t.validActions;if(!n.length)return void(this._visible=!1);if(!this._editor.getDomNode())throw this._visible=!1,(0,h.F0)();this._visible=!0,this._showingActions.value=t;const s=this.getMenuActions(e,n,t.documentation),r=_.L.isIPosition(o)?this._toCoords(o):o||{x:0,y:0},a=this._keybindingResolver.getResolver(),c=this._editor.getOption(113);this._contextMenuService.showContextMenu({domForShadowRoot:c?this._editor.getDomNode():void 0,getAnchor:()=>r,getActions:()=>s,onHide:()=>{this._visible=!1,this._editor.focus()},autoSelectFirstItem:!0,getKeyBinding:e=>e instanceof N?a(e.action):void 0})}))}getMenuActions(e,t,o){var i,n;const s=e=>new N(e.action,(()=>this._delegate.onSelectCodeAction(e))),r=t.map(s),a=[...o],c=this._editor.getModel();if(c&&r.length)for(const o of f.H9.all(c))o._getAdditionalMenuItems&&a.push(...o._getAdditionalMenuItems({trigger:e.type,only:null===(n=null===(i=e.filter)||void 0===i?void 0:i.include)||void 0===n?void 0:n.value},t.map((e=>e.action))));return a.length&&r.push(new m.Z0,...a.map((e=>s(new l.bA({title:e.title,command:e},void 0))))),r}_toCoords(e){if(!this._editor.hasModel())return{x:0,y:0};this._editor.revealPosition(e,1),this._editor.render();const t=this._editor.getScrolledVisiblePosition(e),o=(0,p.i)(this._editor.getDomNode());return{x:o.left+t.left,y:o.top+t.top+t.height}}};L=y([w(2,v.i),w(3,b.d)],L);class x{constructor(e){this._keybindingProvider=e}getResolver(){const e=new n.o((()=>this._keybindingProvider.getKeybindings().filter((e=>x.codeActionCommands.indexOf(e.command)>=0)).filter((e=>e.resolvedKeybinding)).map((e=>{let t=e.commandArgs;return e.command===l.uH?t={kind:C.yN.SourceOrganizeImports.value}:e.command===l.TM&&(t={kind:C.yN.SourceFixAll.value}),Object.assign({resolvedKeybinding:e.resolvedKeybinding},C.wZ.fromUser(t,{kind:C.yN.None,apply:"never"}))}))));return t=>{if(t.kind){const o=this.bestKeybindingForCodeAction(t,e.getValue());return null==o?void 0:o.resolvedKeybinding}}}bestKeybindingForCodeAction(e,t){if(!e.kind)return;const o=new C.yN(e.kind);return t.filter((e=>e.kind.contains(o))).filter((t=>!t.preferred||e.isPreferred)).reduceRight(((e,t)=>e?e.kind.contains(t.kind)?t:e:t),void 0)}}x.codeActionCommands=[l.Bb,l.RB,l.MN,l.uH,l.TM];var k,A=o(57974),D=o(4669),M=o(83103),P=o(63580),I=o(97781),T=o(73910),O=o(10553),E=o(73046),R=function(e,t,o,i){var n,s=arguments.length,r=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,o,r):n(t,o))||r);return s>3&&r&&Object.defineProperty(t,o,r),r},F=function(e,t){return function(o,i){t(o,i,e)}};!function(e){e.Hidden={type:0};e.Showing=class{constructor(e,t,o,i){this.actions=e,this.trigger=t,this.editorPosition=o,this.widgetPosition=i,this.type=1}}}(k||(k={}));let B=class e extends s.JT{constructor(e,t,o,i){super(),this._editor=e,this._quickFixActionId=t,this._preferredFixActionId=o,this._keybindingService=i,this._onClick=this._register(new D.Q5),this.onClick=this._onClick.event,this._state=k.Hidden,this._domNode=document.createElement("div"),this._domNode.className=E.lA.lightBulb.classNames,this._editor.addContentWidget(this),this._register(this._editor.onDidChangeModelContent((e=>{const t=this._editor.getModel();(1!==this.state.type||!t||this.state.editorPosition.lineNumber>=t.getLineCount())&&this.hide()}))),O.o.ignoreTarget(this._domNode),this._register(p.Gw(this._domNode,(e=>{if(1!==this.state.type)return;this._editor.focus(),e.preventDefault();const{top:t,height:o}=p.i(this._domNode),i=this._editor.getOption(57);let n=Math.floor(i/3);null!==this.state.widgetPosition.position&&this.state.widgetPosition.position.lineNumber<this.state.editorPosition.lineNumber&&(n+=i),this._onClick.fire({x:e.posx,y:t+o+n,actions:this.state.actions,trigger:this.state.trigger})}))),this._register(p.nm(this._domNode,"mouseenter",(e=>{if(1!=(1&e.buttons))return;this.hide();const t=new A.Z;t.startMonitoring(e.target,e.buttons,A.e,(()=>{}),(()=>{t.dispose()}))}))),this._register(this._editor.onDidChangeConfiguration((e=>{e.hasChanged(55)&&!this._editor.getOption(55).enabled&&this.hide()}))),this._updateLightBulbTitleAndIcon(),this._register(this._keybindingService.onDidUpdateKeybindings(this._updateLightBulbTitleAndIcon,this))}dispose(){super.dispose(),this._editor.removeContentWidget(this)}getId(){return"LightBulbWidget"}getDomNode(){return this._domNode}getPosition(){return 1===this._state.type?this._state.widgetPosition:null}update(t,o,i){if(t.validActions.length<=0)return this.hide();const n=this._editor.getOptions();if(!n.get(55).enabled)return this.hide();const s=this._editor.getModel();if(!s)return this.hide();const{lineNumber:r,column:a}=s.validatePosition(i),c=s.getOptions().tabSize,d=n.get(41),l=s.getLineContent(r),h=M.yO.computeIndentLevel(l,c),u=e=>e>2&&this._editor.getTopForLineNumber(e)===this._editor.getTopForLineNumber(e-1);let g=r;if(!(d.spaceWidth*h>22))if(r>1&&!u(r-1))g-=1;else if(u(r+1)){if(a*d.spaceWidth<22)return this.hide()}else g+=1;this.state=new k.Showing(t,o,i,{position:{lineNumber:g,column:1},preference:e._posPref}),this._editor.layoutContentWidget(this)}hide(){this.state=k.Hidden,this._editor.layoutContentWidget(this)}get state(){return this._state}set state(e){this._state=e,this._updateLightBulbTitleAndIcon()}_updateLightBulbTitleAndIcon(){if(1===this.state.type&&this.state.actions.hasAutoFix){this._domNode.classList.remove(...E.lA.lightBulb.classNamesArray),this._domNode.classList.add(...E.lA.lightbulbAutofix.classNamesArray);const e=this._keybindingService.lookupKeybinding(this._preferredFixActionId);if(e)return void(this.title=P.N("prefferedQuickFixWithKb","Show Fixes. Preferred Fix Available ({0})",e.getLabel()))}this._domNode.classList.remove(...E.lA.lightbulbAutofix.classNamesArray),this._domNode.classList.add(...E.lA.lightBulb.classNamesArray);const e=this._keybindingService.lookupKeybinding(this._quickFixActionId);this.title=e?P.N("quickFixWithKb","Show Fixes ({0})",e.getLabel()):P.N("quickFix","Show Fixes")}set title(e){this._domNode.title=e}};B._posPref=[0],B=R([F(3,b.d)],B),(0,I.Ic)(((e,t)=>{var o;const i=null===(o=e.getColor(T.cv))||void 0===o?void 0:o.transparent(.7),n=e.getColor(T.Fu);n&&t.addRule(`\n\t\t.monaco-editor .contentWidgets ${E.lA.lightBulb.cssSelector} {\n\t\t\tcolor: ${n};\n\t\t\tbackground-color: ${i};\n\t\t}`);const s=e.getColor(T.sK);s&&t.addRule(`\n\t\t.monaco-editor .contentWidgets ${E.lA.lightbulbAutofix.cssSelector} {\n\t\t\tcolor: ${s};\n\t\t\tbackground-color: ${i};\n\t\t}`)}));var H,V=function(e,t,o,i){var n,s=arguments.length,r=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,o,r):n(t,o))||r);return s>3&&r&&Object.defineProperty(t,o,r),r},W=function(e,t){return function(o,i){t(o,i,e)}},U=function(e,t,o,i){return new(o||(o=Promise))((function(n,s){function r(e){try{c(i.next(e))}catch(e){s(e)}}function a(e){try{c(i.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,a)}c((i=i.apply(e,t||[])).next())}))},K=function(e,t,o,i,n){if("m"===i)throw new TypeError("Private method is not writable");if("a"===i&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?n.call(e,o):n?n.value=o:t.set(e,o),o},$=function(e,t,o,i){if("a"===o&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===o?i:"a"===o?i.call(e):i?i.value:t.get(e)};let j=class extends s.JT{constructor(e,t,o,i,r){super(),this._editor=e,this.delegate=i,this._activeCodeActions=this._register(new s.XK),H.set(this,!1),this._codeActionWidget=new n.o((()=>this._register(r.createInstance(L,this._editor,{onSelectCodeAction:e=>U(this,void 0,void 0,(function*(){this.delegate.applyCodeAction(e,!0)}))})))),this._lightBulbWidget=new n.o((()=>{const e=this._register(r.createInstance(B,this._editor,t,o));return this._register(e.onClick((e=>this.showCodeActionList(e.trigger,e.actions,e,{includeDisabledActions:!1})))),e}))}dispose(){K(this,H,!0,"f"),super.dispose()}update(e){var t,o,i;return U(this,void 0,void 0,(function*(){if(1!==e.type)return void(null===(t=this._lightBulbWidget.rawValue)||void 0===t||t.hide());let n;try{n=yield e.actions}catch(e){return void(0,h.dL)(e)}if(!$(this,H,"f"))if(this._lightBulbWidget.getValue().update(n,e.trigger,e.position),1===e.trigger.type){if(null===(o=e.trigger.filter)||void 0===o?void 0:o.include){const t=this.tryGetValidActionToApply(e.trigger,n);if(t){try{yield this.delegate.applyCodeAction(t,!1)}finally{n.dispose()}return}if(e.trigger.context){const t=this.getInvalidActionThatWouldHaveBeenApplied(e.trigger,n);if(t&&t.action.disabled)return u.O.get(this._editor).showMessage(t.action.disabled,e.trigger.context.position),void n.dispose()}}const t=!!(null===(i=e.trigger.filter)||void 0===i?void 0:i.include);if(e.trigger.context&&(!n.allActions.length||!t&&!n.validActions.length))return u.O.get(this._editor).showMessage(e.trigger.context.notAvailableMessage,e.trigger.context.position),this._activeCodeActions.value=n,void n.dispose();this._activeCodeActions.value=n,this._codeActionWidget.getValue().show(e.trigger,n,e.position,{includeDisabledActions:t})}else this._codeActionWidget.getValue().isVisible?n.dispose():this._activeCodeActions.value=n}))}getInvalidActionThatWouldHaveBeenApplied(e,t){if(t.allActions.length)return"first"===e.autoApply&&0===t.validActions.length||"ifSingle"===e.autoApply&&1===t.allActions.length?t.allActions.find((({action:e})=>e.disabled)):void 0}tryGetValidActionToApply(e,t){if(t.validActions.length)return"first"===e.autoApply&&t.validActions.length>0||"ifSingle"===e.autoApply&&1===t.validActions.length?t.validActions[0]:void 0}showCodeActionList(e,t,o,i){return U(this,void 0,void 0,(function*(){this._codeActionWidget.getValue().show(e,t,o,i)}))}};H=new WeakMap,j=V([W(4,g.TG)],j);var Q,Y=o(94565),z=o(38819),q=o(98674),Z=o(59422),J=o(90535),G=o(10829),X=o(15393),ee=o(95935),te=o(24314),oe=function(e,t,o,i){if("a"===o&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===o?i:"a"===o?i.call(e):i?i.value:t.get(e)},ie=function(e,t,o,i,n){if("m"===i)throw new TypeError("Private method is not writable");if("a"===i&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?n.call(e,o):n?n.value=o:t.set(e,o),o};const ne=new z.uy("supportedCodeAction","");class se extends s.JT{constructor(e,t,o,i=250){super(),this._editor=e,this._markerService=t,this._signalChange=o,this._delay=i,this._autoTriggerTimer=this._register(new X._F),this._register(this._markerService.onMarkerChanged((e=>this._onMarkerChanges(e)))),this._register(this._editor.onDidChangeCursorPosition((()=>this._onCursorChange())))}trigger(e){const t=this._getRangeOfSelectionUnlessWhitespaceEnclosed(e);return this._createEventAndSignalChange(e,t)}_onMarkerChanges(e){const t=this._editor.getModel();t&&e.some((e=>(0,ee.Xy)(e,t.uri)))&&this._autoTriggerTimer.cancelAndSet((()=>{this.trigger({type:2})}),this._delay)}_onCursorChange(){this._autoTriggerTimer.cancelAndSet((()=>{this.trigger({type:2})}),this._delay)}_getRangeOfMarker(e){const t=this._editor.getModel();if(t)for(const o of this._markerService.read({resource:t.uri})){const i=t.validateRange(o);if(te.e.intersectRanges(i,e))return te.e.lift(i)}}_getRangeOfSelectionUnlessWhitespaceEnclosed(e){if(!this._editor.hasModel())return;const t=this._editor.getModel(),o=this._editor.getSelection();if(o.isEmpty()&&2===e.type){const{lineNumber:e,column:i}=o.getPosition(),n=t.getLineContent(e);if(0===n.length)return;if(1===i){if(/\s/.test(n[0]))return}else if(i===t.getLineMaxColumn(e)){if(/\s/.test(n[n.length-1]))return}else if(/\s/.test(n[i-2])&&/\s/.test(n[i-1]))return}return o}_createEventAndSignalChange(e,t){const o=this._editor.getModel();if(!t||!o)return void this._signalChange(void 0);const i=this._getRangeOfMarker(t),n=i?i.getStartPosition():t.getStartPosition(),s={trigger:e,selection:t,position:n};return this._signalChange(s),s}}var re;!function(e){e.Empty={type:0};e.Triggered=class{constructor(e,t,o,i){this.trigger=e,this.rangeOrSelection=t,this.position=o,this._cancellablePromise=i,this.type=1,this.actions=i.catch((e=>{if((0,h.VV)(e))return ae;throw e}))}cancel(){this._cancellablePromise.cancel()}}}(re||(re={}));const ae={allActions:[],validActions:[],dispose:()=>{},documentation:[],hasAutoFix:!1};class ce extends s.JT{constructor(e,t,o,i){super(),this._editor=e,this._markerService=t,this._progressService=i,this._codeActionOracle=this._register(new s.XK),this._state=re.Empty,this._onDidChangeState=this._register(new D.Q5),this.onDidChangeState=this._onDidChangeState.event,Q.set(this,!1),this._supportedCodeActions=ne.bindTo(o),this._register(this._editor.onDidChangeModel((()=>this._update()))),this._register(this._editor.onDidChangeModelLanguage((()=>this._update()))),this._register(f.H9.onDidChange((()=>this._update()))),this._update()}dispose(){oe(this,Q,"f")||(ie(this,Q,!0,"f"),super.dispose(),this.setState(re.Empty,!0))}_update(){if(oe(this,Q,"f"))return;this._codeActionOracle.value=void 0,this.setState(re.Empty);const e=this._editor.getModel();if(e&&f.H9.has(e)&&!this._editor.getOption(79)){const t=[];for(const o of f.H9.all(e))Array.isArray(o.providedCodeActionKinds)&&t.push(...o.providedCodeActionKinds);this._supportedCodeActions.set(t.join(" ")),this._codeActionOracle.value=new se(this._editor,this._markerService,(t=>{var o;if(!t)return void this.setState(re.Empty);const i=(0,X.PG)((o=>(0,l.aI)(e,t.selection,t.trigger,J.E.None,o)));1===t.trigger.type&&(null===(o=this._progressService)||void 0===o||o.showWhile(i,250)),this.setState(new re.Triggered(t.trigger,t.selection,t.position,i))}),void 0),this._codeActionOracle.value.trigger({type:2})}else this._supportedCodeActions.reset()}trigger(e){this._codeActionOracle.value&&this._codeActionOracle.value.trigger(e)}setState(e,t){e!==this._state&&(1===this._state.type&&this._state.cancel(),this._state=e,t||oe(this,Q,"f")||this._onDidChangeState.fire(e))}}Q=new WeakMap;var de=function(e,t,o,i){var n,s=arguments.length,r=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,o,r):n(t,o))||r);return s>3&&r&&Object.defineProperty(t,o,r),r},le=function(e,t){return function(o,i){t(o,i,e)}},he=function(e,t,o,i){return new(o||(o=Promise))((function(n,s){function r(e){try{c(i.next(e))}catch(e){s(e)}}function a(e){try{c(i.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,a)}c((i=i.apply(e,t||[])).next())}))};function ue(e){return z.Ao.regex(ne.keys()[0],new RegExp("(\\s|^)"+(0,r.ec)(e.value)+"\\b"))}const ge={type:"object",defaultSnippets:[{body:{kind:""}}],properties:{kind:{type:"string",description:P.N("args.schema.kind","Kind of the code action to run.")},apply:{type:"string",description:P.N("args.schema.apply","Controls when the returned actions are applied."),default:"ifSingle",enum:["first","ifSingle","never"],enumDescriptions:[P.N("args.schema.apply.first","Always apply the first returned code action."),P.N("args.schema.apply.ifSingle","Apply the first returned code action if it is the only one."),P.N("args.schema.apply.never","Do not apply the returned code actions.")]},preferred:{type:"boolean",default:!1,description:P.N("args.schema.preferred","Controls if only preferred code actions should be returned.")}}};let pe=class e extends s.JT{constructor(e,t,o,i,s){super(),this._instantiationService=s,this._editor=e,this._model=this._register(new ce(this._editor,t,o,i)),this._register(this._model.onDidChangeState((e=>this.update(e)))),this._ui=new n.o((()=>this._register(new j(e,fe.Id,Se.Id,{applyCodeAction:(e,t)=>he(this,void 0,void 0,(function*(){try{yield this._applyCodeAction(e)}finally{t&&this._trigger({type:2,filter:{}})}}))},this._instantiationService))))}static get(t){return t.getContribution(e.ID)}update(e){this._ui.getValue().update(e)}showCodeActions(e,t,o){return this._ui.getValue().showCodeActionList(e,t,o,{includeDisabledActions:!1})}manualTriggerAtCurrentPosition(e,t,o){if(!this._editor.hasModel())return;u.O.get(this._editor).closeMessage();const i=this._editor.getPosition();this._trigger({type:1,filter:t,autoApply:o,context:{notAvailableMessage:e,position:i}})}_trigger(e){return this._model.trigger(e)}_applyCodeAction(e){return this._instantiationService.invokeFunction(me,e,this._editor)}};function me(e,t,o){return he(this,void 0,void 0,(function*(){const n=e.get(c.vu),s=e.get(Y.H),r=e.get(G.b),a=e.get(Z.lT);if(r.publicLog2("codeAction.applyCodeAction",{codeActionTitle:t.action.title,codeActionKind:t.action.kind,codeActionIsPreferred:!!t.action.isPreferred}),yield t.resolve(i.T.None),t.action.edit&&(yield n.apply(c.fo.convert(t.action.edit),{editor:o,label:t.action.title})),t.action.command)try{yield s.executeCommand(t.action.command.id,...t.action.command.arguments||[])}catch(e){const t=function(e){return"string"==typeof e?e:e instanceof Error&&"string"==typeof e.message?e.message:void 0}(e);a.error("string"==typeof t?t:P.N("applyCodeActionFailed","An unknown error occurred while applying the code action"))}}))}function _e(e,t,o,i){if(e.hasModel()){const n=pe.get(e);n&&n.manualTriggerAtCurrentPosition(t,o,i)}}pe.ID="editor.contrib.quickFixController",pe=de([le(1,q.lT),le(2,z.i6),le(3,J.e),le(4,g.TG)],pe);class fe extends a.R6{constructor(){super({id:fe.Id,label:P.N("quickfix.trigger.label","Quick Fix..."),alias:"Quick Fix...",precondition:z.Ao.and(d.u.writable,d.u.hasCodeActionsProvider),kbOpts:{kbExpr:d.u.editorTextFocus,primary:2132,weight:100}})}run(e,t){return _e(t,P.N("editor.action.quickFix.noneMessage","No code actions available"),void 0,void 0)}}fe.Id="editor.action.quickFix";class Ce extends a._l{constructor(){super({id:l.RB,precondition:z.Ao.and(d.u.writable,d.u.hasCodeActionsProvider),description:{description:"Trigger a code action",args:[{name:"args",schema:ge}]}})}runEditorCommand(e,t,o){const i=C.wZ.fromUser(o,{kind:C.yN.Empty,apply:"ifSingle"});return _e(t,"string"==typeof(null==o?void 0:o.kind)?i.preferred?P.N("editor.action.codeAction.noneMessage.preferred.kind","No preferred code actions for '{0}' available",o.kind):P.N("editor.action.codeAction.noneMessage.kind","No code actions for '{0}' available",o.kind):i.preferred?P.N("editor.action.codeAction.noneMessage.preferred","No preferred code actions available"):P.N("editor.action.codeAction.noneMessage","No code actions available"),{include:i.kind,includeSourceActions:!0,onlyIncludePreferredActions:i.preferred},i.apply)}}class ve extends a.R6{constructor(){super({id:l.Bb,label:P.N("refactor.label","Refactor..."),alias:"Refactor...",precondition:z.Ao.and(d.u.writable,d.u.hasCodeActionsProvider),kbOpts:{kbExpr:d.u.editorTextFocus,primary:3120,mac:{primary:1328},weight:100},contextMenuOpts:{group:"1_modification",order:2,when:z.Ao.and(d.u.writable,ue(C.yN.Refactor))},description:{description:"Refactor...",args:[{name:"args",schema:ge}]}})}run(e,t,o){const i=C.wZ.fromUser(o,{kind:C.yN.Refactor,apply:"never"});return _e(t,"string"==typeof(null==o?void 0:o.kind)?i.preferred?P.N("editor.action.refactor.noneMessage.preferred.kind","No preferred refactorings for '{0}' available",o.kind):P.N("editor.action.refactor.noneMessage.kind","No refactorings for '{0}' available",o.kind):i.preferred?P.N("editor.action.refactor.noneMessage.preferred","No preferred refactorings available"):P.N("editor.action.refactor.noneMessage","No refactorings available"),{include:C.yN.Refactor.contains(i.kind)?i.kind:C.yN.None,onlyIncludePreferredActions:i.preferred},i.apply)}}class be extends a.R6{constructor(){super({id:l.MN,label:P.N("source.label","Source Action..."),alias:"Source Action...",precondition:z.Ao.and(d.u.writable,d.u.hasCodeActionsProvider),contextMenuOpts:{group:"1_modification",order:2.1,when:z.Ao.and(d.u.writable,ue(C.yN.Source))},description:{description:"Source Action...",args:[{name:"args",schema:ge}]}})}run(e,t,o){const i=C.wZ.fromUser(o,{kind:C.yN.Source,apply:"never"});return _e(t,"string"==typeof(null==o?void 0:o.kind)?i.preferred?P.N("editor.action.source.noneMessage.preferred.kind","No preferred source actions for '{0}' available",o.kind):P.N("editor.action.source.noneMessage.kind","No source actions for '{0}' available",o.kind):i.preferred?P.N("editor.action.source.noneMessage.preferred","No preferred source actions available"):P.N("editor.action.source.noneMessage","No source actions available"),{include:C.yN.Source.contains(i.kind)?i.kind:C.yN.None,includeSourceActions:!0,onlyIncludePreferredActions:i.preferred},i.apply)}}class ye extends a.R6{constructor(){super({id:l.uH,label:P.N("organizeImports.label","Organize Imports"),alias:"Organize Imports",precondition:z.Ao.and(d.u.writable,ue(C.yN.SourceOrganizeImports)),kbOpts:{kbExpr:d.u.editorTextFocus,primary:1581,weight:100}})}run(e,t){return _e(t,P.N("editor.action.organize.noneMessage","No organize imports action available"),{include:C.yN.SourceOrganizeImports,includeSourceActions:!0},"ifSingle")}}class we extends a.R6{constructor(){super({id:l.TM,label:P.N("fixAll.label","Fix All"),alias:"Fix All",precondition:z.Ao.and(d.u.writable,ue(C.yN.SourceFixAll))})}run(e,t){return _e(t,P.N("fixAll.noneMessage","No fix all action available"),{include:C.yN.SourceFixAll,includeSourceActions:!0},"ifSingle")}}class Se extends a.R6{constructor(){super({id:Se.Id,label:P.N("autoFix.label","Auto Fix..."),alias:"Auto Fix...",precondition:z.Ao.and(d.u.writable,ue(C.yN.QuickFix)),kbOpts:{kbExpr:d.u.editorTextFocus,primary:1620,mac:{primary:2644},weight:100}})}run(e,t){return _e(t,P.N("editor.action.autoFix.noneMessage","No auto fixes available"),{include:C.yN.QuickFix,onlyIncludePreferredActions:!0},"ifSingle")}}Se.Id="editor.action.autoFix"},9093:function(e,t,o){o.r(t);var i=o(16830),n=o(59471);(0,i._K)(n.pY.ID,n.pY),(0,i.Qr)(n.E7),(0,i.Qr)(n.Eb),(0,i.Qr)(n.VQ),(0,i.Qr)(n.o$),(0,i.Qr)(n.S5),(0,i.Qr)(n.Hv),(0,i.fK)(new n.dW)},89532:function(e,t,o){o.d(t,{yN:function(){return i},EU:function(){return n},Yl:function(){return s},wZ:function(){return a}});class i{constructor(e){this.value=e}equals(e){return this.value===e.value}contains(e){return this.equals(e)||""===this.value||e.value.startsWith(this.value+i.sep)}intersects(e){return this.contains(e)||e.contains(this)}append(e){return new i(this.value+i.sep+e)}}function n(e,t){return!(e.include&&!e.include.intersects(t))&&((!e.excludes||!e.excludes.some((o=>r(t,o,e.include))))&&!(!e.includeSourceActions&&i.Source.contains(t)))}function s(e,t){const o=t.kind?new i(t.kind):void 0;return!!(!e.include||o&&e.include.contains(o))&&(!(e.excludes&&o&&e.excludes.some((t=>r(o,t,e.include))))&&(!(!e.includeSourceActions&&o&&i.Source.contains(o))&&!(e.onlyIncludePreferredActions&&!t.isPreferred)))}function r(e,t,o){return!!t.contains(e)&&(!o||!t.contains(o))}i.sep=".",i.None=new i("@@none@@"),i.Empty=new i(""),i.QuickFix=new i("quickfix"),i.Refactor=new i("refactor"),i.Source=new i("source"),i.SourceOrganizeImports=i.Source.append("organizeImports"),i.SourceFixAll=i.Source.append("fixAll");class a{constructor(e,t,o){this.kind=e,this.apply=t,this.preferred=o}static fromUser(e,t){return e&&"object"==typeof e?new a(a.getKindFromUser(e,t.kind),a.getApplyFromUser(e,t.apply),a.getPreferredUser(e)):new a(t.kind,t.apply,!1)}static getApplyFromUser(e,t){switch("string"==typeof e.apply?e.apply.toLowerCase():""){case"first":return"first";case"never":return"never";case"ifsingle":return"ifSingle";default:return t}}static getKindFromUser(e,t){return"string"==typeof e.kind?new i(e.kind):t}static getPreferredUser(e){return"boolean"==typeof e.preferred&&e.preferred}}},53832:function(e,t,o){o.r(t),o.d(t,{CodeLensContribution:function(){return Y}});var i=o(15393),n=o(17301),s=o(5976),r=o(39925),a=o(16830),c=o(44101),d=o(71050),l=o(70666),h=o(51200),u=o(94565),g=o(98401),p=function(e,t,o,i){return new(o||(o=Promise))((function(n,s){function r(e){try{c(i.next(e))}catch(e){s(e)}}function a(e){try{c(i.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,a)}c((i=i.apply(e,t||[])).next())}))};class m{constructor(){this.lenses=[],this._disposables=new s.SL}dispose(){this._disposables.dispose()}add(e,t){this._disposables.add(e);for(const o of e.lenses)this.lenses.push({symbol:o,provider:t})}}function _(e,t){return p(this,void 0,void 0,(function*(){const o=c.He.ordered(e),i=new Map,s=new m,r=o.map(((o,r)=>p(this,void 0,void 0,(function*(){i.set(o,r);try{const i=yield Promise.resolve(o.provideCodeLenses(e,t));i&&s.add(i,o)}catch(e){(0,n.Cp)(e)}}))));return yield Promise.all(r),s.lenses=s.lenses.sort(((e,t)=>e.symbol.range.startLineNumber<t.symbol.range.startLineNumber?-1:e.symbol.range.startLineNumber>t.symbol.range.startLineNumber?1:i.get(e.provider)<i.get(t.provider)?-1:i.get(e.provider)>i.get(t.provider)?1:e.symbol.range.startColumn<t.symbol.range.startColumn?-1:e.symbol.range.startColumn>t.symbol.range.startColumn?1:0)),s}))}u.P.registerCommand("_executeCodeLensProvider",(function(e,...t){let[o,i]=t;(0,g.p_)(l.o.isUri(o)),(0,g.p_)("number"==typeof i||!i);const r=e.get(h.q).getModel(o);if(!r)throw(0,n.b1)();const a=[],c=new s.SL;return _(r,d.T.None).then((e=>{c.add(e);let t=[];for(const o of e.lenses)null==i||Boolean(o.symbol.command)?a.push(o.symbol):i-- >0&&o.provider.resolveCodeLens&&t.push(Promise.resolve(o.provider.resolveCodeLens(r,o.symbol,d.T.None)).then((e=>a.push(e||o.symbol))));return Promise.all(t)})).then((()=>a)).finally((()=>{setTimeout((()=>c.dispose()),100)}))}));var f=o(65321),C=o(24314),v=o(83103),b=o(27869),y=o(73910),w=o(97781),S=o(56811);class N{constructor(e,t,o){this.afterLineNumber=e,this.heightInPx=t,this._onHeight=o,this.suppressMouseDown=!0,this.domNode=document.createElement("div")}onComputedHeight(e){void 0===this._lastHeight?this._lastHeight=e:this._lastHeight!==e&&(this._lastHeight=e,this._onHeight())}}class L{constructor(e,t,o){this.allowEditorOverflow=!1,this.suppressMouseDown=!0,this._commands=new Map,this._isEmpty=!0,this._editor=e,this._id="codelens.widget-"+L._idPool++,this.updatePosition(o),this._domNode=document.createElement("span"),this._domNode.className=`codelens-decoration ${t}`}withCommands(e,t){this._commands.clear();let o=[],i=!1;for(let t=0;t<e.length;t++){const n=e[t];if(n&&(i=!0,n.command)){const i=(0,S.T)(n.command.title.trim());n.command.id?(o.push(f.$("a",{id:String(t),title:n.command.tooltip},...i)),this._commands.set(String(t),n.command)):o.push(f.$("span",{title:n.command.tooltip},...i)),t+1<e.length&&o.push(f.$("span",void 0," | "))}}i?(f.mc(this._domNode,...o),this._isEmpty&&t&&this._domNode.classList.add("fadein"),this._isEmpty=!1):f.mc(this._domNode,f.$("span",void 0,"no commands"))}getCommand(e){return e.parentElement===this._domNode?this._commands.get(e.id):void 0}getId(){return this._id}getDomNode(){return this._domNode}updatePosition(e){const t=this._editor.getModel().getLineFirstNonWhitespaceColumn(e);this._widgetPosition={position:{lineNumber:e,column:t},preference:[1]}}getPosition(){return this._widgetPosition||null}}L._idPool=0;class x{constructor(){this._removeDecorations=[],this._addDecorations=[],this._addDecorationsCallbacks=[]}addDecoration(e,t){this._addDecorations.push(e),this._addDecorationsCallbacks.push(t)}removeDecoration(e){this._removeDecorations.push(e)}commit(e){let t=e.deltaDecorations(this._removeDecorations,this._addDecorations);for(let e=0,o=t.length;e<o;e++)this._addDecorationsCallbacks[e](t[e])}}class k{constructor(e,t,o,i,n,s,r){let a;this._isDisposed=!1,this._editor=t,this._className=o,this._data=e,this._decorationIds=[];let c=[];this._data.forEach(((e,t)=>{e.symbol.command&&c.push(e.symbol),i.addDecoration({range:e.symbol.range,options:v.qx.EMPTY},(e=>this._decorationIds[t]=e)),a=a?C.e.plusRange(a,e.symbol.range):C.e.lift(e.symbol.range)})),this._viewZone=new N(a.startLineNumber-1,s,r),this._viewZoneId=n.addZone(this._viewZone),c.length>0&&(this._createContentWidgetIfNecessary(),this._contentWidget.withCommands(c,!1))}_createContentWidgetIfNecessary(){this._contentWidget?this._editor.layoutContentWidget(this._contentWidget):(this._contentWidget=new L(this._editor,this._className,this._viewZone.afterLineNumber+1),this._editor.addContentWidget(this._contentWidget))}dispose(e,t){this._decorationIds.forEach(e.removeDecoration,e),this._decorationIds=[],t&&t.removeZone(this._viewZoneId),this._contentWidget&&(this._editor.removeContentWidget(this._contentWidget),this._contentWidget=void 0),this._isDisposed=!0}isDisposed(){return this._isDisposed}isValid(){return this._decorationIds.some(((e,t)=>{const o=this._editor.getModel().getDecorationRange(e),i=this._data[t].symbol;return!(!o||C.e.isEmpty(i.range)!==o.isEmpty())}))}updateCodeLensSymbols(e,t){this._decorationIds.forEach(t.removeDecoration,t),this._decorationIds=[],this._data=e,this._data.forEach(((e,o)=>{t.addDecoration({range:e.symbol.range,options:v.qx.EMPTY},(e=>this._decorationIds[o]=e))}))}updateHeight(e,t){this._viewZone.heightInPx=e,t.layoutZone(this._viewZoneId),this._contentWidget&&this._editor.layoutContentWidget(this._contentWidget)}computeIfNecessary(e){if(!this._viewZone.domNode.hasAttribute("monaco-visible-view-zone"))return null;for(let t=0;t<this._decorationIds.length;t++){const o=e.getDecorationRange(this._decorationIds[t]);o&&(this._data[t].symbol.range=o)}return this._data}updateCommands(e){this._createContentWidgetIfNecessary(),this._contentWidget.withCommands(e,!0);for(let t=0;t<this._data.length;t++){const o=e[t];if(o){const{symbol:e}=this._data[t];e.command=o.command||e.command}}}getCommand(e){var t;return null===(t=this._contentWidget)||void 0===t?void 0:t.getCommand(e)}getLineNumber(){const e=this._editor.getModel().getDecorationRange(this._decorationIds[0]);return e?e.startLineNumber:-1}update(e){if(this.isValid()){const t=this._editor.getModel().getDecorationRange(this._decorationIds[0]);t&&(this._viewZone.afterLineNumber=t.startLineNumber-1,e.layoutZone(this._viewZoneId),this._contentWidget&&(this._contentWidget.updatePosition(t.startLineNumber),this._editor.layoutContentWidget(this._contentWidget)))}}getItems(){return this._data}}(0,w.Ic)(((e,t)=>{const o=e.getColor(b.Yp);o&&(t.addRule(`.monaco-editor .codelens-decoration { color: ${o}; }`),t.addRule(`.monaco-editor .codelens-decoration .codicon { color: ${o}; }`));const i=e.getColor(y._Y);i&&(t.addRule(`.monaco-editor .codelens-decoration > a:hover { color: ${i} !important; }`),t.addRule(`.monaco-editor .codelens-decoration > a:hover .codicon { color: ${i} !important; }`))}));var A=o(59422),D=o(72065),M=o(65026),P=o(43702),I=o(52365),T=o(88289),O=function(e,t,o,i){var n,s=arguments.length,r=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,o,r):n(t,o))||r);return s>3&&r&&Object.defineProperty(t,o,r),r},E=function(e,t){return function(o,i){t(o,i,e)}};const R=(0,D.yh)("ICodeLensCache");class F{constructor(e,t){this.lineCount=e,this.data=t}}let B=class{constructor(e){this._fakeProvider=new class{provideCodeLenses(){throw new Error("not supported")}},this._cache=new P.z6(20,.75);(0,i.To)((()=>e.remove("codelens/cache",1)));const t="codelens/cache2",o=e.get(t,1,"{}");this._deserialize(o),(0,T.I)(e.onWillSaveState)((o=>{o.reason===I.fk.SHUTDOWN&&e.store(t,this._serialize(),1,1)}))}put(e,t){const o=t.lenses.map((e=>{var t;return{range:e.symbol.range,command:e.symbol.command&&{id:"",title:null===(t=e.symbol.command)||void 0===t?void 0:t.title}}})),i=new m;i.add({lenses:o,dispose:()=>{}},this._fakeProvider);const n=new F(e.getLineCount(),i);this._cache.set(e.uri.toString(),n)}get(e){const t=this._cache.get(e.uri.toString());return t&&t.lineCount===e.getLineCount()?t.data:void 0}delete(e){this._cache.delete(e.uri.toString())}_serialize(){const e=Object.create(null);for(const[t,o]of this._cache){const i=new Set;for(const e of o.data.lenses)i.add(e.symbol.range.startLineNumber);e[t]={lineCount:o.lineCount,lines:[...i.values()]}}return JSON.stringify(e)}_deserialize(e){try{const t=JSON.parse(e);for(const e in t){const o=t[e],i=[];for(const e of o.lines)i.push({range:new C.e(e,1,e,11)});const n=new m;n.add({lenses:i,dispose(){}},this._fakeProvider),this._cache.set(e,new F(o.lineCount,n))}}catch(e){}}};B=O([E(0,I.Uy)],B),(0,M.z)(R,B);var H=o(89954),V=o(41157),W=o(63580),U=o(29102),K=o(21036),$=function(e,t,o,i){var n,s=arguments.length,r=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,o,r):n(t,o))||r);return s>3&&r&&Object.defineProperty(t,o,r),r},j=function(e,t){return function(o,i){t(o,i,e)}},Q=function(e,t,o,i){return new(o||(o=Promise))((function(n,s){function r(e){try{c(i.next(e))}catch(e){s(e)}}function a(e){try{c(i.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,a)}c((i=i.apply(e,t||[])).next())}))};let Y=class{constructor(e,t,o,n){this._editor=e,this._commandService=t,this._notificationService=o,this._codeLensCache=n,this._disposables=new s.SL,this._localToDispose=new s.SL,this._lenses=[],this._getCodeLensModelDelays=new K.Y(c.He,250,2500),this._oldCodeLensModels=new s.SL,this._resolveCodeLensesDelays=new K.Y(c.He,250,2500),this._resolveCodeLensesScheduler=new i.pY((()=>this._resolveCodeLensesInViewport()),this._resolveCodeLensesDelays.min),this._disposables.add(this._editor.onDidChangeModel((()=>this._onModelChange()))),this._disposables.add(this._editor.onDidChangeModelLanguage((()=>this._onModelChange()))),this._disposables.add(this._editor.onDidChangeConfiguration((e=>{(e.hasChanged(41)||e.hasChanged(14)||e.hasChanged(13))&&this._updateLensStyle(),e.hasChanged(12)&&this._onModelChange()}))),this._disposables.add(c.He.onDidChange(this._onModelChange,this)),this._onModelChange(),this._styleClassName="_"+(0,H.vp)(this._editor.getId()).toString(16),this._styleElement=f.dS(f.OO(this._editor.getContainerDomNode())?this._editor.getContainerDomNode():void 0),this._updateLensStyle()}dispose(){var e;this._localDispose(),this._disposables.dispose(),this._oldCodeLensModels.dispose(),null===(e=this._currentCodeLensModel)||void 0===e||e.dispose(),this._styleElement.remove()}_getLayoutInfo(){let e,t=this._editor.getOption(14);return!t||t<5?(t=.9*this._editor.getOption(43)|0,e=this._editor.getOption(57)):e=t*Math.max(1.3,this._editor.getOption(57)/this._editor.getOption(43))|0,{codeLensHeight:e,fontSize:t}}_updateLensStyle(){const{codeLensHeight:e,fontSize:t}=this._getLayoutInfo(),o=this._editor.getOption(13),i=this._editor.getOption(41),n=`--codelens-font-family${this._styleClassName}`,s=`--codelens-font-features${this._styleClassName}`;let r=`\n\t\t.monaco-editor .codelens-decoration.${this._styleClassName} { line-height: ${e}px; font-size: ${t}px; padding-right: ${Math.round(.5*t)}px; font-feature-settings: var(${s}) }\n\t\t.monaco-editor .codelens-decoration.${this._styleClassName} span.codicon { line-height: ${e}px; font-size: ${t}px; }\n\t\t`;o&&(r+=`.monaco-editor .codelens-decoration.${this._styleClassName} { font-family: var(${n})}`),this._styleElement.textContent=r,this._editor.getContainerDomNode().style.setProperty(n,null!=o?o:"inherit"),this._editor.getContainerDomNode().style.setProperty(s,i.fontFeatureSettings),this._editor.changeViewZones((t=>{for(let o of this._lenses)o.updateHeight(e,t)}))}_localDispose(){var e,t,o;null===(e=this._getCodeLensModelPromise)||void 0===e||e.cancel(),this._getCodeLensModelPromise=void 0,null===(t=this._resolveCodeLensesPromise)||void 0===t||t.cancel(),this._resolveCodeLensesPromise=void 0,this._localToDispose.clear(),this._oldCodeLensModels.clear(),null===(o=this._currentCodeLensModel)||void 0===o||o.dispose()}_onModelChange(){this._localDispose();const e=this._editor.getModel();if(!e)return;if(!this._editor.getOption(12))return;const t=this._codeLensCache.get(e);if(t&&this._renderCodeLensSymbols(t),!c.He.has(e))return void(t&&this._localToDispose.add((0,i.Vg)((()=>{const o=this._codeLensCache.get(e);t===o&&(this._codeLensCache.delete(e),this._onModelChange())}),3e4)));for(const t of c.He.all(e))if("function"==typeof t.onDidChange){let e=t.onDidChange((()=>o.schedule()));this._localToDispose.add(e)}const o=new i.pY((()=>{var t;const s=Date.now();null===(t=this._getCodeLensModelPromise)||void 0===t||t.cancel(),this._getCodeLensModelPromise=(0,i.PG)((t=>_(e,t))),this._getCodeLensModelPromise.then((t=>{this._currentCodeLensModel&&this._oldCodeLensModels.add(this._currentCodeLensModel),this._currentCodeLensModel=t,this._codeLensCache.put(e,t);const i=this._getCodeLensModelDelays.update(e,Date.now()-s);o.delay=i,this._renderCodeLensSymbols(t),this._resolveCodeLensesInViewport()}),n.dL)}),this._getCodeLensModelDelays.get(e));this._localToDispose.add(o),this._localToDispose.add((0,s.OF)((()=>this._resolveCodeLensesScheduler.cancel()))),this._localToDispose.add(this._editor.onDidChangeModelContent((()=>{this._editor.changeDecorations((e=>{this._editor.changeViewZones((t=>{let o=[],i=-1;this._lenses.forEach((e=>{e.isValid()&&i!==e.getLineNumber()?(e.update(t),i=e.getLineNumber()):o.push(e)}));let n=new x;o.forEach((e=>{e.dispose(n,t),this._lenses.splice(this._lenses.indexOf(e),1)})),n.commit(e)}))})),o.schedule()}))),this._localToDispose.add(this._editor.onDidFocusEditorWidget((()=>{o.schedule()}))),this._localToDispose.add(this._editor.onDidScrollChange((e=>{e.scrollTopChanged&&this._lenses.length>0&&this._resolveCodeLensesInViewportSoon()}))),this._localToDispose.add(this._editor.onDidLayoutChange((()=>{this._resolveCodeLensesInViewportSoon()}))),this._localToDispose.add((0,s.OF)((()=>{if(this._editor.getModel()){const e=r.ZF.capture(this._editor);this._editor.changeDecorations((e=>{this._editor.changeViewZones((t=>{this._disposeAllLenses(e,t)}))})),e.restore(this._editor)}else this._disposeAllLenses(void 0,void 0)}))),this._localToDispose.add(this._editor.onMouseDown((e=>{if(9!==e.target.type)return;let t=e.target.element;if("SPAN"===(null==t?void 0:t.tagName)&&(t=t.parentElement),"A"===(null==t?void 0:t.tagName))for(const e of this._lenses){let o=e.getCommand(t);if(o){this._commandService.executeCommand(o.id,...o.arguments||[]).catch((e=>this._notificationService.error(e)));break}}}))),o.schedule()}_disposeAllLenses(e,t){const o=new x;for(const e of this._lenses)e.dispose(o,t);e&&o.commit(e),this._lenses.length=0}_renderCodeLensSymbols(e){if(!this._editor.hasModel())return;let t,o=this._editor.getModel().getLineCount(),i=[];for(let n of e.lenses){let e=n.symbol.range.startLineNumber;e<1||e>o||(t&&t[t.length-1].symbol.range.startLineNumber===e?t.push(n):(t=[n],i.push(t)))}const n=r.ZF.capture(this._editor),s=this._getLayoutInfo();this._editor.changeDecorations((e=>{this._editor.changeViewZones((t=>{const o=new x;let n=0,r=0;for(;r<i.length&&n<this._lenses.length;){let e=i[r][0].symbol.range.startLineNumber,a=this._lenses[n].getLineNumber();a<e?(this._lenses[n].dispose(o,t),this._lenses.splice(n,1)):a===e?(this._lenses[n].updateCodeLensSymbols(i[r],o),r++,n++):(this._lenses.splice(n,0,new k(i[r],this._editor,this._styleClassName,o,t,s.codeLensHeight,(()=>this._resolveCodeLensesInViewportSoon()))),n++,r++)}for(;n<this._lenses.length;)this._lenses[n].dispose(o,t),this._lenses.splice(n,1);for(;r<i.length;)this._lenses.push(new k(i[r],this._editor,this._styleClassName,o,t,s.codeLensHeight,(()=>this._resolveCodeLensesInViewportSoon()))),r++;o.commit(e)}))})),n.restore(this._editor)}_resolveCodeLensesInViewportSoon(){this._editor.getModel()&&this._resolveCodeLensesScheduler.schedule()}_resolveCodeLensesInViewport(){var e;null===(e=this._resolveCodeLensesPromise)||void 0===e||e.cancel(),this._resolveCodeLensesPromise=void 0;const t=this._editor.getModel();if(!t)return;const o=[],s=[];if(this._lenses.forEach((e=>{const i=e.computeIfNecessary(t);i&&(o.push(i),s.push(e))})),0===o.length)return;const r=Date.now(),a=(0,i.PG)((e=>{const i=o.map(((o,i)=>{const r=new Array(o.length),a=o.map(((o,i)=>o.symbol.command||"function"!=typeof o.provider.resolveCodeLens?(r[i]=o.symbol,Promise.resolve(void 0)):Promise.resolve(o.provider.resolveCodeLens(t,o.symbol,e)).then((e=>{r[i]=e}),n.Cp)));return Promise.all(a).then((()=>{e.isCancellationRequested||s[i].isDisposed()||s[i].updateCommands(r)}))}));return Promise.all(i)}));this._resolveCodeLensesPromise=a,this._resolveCodeLensesPromise.then((()=>{const e=this._resolveCodeLensesDelays.update(t,Date.now()-r);this._resolveCodeLensesScheduler.delay=e,this._currentCodeLensModel&&this._codeLensCache.put(t,this._currentCodeLensModel),this._oldCodeLensModels.clear(),a===this._resolveCodeLensesPromise&&(this._resolveCodeLensesPromise=void 0)}),(e=>{(0,n.dL)(e),a===this._resolveCodeLensesPromise&&(this._resolveCodeLensesPromise=void 0)}))}getLenses(){return this._lenses}};Y.ID="css.editor.codeLens",Y=$([j(1,u.H),j(2,A.lT),j(3,R)],Y),(0,a._K)(Y.ID,Y),(0,a.Qr)(class extends a.R6{constructor(){super({id:"codelens.showLensesInCurrentLine",precondition:U.u.hasCodeLensProvider,label:(0,W.N)("showLensOnLine","Show CodeLens Commands For Current Line"),alias:"Show CodeLens Commands For Current Line"})}run(e,t){return Q(this,void 0,void 0,(function*(){if(!t.hasModel())return;const o=e.get(V.eJ),i=e.get(u.H),n=e.get(A.lT),s=t.getSelection().positionLineNumber,r=t.getContribution(Y.ID),a=[];for(let e of r.getLenses())if(e.getLineNumber()===s)for(let t of e.getItems()){const{command:e}=t.symbol;e&&a.push({label:e.title,command:e})}if(0===a.length)return;const c=yield o.pick(a,{canPickMany:!1});if(c)try{yield i.executeCommand(c.command.id,...c.command.arguments||[])}catch(e){n.error(e)}}))}})},83308:function(e,t,o){o.d(t,{E:function(){return l},R:function(){return h}});var i=o(71050),n=o(17301),s=o(70666),r=o(24314),a=o(44101),c=o(51200),d=o(94565);function l(e,t){const o=[],i=a.OH.ordered(e).reverse().map((i=>Promise.resolve(i.provideDocumentColors(e,t)).then((e=>{if(Array.isArray(e))for(let t of e)o.push({colorInfo:t,provider:i})}))));return Promise.all(i).then((()=>o))}function h(e,t,o,i){return Promise.resolve(o.provideColorPresentations(e,t,i))}d.P.registerCommand("_executeDocumentColorProvider",(function(e,...t){const[o]=t;if(!(o instanceof s.o))throw(0,n.b1)();const r=e.get(c.q).getModel(o);if(!r)throw(0,n.b1)();const d=[],l=a.OH.ordered(r).reverse().map((e=>Promise.resolve(e.provideDocumentColors(r,i.T.None)).then((e=>{if(Array.isArray(e))for(let t of e)d.push({range:t.range,color:[t.color.red,t.color.green,t.color.blue,t.color.alpha]})}))));return Promise.all(l).then((()=>d))})),d.P.registerCommand("_executeColorPresentationProvider",(function(e,...t){const[o,d]=t,{uri:l,range:h}=d;if(!(l instanceof s.o&&Array.isArray(o)&&4===o.length&&r.e.isIRange(h)))throw(0,n.b1)();const[u,g,p,m]=o,_=e.get(c.q).getModel(l);if(!_)throw(0,n.b1)();const f={range:h,color:{red:u,green:g,blue:p,alpha:m}},C=[],v=a.OH.ordered(_).reverse().map((e=>Promise.resolve(e.provideColorPresentations(_,f,i.T.None)).then((e=>{Array.isArray(e)&&C.push(...e)}))));return Promise.all(v).then((()=>C))}))},77956:function(e,t,o){o.r(t),o.d(t,{ColorContribution:function(){return a}});o(64494);var i=o(5976),n=o(16830),s=o(67910),r=o(24314);class a extends i.JT{constructor(e){super(),this._editor=e,this._register(e.onMouseDown((e=>this.onMouseDown(e))))}dispose(){super.dispose()}onMouseDown(e){var t;if(6!==e.target.type)return;if(![...(null===(t=e.target.element)||void 0===t?void 0:t.classList.values())||[]].find((e=>e.startsWith("ced-colorBox"))))return;if(!e.target.range)return;const o=this._editor.getContribution(s.ModesHoverController.ID);if(!o.isColorPickerVisible()){const t=new r.e(e.target.range.startLineNumber,e.target.range.startColumn+1,e.target.range.endLineNumber,e.target.range.endColumn+1);o.showContentHover(t,0,!1)}}}a.ID="editor.contrib.colorContribution",(0,n._K)(a.ID,a)},64494:function(e,t,o){o.d(t,{i:function(){return f}});var i=o(15393),n=o(41264),s=o(17301),r=o(89954),a=o(5976),c=o(16830),d=o(11640),l=o(24314),h=o(83103),u=o(44101),g=o(83308),p=o(33108),m=function(e,t,o,i){var n,s=arguments.length,r=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,o,r):n(t,o))||r);return s>3&&r&&Object.defineProperty(t,o,r),r},_=function(e,t){return function(o,i){t(o,i,e)}};let f=class e extends a.JT{constructor(e,t,o){super(),this._editor=e,this._codeEditorService=t,this._configurationService=o,this._localToDispose=this._register(new a.SL),this._decorationsIds=[],this._colorDatas=new Map,this._colorDecoratorIds=[],this._decorationsTypes=new Set,this._register(e.onDidChangeModel((()=>{this._isEnabled=this.isEnabled(),this.onModelChanged()}))),this._register(e.onDidChangeModelLanguage((()=>this.onModelChanged()))),this._register(u.OH.onDidChange((()=>this.onModelChanged()))),this._register(e.onDidChangeConfiguration((()=>{let e=this._isEnabled;this._isEnabled=this.isEnabled(),e!==this._isEnabled&&(this._isEnabled?this.onModelChanged():this.removeAllDecorations())}))),this._timeoutTimer=null,this._computePromise=null,this._isEnabled=this.isEnabled(),this.onModelChanged()}isEnabled(){const e=this._editor.getModel();if(!e)return!1;const t=e.getLanguageIdentifier(),o=this._configurationService.getValue(t.language);if(o&&"object"==typeof o){const e=o.colorDecorators;if(e&&void 0!==e.enable&&!e.enable)return e.enable}return this._editor.getOption(15)}static get(e){return e.getContribution(this.ID)}dispose(){this.stop(),this.removeAllDecorations(),super.dispose()}onModelChanged(){if(this.stop(),!this._isEnabled)return;const t=this._editor.getModel();t&&u.OH.has(t)&&(this._localToDispose.add(this._editor.onDidChangeModelContent((()=>{this._timeoutTimer||(this._timeoutTimer=new i._F,this._timeoutTimer.cancelAndSet((()=>{this._timeoutTimer=null,this.beginCompute()}),e.RECOMPUTE_TIME))}))),this.beginCompute())}beginCompute(){this._computePromise=(0,i.PG)((e=>{const t=this._editor.getModel();return t?(0,g.E)(t,e):Promise.resolve([])})),this._computePromise.then((e=>{this.updateDecorations(e),this.updateColorDecorators(e),this._computePromise=null}),s.dL)}stop(){this._timeoutTimer&&(this._timeoutTimer.cancel(),this._timeoutTimer=null),this._computePromise&&(this._computePromise.cancel(),this._computePromise=null),this._localToDispose.clear()}updateDecorations(e){const t=e.map((e=>({range:{startLineNumber:e.colorInfo.range.startLineNumber,startColumn:e.colorInfo.range.startColumn,endLineNumber:e.colorInfo.range.endLineNumber,endColumn:e.colorInfo.range.endColumn},options:h.qx.EMPTY})));this._decorationsIds=this._editor.deltaDecorations(this._decorationsIds,t),this._colorDatas=new Map,this._decorationsIds.forEach(((t,o)=>this._colorDatas.set(t,e[o])))}updateColorDecorators(e){let t=[],o={};for(let i=0;i<e.length&&t.length<500;i++){const{red:s,green:a,blue:c,alpha:d}=e[i].colorInfo.color,l=new n.VS(Math.round(255*s),Math.round(255*a),Math.round(255*c),d);let h=(0,r.vp)(`rgba(${l.r},${l.g},${l.b},${l.a})`).toString(16),u=`rgba(${l.r}, ${l.g}, ${l.b}, ${l.a})`,g="colorBox-"+h;this._decorationsTypes.has(g)||o[g]||this._codeEditorService.registerDecorationType("color-detector-color",g,{before:{contentText:" ",border:"solid 0.1em #000",margin:"0.1em 0.2em 0 0.2em",width:"0.8em",height:"0.8em",backgroundColor:u},dark:{before:{border:"solid 0.1em #eee"}}},void 0,this._editor),o[g]=!0,t.push({range:{startLineNumber:e[i].colorInfo.range.startLineNumber,startColumn:e[i].colorInfo.range.startColumn,endLineNumber:e[i].colorInfo.range.endLineNumber,endColumn:e[i].colorInfo.range.endColumn},options:this._codeEditorService.resolveDecorationOptions(g,!0)})}this._decorationsTypes.forEach((e=>{o[e]||this._codeEditorService.removeDecorationType(e)})),this._colorDecoratorIds=this._editor.deltaDecorations(this._colorDecoratorIds,t)}removeAllDecorations(){this._decorationsIds=this._editor.deltaDecorations(this._decorationsIds,[]),this._colorDecoratorIds=this._editor.deltaDecorations(this._colorDecoratorIds,[]),this._decorationsTypes.forEach((e=>{this._codeEditorService.removeDecorationType(e)}))}getColorData(e){const t=this._editor.getModel();if(!t)return null;const o=t.getDecorationsInRange(l.e.fromPositions(e,e)).filter((e=>this._colorDatas.has(e.id)));return 0===o.length?null:this._colorDatas.get(o[0].id)}};f.ID="editor.contrib.colorDetector",f.RECOMPUTE_TIME=1e3,f=m([_(1,d.$),_(2,p.Ui)],f),(0,c._K)(f.ID,f)},94789:function(e,t,o){o.d(t,{A:function(){return n}});var i=o(4669);class n{constructor(e,t,o){this.presentationIndex=o,this._onColorFlushed=new i.Q5,this.onColorFlushed=this._onColorFlushed.event,this._onDidChangeColor=new i.Q5,this.onDidChangeColor=this._onDidChangeColor.event,this._onDidChangePresentation=new i.Q5,this.onDidChangePresentation=this._onDidChangePresentation.event,this.originalColor=e,this._color=e,this._colorPresentations=t}get color(){return this._color}set color(e){this._color.equals(e)||(this._color=e,this._onDidChangeColor.fire(e))}get presentation(){return this.colorPresentations[this.presentationIndex]}get colorPresentations(){return this._colorPresentations}set colorPresentations(e){this._colorPresentations=e,this.presentationIndex>e.length-1&&(this.presentationIndex=0),this._onDidChangePresentation.fire(this.presentation)}selectNextColorPresentation(){this.presentationIndex=(this.presentationIndex+1)%this.colorPresentations.length,this.flushColor(),this._onDidChangePresentation.fire(this.presentation)}guessColorPresentation(e,t){for(let e=0;e<this.colorPresentations.length;e++)if(t.toLowerCase()===this.colorPresentations[e].label){this.presentationIndex=e,this._onDidChangePresentation.fire(this.presentation);break}}flushColor(){this._onColorFlushed.fire(this._color)}}},77862:function(e,t,o){o.d(t,{YW:function(){return v}});var i=o(16268),n=o(65321),s=o(57974),r=o(93794),a=o(41264),c=o(4669),d=o(5976),l=o(73910),h=o(97781);const u=n.$;class g extends d.JT{constructor(e,t,o){super(),this.model=t,this.domNode=u(".colorpicker-header"),n.R3(e,this.domNode),this.pickedColorNode=n.R3(this.domNode,u(".picked-color"));const i=n.R3(this.domNode,u(".original-color"));i.style.backgroundColor=a.Il.Format.CSS.format(this.model.originalColor)||"",this.backgroundColor=o.getColorTheme().getColor(l.yJ)||a.Il.white,this._register((0,h.Ic)(((e,t)=>{this.backgroundColor=e.getColor(l.yJ)||a.Il.white}))),this._register(n.nm(this.pickedColorNode,n.tw.CLICK,(()=>this.model.selectNextColorPresentation()))),this._register(n.nm(i,n.tw.CLICK,(()=>{this.model.color=this.model.originalColor,this.model.flushColor()}))),this._register(t.onDidChangeColor(this.onDidChangeColor,this)),this._register(t.onDidChangePresentation(this.onDidChangePresentation,this)),this.pickedColorNode.style.backgroundColor=a.Il.Format.CSS.format(t.color)||"",this.pickedColorNode.classList.toggle("light",t.color.rgba.a<.5?this.backgroundColor.isLighter():t.color.isLighter())}onDidChangeColor(e){this.pickedColorNode.style.backgroundColor=a.Il.Format.CSS.format(e)||"",this.pickedColorNode.classList.toggle("light",e.rgba.a<.5?this.backgroundColor.isLighter():e.isLighter()),this.onDidChangePresentation()}onDidChangePresentation(){this.pickedColorNode.textContent=this.model.presentation?this.model.presentation.label:""}}class p extends d.JT{constructor(e,t,o){super(),this.model=t,this.pixelRatio=o,this.domNode=u(".colorpicker-body"),n.R3(e,this.domNode),this.saturationBox=new m(this.domNode,this.model,this.pixelRatio),this._register(this.saturationBox),this._register(this.saturationBox.onDidChange(this.onDidSaturationValueChange,this)),this._register(this.saturationBox.onColorFlushed(this.flushColor,this)),this.opacityStrip=new f(this.domNode,this.model),this._register(this.opacityStrip),this._register(this.opacityStrip.onDidChange(this.onDidOpacityChange,this)),this._register(this.opacityStrip.onColorFlushed(this.flushColor,this)),this.hueStrip=new C(this.domNode,this.model),this._register(this.hueStrip),this._register(this.hueStrip.onDidChange(this.onDidHueChange,this)),this._register(this.hueStrip.onColorFlushed(this.flushColor,this))}flushColor(){this.model.flushColor()}onDidSaturationValueChange({s:e,v:t}){const o=this.model.color.hsva;this.model.color=new a.Il(new a.tx(o.h,e,t,o.a))}onDidOpacityChange(e){const t=this.model.color.hsva;this.model.color=new a.Il(new a.tx(t.h,t.s,t.v,e))}onDidHueChange(e){const t=this.model.color.hsva,o=360*(1-e);this.model.color=new a.Il(new a.tx(360===o?0:o,t.s,t.v,t.a))}layout(){this.saturationBox.layout(),this.opacityStrip.layout(),this.hueStrip.layout()}}class m extends d.JT{constructor(e,t,o){super(),this.model=t,this.pixelRatio=o,this._onDidChange=new c.Q5,this.onDidChange=this._onDidChange.event,this._onColorFlushed=new c.Q5,this.onColorFlushed=this._onColorFlushed.event,this.domNode=u(".saturation-wrap"),n.R3(e,this.domNode),this.canvas=document.createElement("canvas"),this.canvas.className="saturation-box",n.R3(this.domNode,this.canvas),this.selection=u(".saturation-selection"),n.R3(this.domNode,this.selection),this.layout(),this._register(n.Lo(this.domNode,(e=>this.onMouseDown(e)))),this._register(this.model.onDidChangeColor(this.onDidChangeColor,this)),this.monitor=null}onMouseDown(e){this.monitor=this._register(new s.Z);const t=n.i(this.domNode);e.target!==this.selection&&this.onDidChangePosition(e.offsetX,e.offsetY),this.monitor.startMonitoring(e.target,e.buttons,s.e,(e=>this.onDidChangePosition(e.posx-t.left,e.posy-t.top)),(()=>null));const o=n.qV(document,(()=>{this._onColorFlushed.fire(),o.dispose(),this.monitor&&(this.monitor.stopMonitoring(!0),this.monitor=null)}),!0)}onDidChangePosition(e,t){const o=Math.max(0,Math.min(1,e/this.width)),i=Math.max(0,Math.min(1,1-t/this.height));this.paintSelection(o,i),this._onDidChange.fire({s:o,v:i})}layout(){this.width=this.domNode.offsetWidth,this.height=this.domNode.offsetHeight,this.canvas.width=this.width*this.pixelRatio,this.canvas.height=this.height*this.pixelRatio,this.paint();const e=this.model.color.hsva;this.paintSelection(e.s,e.v)}paint(){const e=this.model.color.hsva,t=new a.Il(new a.tx(e.h,1,1,1)),o=this.canvas.getContext("2d"),i=o.createLinearGradient(0,0,this.canvas.width,0);i.addColorStop(0,"rgba(255, 255, 255, 1)"),i.addColorStop(.5,"rgba(255, 255, 255, 0.5)"),i.addColorStop(1,"rgba(255, 255, 255, 0)");const n=o.createLinearGradient(0,0,0,this.canvas.height);n.addColorStop(0,"rgba(0, 0, 0, 0)"),n.addColorStop(1,"rgba(0, 0, 0, 1)"),o.rect(0,0,this.canvas.width,this.canvas.height),o.fillStyle=a.Il.Format.CSS.format(t),o.fill(),o.fillStyle=i,o.fill(),o.fillStyle=n,o.fill()}paintSelection(e,t){this.selection.style.left=e*this.width+"px",this.selection.style.top=this.height-t*this.height+"px"}onDidChangeColor(){this.monitor&&this.monitor.isMonitoring()||this.paint()}}class _ extends d.JT{constructor(e,t){super(),this.model=t,this._onDidChange=new c.Q5,this.onDidChange=this._onDidChange.event,this._onColorFlushed=new c.Q5,this.onColorFlushed=this._onColorFlushed.event,this.domNode=n.R3(e,u(".strip")),this.overlay=n.R3(this.domNode,u(".overlay")),this.slider=n.R3(this.domNode,u(".slider")),this.slider.style.top="0px",this._register(n.Lo(this.domNode,(e=>this.onMouseDown(e)))),this.layout()}layout(){this.height=this.domNode.offsetHeight-this.slider.offsetHeight;const e=this.getValue(this.model.color);this.updateSliderPosition(e)}onMouseDown(e){const t=this._register(new s.Z),o=n.i(this.domNode);this.domNode.classList.add("grabbing"),e.target!==this.slider&&this.onDidChangeTop(e.offsetY),t.startMonitoring(e.target,e.buttons,s.e,(e=>this.onDidChangeTop(e.posy-o.top)),(()=>null));const i=n.qV(document,(()=>{this._onColorFlushed.fire(),i.dispose(),t.stopMonitoring(!0),this.domNode.classList.remove("grabbing")}),!0)}onDidChangeTop(e){const t=Math.max(0,Math.min(1,1-e/this.height));this.updateSliderPosition(t),this._onDidChange.fire(t)}updateSliderPosition(e){this.slider.style.top=(1-e)*this.height+"px"}}class f extends _{constructor(e,t){super(e,t),this.domNode.classList.add("opacity-strip"),this._register(t.onDidChangeColor(this.onDidChangeColor,this)),this.onDidChangeColor(this.model.color)}onDidChangeColor(e){const{r:t,g:o,b:i}=e.rgba,n=new a.Il(new a.VS(t,o,i,1)),s=new a.Il(new a.VS(t,o,i,0));this.overlay.style.background=`linear-gradient(to bottom, ${n} 0%, ${s} 100%)`}getValue(e){return e.hsva.a}}class C extends _{constructor(e,t){super(e,t),this.domNode.classList.add("hue-strip")}getValue(e){return 1-e.hsva.h/360}}class v extends r.${constructor(e,t,o,n){super(),this.model=t,this.pixelRatio=o,this._register((0,i.fX)((()=>this.layout())));const s=u(".colorpicker-widget");e.appendChild(s);const r=new g(s,this.model,n);this.body=new p(s,this.model,this.pixelRatio),this._register(r),this._register(this.body)}layout(){this.body.layout()}}},89098:function(e,t,o){o.r(t);var i=o(63580),n=o(22258),s=o(16830),r=o(24314),a=o(29102),c=o(69386),d=o(50187),l=o(3860),h=o(83831);class u{constructor(e,t){this._selection=e,this._insertSpace=t,this._usedEndToken=null}static _haystackHasNeedleAtOffset(e,t,o){if(o<0)return!1;const i=t.length;if(o+i>e.length)return!1;for(let n=0;n<i;n++){const i=e.charCodeAt(o+n),s=t.charCodeAt(n);if(i!==s&&!(i>=65&&i<=90&&i+32===s||s>=65&&s<=90&&s+32===i))return!1}return!0}_createOperationsForBlockComment(e,t,o,i,n,s){const a=e.startLineNumber,c=e.startColumn,d=e.endLineNumber,l=e.endColumn,h=n.getLineContent(a),g=n.getLineContent(d);let p,m=h.lastIndexOf(t,c-1+t.length),_=g.indexOf(o,l-1-o.length);if(-1!==m&&-1!==_)if(a===d){h.substring(m+t.length,_).indexOf(o)>=0&&(m=-1,_=-1)}else{const e=h.substring(m+t.length),i=g.substring(0,_);(e.indexOf(o)>=0||i.indexOf(o)>=0)&&(m=-1,_=-1)}-1!==m&&-1!==_?(i&&m+t.length<h.length&&32===h.charCodeAt(m+t.length)&&(t+=" "),i&&_>0&&32===g.charCodeAt(_-1)&&(o=" "+o,_-=1),p=u._createRemoveBlockCommentOperations(new r.e(a,m+t.length+1,d,_+1),t,o)):(p=u._createAddBlockCommentOperations(e,t,o,this._insertSpace),this._usedEndToken=1===p.length?o:null);for(const e of p)s.addTrackedEditOperation(e.range,e.text)}static _createRemoveBlockCommentOperations(e,t,o){let i=[];return r.e.isEmpty(e)?i.push(c.h.delete(new r.e(e.startLineNumber,e.startColumn-t.length,e.endLineNumber,e.endColumn+o.length))):(i.push(c.h.delete(new r.e(e.startLineNumber,e.startColumn-t.length,e.startLineNumber,e.startColumn))),i.push(c.h.delete(new r.e(e.endLineNumber,e.endColumn,e.endLineNumber,e.endColumn+o.length)))),i}static _createAddBlockCommentOperations(e,t,o,i){let n=[];return r.e.isEmpty(e)?n.push(c.h.replace(new r.e(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn),t+"  "+o)):(n.push(c.h.insert(new d.L(e.startLineNumber,e.startColumn),t+(i?" ":""))),n.push(c.h.insert(new d.L(e.endLineNumber,e.endColumn),(i?" ":"")+o))),n}getEditOperations(e,t){const o=this._selection.startLineNumber,i=this._selection.startColumn;e.tokenizeIfCheap(o);const n=e.getLanguageIdAtPosition(o,i),s=h.zu.getComments(n);s&&s.blockCommentStartToken&&s.blockCommentEndToken&&this._createOperationsForBlockComment(this._selection,s.blockCommentStartToken,s.blockCommentEndToken,this._insertSpace,e,t)}computeCursorState(e,t){const o=t.getInverseEditOperations();if(2===o.length){const e=o[0],t=o[1];return new l.Y(e.range.endLineNumber,e.range.endColumn,t.range.startLineNumber,t.range.startColumn)}{const e=o[0].range,t=this._usedEndToken?-this._usedEndToken.length-1:0;return new l.Y(e.endLineNumber,e.endColumn+t,e.endLineNumber,e.endColumn+t)}}}var g=o(97295);class p{constructor(e,t,o,i,n,s){this._selection=e,this._tabSize=t,this._type=o,this._insertSpace=i,this._selectionId=null,this._deltaColumn=0,this._moveEndPositionDown=!1,this._ignoreEmptyLines=n,this._ignoreFirstLine=s||!1}static _gatherPreflightCommentStrings(e,t,o){e.tokenizeIfCheap(t);const i=e.getLanguageIdAtPosition(t,1),n=h.zu.getComments(i),s=n?n.lineCommentToken:null;if(!s)return null;let r=[];for(let e=0,i=o-t+1;e<i;e++)r[e]={ignore:!1,commentStr:s,commentStrOffset:0,commentStrLength:s.length};return r}static _analyzeLines(e,t,o,i,n,s,r){let a,c=!0;a=0===e||1!==e;for(let d=0,l=i.length;d<l;d++){const l=i[d],h=n+d;if(h===n&&r){l.ignore=!0;continue}const p=o.getLineContent(h),m=g.LC(p);if(-1!==m){if(c=!1,l.ignore=!1,l.commentStrOffset=m,a&&!u._haystackHasNeedleAtOffset(p,l.commentStr,m)&&(0===e?a=!1:1===e||(l.ignore=!0)),a&&t){const e=m+l.commentStrLength;e<p.length&&32===p.charCodeAt(e)&&(l.commentStrLength+=1)}}else l.ignore=s,l.commentStrOffset=p.length}if(0===e&&c){a=!1;for(let e=0,t=i.length;e<t;e++)i[e].ignore=!1}return{supported:!0,shouldRemoveComments:a,lines:i}}static _gatherPreflightData(e,t,o,i,n,s,r){const a=p._gatherPreflightCommentStrings(o,i,n);return null===a?{supported:!1}:p._analyzeLines(e,t,o,a,i,s,r)}_executeLineComments(e,t,o,i){let n;o.shouldRemoveComments?n=p._createRemoveLineCommentsOperations(o.lines,i.startLineNumber):(p._normalizeInsertionPoint(e,o.lines,i.startLineNumber,this._tabSize),n=this._createAddLineCommentsOperations(o.lines,i.startLineNumber));const s=new d.L(i.positionLineNumber,i.positionColumn);for(let o=0,i=n.length;o<i;o++)if(t.addEditOperation(n[o].range,n[o].text),r.e.isEmpty(n[o].range)&&r.e.getStartPosition(n[o].range).equals(s)){e.getLineContent(s.lineNumber).length+1===s.column&&(this._deltaColumn=(n[o].text||"").length)}this._selectionId=t.trackSelection(i)}_attemptRemoveBlockComment(e,t,o,i){let n=t.startLineNumber,s=t.endLineNumber,a=i.length+Math.max(e.getLineFirstNonWhitespaceColumn(t.startLineNumber),t.startColumn),c=e.getLineContent(n).lastIndexOf(o,a-1),d=e.getLineContent(s).indexOf(i,t.endColumn-1-o.length);return-1!==c&&-1===d&&(d=e.getLineContent(n).indexOf(i,c+o.length),s=n),-1===c&&-1!==d&&(c=e.getLineContent(s).lastIndexOf(o,d),n=s),!t.isEmpty()||-1!==c&&-1!==d||(c=e.getLineContent(n).indexOf(o),-1!==c&&(d=e.getLineContent(n).indexOf(i,c+o.length))),-1!==c&&32===e.getLineContent(n).charCodeAt(c+o.length)&&(o+=" "),-1!==d&&32===e.getLineContent(s).charCodeAt(d-1)&&(i=" "+i,d-=1),-1!==c&&-1!==d?u._createRemoveBlockCommentOperations(new r.e(n,c+o.length+1,s,d+1),o,i):null}_executeBlockComment(e,t,o){e.tokenizeIfCheap(o.startLineNumber);let i=e.getLanguageIdAtPosition(o.startLineNumber,1),n=h.zu.getComments(i);if(!n||!n.blockCommentStartToken||!n.blockCommentEndToken)return;const s=n.blockCommentStartToken,a=n.blockCommentEndToken;let c=this._attemptRemoveBlockComment(e,o,s,a);if(!c){if(o.isEmpty()){const t=e.getLineContent(o.startLineNumber);let i=g.LC(t);-1===i&&(i=t.length),c=u._createAddBlockCommentOperations(new r.e(o.startLineNumber,i+1,o.startLineNumber,t.length+1),s,a,this._insertSpace)}else c=u._createAddBlockCommentOperations(new r.e(o.startLineNumber,e.getLineFirstNonWhitespaceColumn(o.startLineNumber),o.endLineNumber,e.getLineMaxColumn(o.endLineNumber)),s,a,this._insertSpace);1===c.length&&(this._deltaColumn=s.length+1)}this._selectionId=t.trackSelection(o);for(const e of c)t.addEditOperation(e.range,e.text)}getEditOperations(e,t){let o=this._selection;if(this._moveEndPositionDown=!1,o.startLineNumber===o.endLineNumber&&this._ignoreFirstLine)return t.addEditOperation(new r.e(o.startLineNumber,e.getLineMaxColumn(o.startLineNumber),o.startLineNumber+1,1),o.startLineNumber===e.getLineCount()?"":"\n"),void(this._selectionId=t.trackSelection(o));o.startLineNumber<o.endLineNumber&&1===o.endColumn&&(this._moveEndPositionDown=!0,o=o.setEndPosition(o.endLineNumber-1,e.getLineMaxColumn(o.endLineNumber-1)));const i=p._gatherPreflightData(this._type,this._insertSpace,e,o.startLineNumber,o.endLineNumber,this._ignoreEmptyLines,this._ignoreFirstLine);return i.supported?this._executeLineComments(e,t,i,o):this._executeBlockComment(e,t,o)}computeCursorState(e,t){let o=t.getTrackedSelection(this._selectionId);return this._moveEndPositionDown&&(o=o.setEndPosition(o.endLineNumber+1,1)),new l.Y(o.selectionStartLineNumber,o.selectionStartColumn+this._deltaColumn,o.positionLineNumber,o.positionColumn+this._deltaColumn)}static _createRemoveLineCommentsOperations(e,t){let o=[];for(let i=0,n=e.length;i<n;i++){const n=e[i];n.ignore||o.push(c.h.delete(new r.e(t+i,n.commentStrOffset+1,t+i,n.commentStrOffset+n.commentStrLength+1)))}return o}_createAddLineCommentsOperations(e,t){let o=[];const i=this._insertSpace?" ":"";for(let n=0,s=e.length;n<s;n++){const s=e[n];s.ignore||o.push(c.h.insert(new d.L(t+n,s.commentStrOffset+1),s.commentStr+i))}return o}static nextVisibleColumn(e,t,o,i){return o?e+(t-e%t):e+i}static _normalizeInsertionPoint(e,t,o,i){let n,s,r=1073741824;for(let n=0,s=t.length;n<s;n++){if(t[n].ignore)continue;const s=e.getLineContent(o+n);let a=0;for(let e=0,o=t[n].commentStrOffset;a<r&&e<o;e++)a=p.nextVisibleColumn(a,i,9===s.charCodeAt(e),1);a<r&&(r=a)}r=Math.floor(r/i)*i;for(let a=0,c=t.length;a<c;a++){if(t[a].ignore)continue;const c=e.getLineContent(o+a);let d=0;for(n=0,s=t[a].commentStrOffset;d<r&&n<s;n++)d=p.nextVisibleColumn(d,i,9===c.charCodeAt(n),1);t[a].commentStrOffset=d>r?n-1:n}}}var m=o(84144);class _ extends s.R6{constructor(e,t){super(t),this._type=e}run(e,t){if(!t.hasModel())return;const o=[],i=t.getModel().getOptions(),n=t.getOption(17),s=t.getSelections().map(((e,t)=>({selection:e,index:t,ignoreFirstLine:!1})));s.sort(((e,t)=>r.e.compareRangesUsingStarts(e.selection,t.selection)));let a=s[0];for(let e=1;e<s.length;e++){const t=s[e];a.selection.endLineNumber===t.selection.startLineNumber&&(a.index<t.index?t.ignoreFirstLine=!0:(a.ignoreFirstLine=!0,a=t))}for(const e of s)o.push(new p(e.selection,i.tabSize,this._type,n.insertSpace,n.ignoreEmptyLines,e.ignoreFirstLine));t.pushUndoStop(),t.executeCommands(this.id,o),t.pushUndoStop()}}class f extends s.R6{constructor(){super({id:"editor.action.blockComment",label:i.N("comment.block","Toggle Block Comment"),alias:"Toggle Block Comment",precondition:a.u.writable,kbOpts:{kbExpr:a.u.editorTextFocus,primary:1567,linux:{primary:3103},weight:100},menuOpts:{menuId:m.eH.MenubarEditMenu,group:"5_insert",title:i.N({key:"miToggleBlockComment",comment:["&& denotes a mnemonic"]},"Toggle &&Block Comment"),order:2}})}run(e,t){if(!t.hasModel())return;const o=t.getOption(17),i=[],n=t.getSelections();for(const e of n)i.push(new u(e,o.insertSpace));t.pushUndoStop(),t.executeCommands(this.id,i),t.pushUndoStop()}}(0,s.Qr)(class extends _{constructor(){super(0,{id:"editor.action.commentLine",label:i.N("comment.line","Toggle Line Comment"),alias:"Toggle Line Comment",precondition:a.u.writable,kbOpts:{kbExpr:a.u.editorTextFocus,primary:2133,weight:100},menuOpts:{menuId:m.eH.MenubarEditMenu,group:"5_insert",title:i.N({key:"miToggleLineComment",comment:["&& denotes a mnemonic"]},"&&Toggle Line Comment"),order:1}})}}),(0,s.Qr)(class extends _{constructor(){super(1,{id:"editor.action.addCommentLine",label:i.N("comment.line.add","Add Line Comment"),alias:"Add Line Comment",precondition:a.u.writable,kbOpts:{kbExpr:a.u.editorTextFocus,primary:(0,n.gx)(2089,2081),weight:100}})}}),(0,s.Qr)(class extends _{constructor(){super(2,{id:"editor.action.removeCommentLine",label:i.N("comment.line.remove","Remove Line Comment"),alias:"Remove Line Comment",precondition:a.u.writable,kbOpts:{kbExpr:a.u.editorTextFocus,primary:(0,n.gx)(2089,2099),weight:100}})}}),(0,s.Qr)(f)},76522:function(e,t,o){o.r(t),o.d(t,{ContextMenuController:function(){return f}});var i=o(63580),n=o(65321),s=o(74741),r=o(5976),a=o(16830),c=o(29102),d=o(84144),l=o(38819),h=o(5606),u=o(91847),g=o(76033),p=o(1432),m=function(e,t,o,i){var n,s=arguments.length,r=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,o,r):n(t,o))||r);return s>3&&r&&Object.defineProperty(t,o,r),r},_=function(e,t){return function(o,i){t(o,i,e)}};let f=class e{constructor(e,t,o,i,s,a){this._contextMenuService=t,this._contextViewService=o,this._contextKeyService=i,this._keybindingService=s,this._menuService=a,this._toDispose=new r.SL,this._contextMenuIsBeingShownCount=0,this._editor=e,this._toDispose.add(this._editor.onContextMenu((e=>this._onContextMenu(e)))),this._toDispose.add(this._editor.onMouseWheel((e=>{if(this._contextMenuIsBeingShownCount>0){const t=this._contextViewService.getContextViewElement(),o=e.srcElement;o.shadowRoot&&n.Ay(t)===o.shadowRoot||this._contextViewService.hideContextView()}}))),this._toDispose.add(this._editor.onKeyDown((e=>{58===e.keyCode&&(e.preventDefault(),e.stopPropagation(),this.showContextMenu())})))}static get(t){return t.getContribution(e.ID)}_onContextMenu(e){if(!this._editor.hasModel())return;if(!this._editor.getOption(18))return this._editor.focus(),void(e.target.position&&!this._editor.getSelection().containsPosition(e.target.position)&&this._editor.setPosition(e.target.position));if(12===e.target.type)return;if(e.event.preventDefault(),6!==e.target.type&&7!==e.target.type&&1!==e.target.type)return;if(this._editor.focus(),e.target.position){let t=!1;for(const o of this._editor.getSelections())if(o.containsPosition(e.target.position)){t=!0;break}t||this._editor.setPosition(e.target.position)}let t=null;1!==e.target.type&&(t={x:e.event.posx-1,width:2,y:e.event.posy-1,height:2}),this.showContextMenu(t)}showContextMenu(e){if(!this._editor.getOption(18))return;if(!this._editor.hasModel())return;if(!this._contextMenuService)return void this._editor.focus();const t=this._getMenuActions(this._editor.getModel(),this._editor.isSimpleWidget?d.eH.SimpleEditorContext:d.eH.EditorContext);t.length>0&&this._doShowContextMenu(t,e)}_getMenuActions(e,t){const o=[],i=this._menuService.createMenu(t,this._contextKeyService),n=i.getActions({arg:e.uri});i.dispose();for(let t of n){const[,i]=t;let n=0;for(const t of i)if(t instanceof d.NZ){const i=this._getMenuActions(e,t.item.submenu);i.length>0&&(o.push(new s.wY(t.id,t.label,i)),n++)}else o.push(t),n++;n&&o.push(new s.Z0)}return o.length&&o.pop(),o}_doShowContextMenu(e,t=null){if(!this._editor.hasModel())return;const o=this._editor.getOption(51);if(this._editor.updateOptions({hover:{enabled:!1}}),!t){this._editor.revealPosition(this._editor.getPosition(),1),this._editor.render();const e=this._editor.getScrolledVisiblePosition(this._editor.getPosition()),o=n.i(this._editor.getDomNode()),i=o.left+e.left,s=o.top+e.top+e.height;t={x:i,y:s}}const i=this._editor.getOption(113)&&!p.gn;this._contextMenuIsBeingShownCount++,this._contextMenuService.showContextMenu({domForShadowRoot:i?this._editor.getDomNode():void 0,getAnchor:()=>t,getActions:()=>e,getActionViewItem:e=>{const t=this._keybindingFor(e);if(t)return new g.g(e,e,{label:!0,keybinding:t.getLabel(),isMenu:!0});const o=e;return"function"==typeof o.getActionViewItem?o.getActionViewItem():new g.g(e,e,{icon:!0,label:!0,isMenu:!0})},getKeyBinding:e=>this._keybindingFor(e),onHide:e=>{this._contextMenuIsBeingShownCount--,this._editor.focus(),this._editor.updateOptions({hover:o})}})}_keybindingFor(e){return this._keybindingService.lookupKeybinding(e.id)}dispose(){this._contextMenuIsBeingShownCount>0&&this._contextViewService.hideContextView(),this._toDispose.dispose()}};f.ID="editor.contrib.contextmenu",f=m([_(1,h.i),_(2,h.u),_(3,l.i6),_(4,u.d),_(5,d.co)],f);class C extends a.R6{constructor(){super({id:"editor.action.showContextMenu",label:i.N("action.showContextMenu.label","Show Editor Context Menu"),alias:"Show Editor Context Menu",precondition:void 0,kbOpts:{kbExpr:c.u.textInputFocus,primary:1092,weight:100}})}run(e,t){f.get(t).showContextMenu()}}(0,a._K)(f.ID,f),(0,a.Qr)(C)},42834:function(e,t,o){o.r(t),o.d(t,{CursorUndoRedoController:function(){return d},CursorUndo:function(){return l},CursorRedo:function(){return h}});var i=o(63580),n=o(5976),s=o(16830),r=o(29102);class a{constructor(e){this.selections=e}equals(e){const t=this.selections.length;if(t!==e.selections.length)return!1;for(let o=0;o<t;o++)if(!this.selections[o].equalsSelection(e.selections[o]))return!1;return!0}}class c{constructor(e,t,o){this.cursorState=e,this.scrollTop=t,this.scrollLeft=o}}class d extends n.JT{constructor(e){super(),this._editor=e,this._isCursorUndoRedo=!1,this._undoStack=[],this._redoStack=[],this._register(e.onDidChangeModel((e=>{this._undoStack=[],this._redoStack=[]}))),this._register(e.onDidChangeModelContent((e=>{this._undoStack=[],this._redoStack=[]}))),this._register(e.onDidChangeCursorSelection((t=>{if(this._isCursorUndoRedo)return;if(!t.oldSelections)return;if(t.oldModelVersionId!==t.modelVersionId)return;const o=new a(t.oldSelections);this._undoStack.length>0&&this._undoStack[this._undoStack.length-1].cursorState.equals(o)||(this._undoStack.push(new c(o,e.getScrollTop(),e.getScrollLeft())),this._redoStack=[],this._undoStack.length>50&&this._undoStack.shift())})))}static get(e){return e.getContribution(d.ID)}cursorUndo(){this._editor.hasModel()&&0!==this._undoStack.length&&(this._redoStack.push(new c(new a(this._editor.getSelections()),this._editor.getScrollTop(),this._editor.getScrollLeft())),this._applyState(this._undoStack.pop()))}cursorRedo(){this._editor.hasModel()&&0!==this._redoStack.length&&(this._undoStack.push(new c(new a(this._editor.getSelections()),this._editor.getScrollTop(),this._editor.getScrollLeft())),this._applyState(this._redoStack.pop()))}_applyState(e){this._isCursorUndoRedo=!0,this._editor.setSelections(e.cursorState.selections),this._editor.setScrollPosition({scrollTop:e.scrollTop,scrollLeft:e.scrollLeft}),this._isCursorUndoRedo=!1}}d.ID="editor.contrib.cursorUndoRedoController";class l extends s.R6{constructor(){super({id:"cursorUndo",label:i.N("cursor.undo","Cursor Undo"),alias:"Cursor Undo",precondition:void 0,kbOpts:{kbExpr:r.u.textInputFocus,primary:2099,weight:100}})}run(e,t,o){d.get(t).cursorUndo()}}class h extends s.R6{constructor(){super({id:"cursorRedo",label:i.N("cursor.redo","Cursor Redo"),alias:"Cursor Redo",precondition:void 0})}run(e,t,o){d.get(t).cursorRedo()}}(0,s._K)(d.ID,d),(0,s.Qr)(l),(0,s.Qr)(h)}}]);